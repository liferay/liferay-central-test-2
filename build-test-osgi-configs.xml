<?xml version="1.0"?>

<project basedir="." name="portal-test-osgi-configs" xmlns:antelope="antlib:ise.antelope.tasks">
	<import file="build-test.xml" />

	<target name="create-config-files">
		<var name="index" value="1" />

		<get-testcase-property property.name="osgi.config.properties" />

		<for list="${osgi.config.properties}" param="properties">
			<sequential>
				<echo file="${liferay.home}/osgi/configs/${index}">@{properties}</echo>

				<math
					datatype="int"
					operand1="${index}"
					operand2="1"
					operation="+"
					result="index"
				/>
			</sequential>
		</for>

		<var name="index" value="1" />

		<get-testcase-property property.name="osgi.config.file.names" />

		<for list="${osgi.config.file.names}" param="file.names">
			<sequential>
				<if>
					<available file="${liferay.home}/osgi/configs/${index}" />
					<then>
							<move file="${liferay.home}/osgi/configs/${index}" tofile="${liferay.home}/osgi/configs/@{file.names}" />

							<math
								datatype="int"
								operand1="${index}"
								operand2="1"
								operation="+"
								result="index"
							/>
					</then>
				</if>
			</sequential>
		</for>
	</target>
</project>