<definition component-name="portal-staging">
	<property name="portal.release" value="true" />
	<property name="portal.upstream" value="true" />
	<property name="testray.main.component.name" value="Staging" />

	<var name="siteName" value="Site Name" />

	<set-up>
		<execute macro="TestCase#setUpPortalInstance" />

		<execute macro="User#firstLoginPG" />

		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Site#addBlankCP">
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Page#add">
			<var name="pageName" value="Staging Test Page" />
			<var name="siteName" value="Site Name" />
		</execute>
	</set-up>

	<tear-down>
		<execute macro="PortalInstances#tearDownCP">
			<var method="TestPropsUtil#get('test.portal.instance')" name="testPortalInstance" />
		</execute>
	</tear-down>

	<command name="StagingDemoLocalLive1" priority="4">
		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesPublishing">
			<var name="portlet" value="Staging" />
		</execute>

		<execute macro="Staging#activateStagingCP">
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#addStagingAdminRole" />

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#definePermissionCmdCP">
			<var name="permissionDefinitionKey" value="SITE_ADMIN_APPLICATIONS_DOCUMENTS_AND_MEDIA_RESOURCE_PERMISSIONS_DOCUMENT_ACTION_CHECKBOX" />
			<var name="permissionDefinitionValue" value="Action" />
			<var name="permissionNavigationKey" value="SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA" />
			<var name="permissionNavigationValue" value="Documents and Media" />
			<var name="roleTitle" value="Staging Admin" />
			<var name="roleType" value="Site" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#editPasswordCP">
			<var name="password" value="password" />
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignUserAsMemberCP">
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignSiteRoleCP">
			<var name="resourceName" value="userfn userln" />
			<var name="roleTitle" value="Staging Admin" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="userea@liferay.com" />
			<var name="userLoginFullName" value="userfn userln" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Staging Test Page" />
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="DMDocument#addPG">
			<var name="dmDocumentDescription" value="DM Document Description" />
			<var name="dmDocumentFile" value="Document_1.doc" />
			<var name="dmDocumentTitle" value="DM Document Title" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Staging Test Page" />
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="Staging#gotoPublishToLive" />

		<execute macro="Staging#configurePublishToLive">
			<var name="uncheckContentNameList" value="Documents and Media" />
		</execute>

		<execute macro="Staging#publishToLive" />

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Staging Test Page" />
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="DMPortlet#viewDefaultPG" />

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Staging Test Page" />
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="Staging#gotoPublishToLive" />

		<execute macro="Staging#configurePublishToLive">
			<var name="checkContentNameList" value="Documents and Media" />
			<var name="contentDateRange" value="All" />
		</execute>

		<execute macro="Staging#publishToLive" />

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Staging Test Page" />
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="DMDocument#viewPG">
			<var name="dmDocumentDescription" value="DM Document Description" />
			<var name="dmDocumentTitle" value="DM Document Title" />
		</execute>
	</command>

	<command name="StagingDemoLocalLive2" priority="4">
		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Site#addCommunityCP">
			<var name="siteName" value="Community Site Name" />
			<var name="uncheckPropagation" value="true" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesPublishing">
			<var name="portlet" value="Staging" />
		</execute>

		<execute macro="Staging#activateStagingCP">
			<var name="pageVersioningEnabled" value="true" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#addStagingAdminRole" />

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#editPasswordCP">
			<var name="password" value="password" />
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignUserAsMemberCP">
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignSiteRoleCP">
			<var name="resourceName" value="userfn userln" />
			<var name="roleTitle" value="Staging Admin" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="userea@liferay.com" />
			<var name="userLoginFullName" value="userfn userln" />
		</execute>

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="SitePageNavigator#gotoEditPage">
			<var name="page" value="Home" />
		</execute>

		<execute macro="Page#editPageLayoutColumn">
			<var name="columnName" value="1 Column" />
		</execute>

		<execute macro="SitePageNavigator#gotoPages">
			<var name="site" value="Community Site Name" />
		</execute>

		<execute macro="SitePageNavigator#gotoEditPage">
			<var name="page" value="Home" />
		</execute>

		<execute macro="Page#viewPageLayoutColumn">
			<var name="columnName" value="1 Column" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#undoStagingPageVersioningPG" />

		<execute macro="SitePageNavigator#gotoEditPage">
			<var name="page" value="Home" />
		</execute>

		<execute macro="Page#viewPageLayoutColumn">
			<var name="columnName" value="2 Columns" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#redoStagingPageVersioningPG" />

		<execute macro="SitePageNavigator#gotoEditPage">
			<var name="page" value="Home" />
		</execute>

		<execute macro="Page#viewPageLayoutColumn">
			<var name="columnName" value="1 Column" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#gotoPublishToLive" />

		<execute macro="Staging#publishToLive" />

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="SitePageNavigator#gotoEditPage">
			<var name="page" value="Home" />
		</execute>

		<execute macro="Page#viewPageLayoutColumn">
			<var name="columnName" value="1 Column" />
		</execute>
	</command>

	<command name="StagingDemoLocalLive3" priority="4">
		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Site#addCommunityCP">
			<var name="siteName" value="Community Site Name" />
			<var name="uncheckPropagation" value="true" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesPublishing">
			<var name="portlet" value="Staging" />
		</execute>

		<execute macro="Staging#activateStagingCP">
			<var name="pageVersioningEnabled" value="true" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#addStagingAdminRole" />

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#editPasswordCP">
			<var name="password" value="password" />
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignUserAsMemberCP">
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignSiteRoleCP">
			<var name="resourceName" value="userfn userln" />
			<var name="roleTitle" value="Staging Admin" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="userea@liferay.com" />
			<var name="userLoginFullName" value="userfn userln" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#editSitePageVariationPG">
			<var name="sitePagesVariationName" value="Main Variation" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#viewEditedSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Main Variation Edit" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#addSitePagesVariationPG">
			<var name="copySitePagesVariationName" value="Main Variation Edit" />
			<var name="sitePagesVariationName" value="Christmas Variation" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#viewSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Christmas Variation" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Page#view">
			<var name="pageName" value="Home" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Wiki" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Page#view">
			<var name="pageName" value="Wiki" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Page#add">
			<var name="pageName" value="Test Page Name" />
		</execute>

		<execute macro="Staging#changeSitePageVariationPG">
			<var name="sitePagesVariationMenulistName" value="Main Variation Edit" />
			<var name="sitePagesVariationName" value="Christmas Variation" />
		</execute>

		<execute macro="Staging#enablePageInSitePagesVariation">
			<var name="pageName" value="Test Page Name" />
			<var name="sitePagesVariationName" value="Main Variation Edit" />
		</execute>

		<execute macro="Staging#viewSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Main Variation Edit" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Test Page Name" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Page#view">
			<var name="pageName" value="Test Page Name" />
		</execute>

		<execute macro="Page#deletePG">
			<var name="pageName" value="Home" />
		</execute>

		<execute macro="Staging#changeSitePageVariationPG">
			<var name="sitePagesVariationMenulistName" value="Christmas Variation" />
			<var name="sitePagesVariationName" value="Main Variation Edit" />
		</execute>

		<execute macro="Staging#viewSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Christmas Variation" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Page#view">
			<var name="pageName" value="Home" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Test Page Name" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#gotoPublishToLive" />

		<execute macro="Staging#publishToLive" />

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Test Page Name" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#viewStagingLocalLiveVariationMessagePG">
			<var name="pageName" value="Test Page Name" />
			<var name="sitePagesVariationName" value="Christmas Variation" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Test Page Name" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#addSitePagesVariationPG">
			<var name="copySitePagesVariationName" value="None (Empty Site Pages Variation)" />
			<var name="sitePagesVariationName" value="Empty Variation" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Page#add">
			<var name="pageName" value="Empty Page Name" />
			<var name="siteScopeSelected" value="true" />
		</execute>

		<execute macro="Staging#viewSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Empty Variation" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Empty Page Name" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#gotoPublishToLive" />

		<execute macro="Staging#publishToLive" />

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Empty Page Name" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#viewStagingLocalLiveVariationMessagePG">
			<var name="pageName" value="Empty Page Name" />
			<var name="sitePagesVariationName" value="Empty Variation" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Empty Page Name" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#mergeSitePagesVariation">
			<var name="sitePagesVariationMergeName" value="Christmas Variation" />
			<var name="sitePagesVariationName" value="Empty Variation" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#viewSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Empty Variation" />
		</execute>

		<execute macro="Page#view">
			<var name="pageName" value="Home" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Wiki" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#viewSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Empty Variation" />
		</execute>

		<execute macro="Page#view">
			<var name="pageName" value="Wiki" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Test Page Name" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#viewSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Empty Variation" />
		</execute>

		<execute macro="Page#view">
			<var name="pageName" value="Test Page Name" />
		</execute>
	</command>

	<command name="StagingDemoLocalLive4" priority="4">
		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Site#addCommunityCP">
			<var name="siteName" value="Community Site Name" />
			<var name="uncheckPropagation" value="true" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesPublishing">
			<var name="portlet" value="Staging" />
		</execute>

		<execute macro="Staging#activateStagingCP">
			<var name="pageVersioningEnabled" value="true" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#addStagingAdminRole" />

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#editPasswordCP">
			<var name="password" value="password" />
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignUserAsMemberCP">
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignSiteRoleCP">
			<var name="resourceName" value="userfn userln" />
			<var name="roleTitle" value="Staging Admin" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="userea@liferay.com" />
			<var name="userLoginFullName" value="userfn userln" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#addSitePagesVariationPG">
			<var name="copySitePagesVariationName" value="Main Variation" />
			<var name="sitePagesVariationName" value="New Variation" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Page#deletePG">
			<var name="pageName" value="Wiki" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#gotoPublishToLive" />

		<execute macro="Staging#configurePublishToLive">
			<var name="deleteMissingPages" value="true" />
		</execute>

		<execute macro="Staging#publishToLive" />

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute function="AssertTextNotPresent" locator1="Home#PAGE_2" value1="Wiki" />

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Page#add">
			<var name="pageName" value="New Page Name" />
			<var name="pageStaging" value="true" />
		</execute>

		<execute macro="Staging#schedulePublishToLivePG">
			<var name="scheduleTitleName" value="Staging Schedule Title" />
		</execute>

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute function="AssertTextNotPresent" locator1="Home#PAGE_2_GUEST_VIEW" value1="New Page Name" />

		<execute function="Pause" locator1="120000" />

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute function="AssertTextEquals" locator1="Home#PAGE_2_GUEST_VIEW" value1="New Page Name" />
	</command>

	<command name="StagingLocalLiveWorkflow" priority="4">
		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Site#addCommunityCP">
			<var name="siteName" value="Community Site Name" />
			<var name="uncheckPropagation" value="true" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesPublishing">
			<var name="portlet" value="Staging" />
		</execute>

		<execute macro="Staging#activateStagingCP">
			<var name="pageVersioningEnabled" value="true" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesConfiguration">
			<var name="portlet" value="Workflow Configuration" />
		</execute>

		<execute macro="Workflow#configureWorkflow">
			<var name="workflowDefinition" value="Single Approver (Version 1)" />
			<var name="workflowResourceValue" value="Page Revision" />
		</execute>

		<execute macro="ProductMenu#gotoSite">
			<var name="site" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Web Content" />
		</execute>

		<execute macro="Workflow#configureWorkflowViaFolderInfo">
			<var name="workflowDefinition" value="Single Approver (Version 1)" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="RoleNavigator#gotoRoleType">
			<var name="roleType" value="Site" />
		</execute>

		<execute macro="Role#add">
			<var name="roleTitle" value="Staging Admin" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#definePermissionsCP">
			<var name="permissionDefinitionKeys" value="SITE_ADMIN_PAGES_SITE_PAGES_GENERAL_PERMISSIONS_ACTION_CHECKBOX,SITE_ADMIN_PAGES_SITE_PAGES_RESOURCE_PERMISSIONS_SITE_ACTION_CHECKBOX,SITE_ADMIN_PAGES_SITE_PAGES_RESOURCE_PERMISSIONS_PAGE_ACTION_CHECKBOX,SITE_ADMIN_PAGES_SITE_PAGES_RESOURCE_PERMISSIONS_PAGE_VARIATION_ACTION_CHECKBOX,SITE_ADMIN_PAGES_SITE_PAGES_RESOURCE_PERMISSIONS_SITE_PAGES_VARIATION_ACTION_CHECKBOX" />
			<var name="roleTitle" value="Staging Admin" />
			<var name="roleType" value="Site" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="RoleNavigator#gotoRoleType">
			<var name="roleType" value="Site" />
		</execute>

		<execute macro="Role#add">
			<var name="roleTitle" value="Content Creator" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#definePermissionsCP">
			<var name="permissionDefinitionKeys" value="SITE_ADMIN_CONTENT_WEB_CONTENT_GENERAL_PERMISSIONS_ACTION_CHECKBOX,SITE_ADMIN_CONTENT_WEB_CONTENT_RESOURCE_PERMISSIONS_WEB_CONTENT_ACTION_CHECKBOX,SITE_ADMIN_CONTENT_WEB_CONTENT_RESOURCE_PERMISSIONS_WEB_CONTENT_FOLDER_ACTION_CHECKBOX,SITE_ADMIN_CONTENT_WEB_CONTENT_RESOURCE_PERMISSIONS_WEB_CONTENT_ARTICLE_ACTION_CHECKBOX,SITE_ADMIN_CONTENT_WEB_CONTENT_RESOURCE_PERMISSIONS_WEB_CONTENT_FEED_ACTION_CHECKBOX,SITE_ADMIN_APPLICATIONS_WEB_CONTENT_DISPLAY_APPLICATIONS_PERMISSIONS_ACTION_CHECKBOX," />
			<var name="roleTitle" value="Content Creator" />
			<var name="roleType" value="Site" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="contentcreator@liferay.com" />
			<var name="userFirstName" value="userfncreator" />
			<var name="userLastName" value="creator" />
			<var name="userScreenName" value="contentcreator" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#editPasswordCP">
			<var name="password" value="password" />
			<var name="userEmailAddress" value="contentcreator@liferay.com" />
			<var name="userScreenName" value="contentcreator" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignUserAsMemberCP">
			<var name="userFirstName" value="userfncreator" />
			<var name="userLastName" value="creator" />
			<var name="userScreenName" value="contentcreator" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignSiteRoleCP">
			<var name="resourceName" value="userfncreator creator" />
			<var name="roleTitle" value="Content Creator" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignSiteRoleCP">
			<var name="resourceName" value="userfncreator creator" />
			<var name="roleTitle" value="Staging Admin" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="contentapprover@liferay.com" />
			<var name="userFirstName" value="userfnapprover" />
			<var name="userLastName" value="approver" />
			<var name="userScreenName" value="contentapprover" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#editPasswordCP">
			<var name="password" value="password" />
			<var name="userEmailAddress" value="contentapprover@liferay.com" />
			<var name="userScreenName" value="contentapprover" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignUserAsMemberCP">
			<var name="userFirstName" value="userfnapprover" />
			<var name="userLastName" value="approver" />
			<var name="userScreenName" value="contentapprover" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignSiteRoleCP">
			<var name="resourceName" value="userfnapprover approver" />
			<var name="roleTitle" value="Site Content Reviewer" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="contentcreator@liferay.com" />
			<var name="userLoginFullName" value="userfncreator creator" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Web Content Display" />
		</execute>

		<execute macro="WebContent#addWithWorkflowPGViaWCD">
			<var name="webContentContent" value="Web Content Content" />
			<var name="webContentTitle" value="Web Content Title" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="contentapprover@liferay.com" />
			<var name="userLoginFullName" value="userfnapprover approver" />
		</execute>

		<execute macro="Page#gotoMyAccount">
			<var name="portletName" value="My Workflow Tasks" />
		</execute>

		<execute macro="Workflow#assignToMeTaskByActions">
			<var name="workflowAssetTitle" value="Web Content Title" />
			<var name="workflowAssetType" value="Web Content Article" />
			<var name="workflowTask" value="Review" />
		</execute>

		<execute macro="Workflow#approveTaskByActions">
			<var name="workflowAssetTitle" value="Web Content Title" />
			<var name="workflowAssetType" value="Web Content Article" />
			<var name="workflowTask" value="Review" />
		</execute>

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute function="AssertElementNotPresent" locator1="Portlet#TITLE">
			<var name="key_portletName" value="Web Content Display" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="contentcreator@liferay.com" />
			<var name="userLoginFullName" value="userfncreator creator" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#submitForPublicationPageRevision" />

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="contentapprover@liferay.com" />
			<var name="userLoginFullName" value="userfnapprover approver" />
		</execute>

		<execute macro="Page#gotoMyAccount">
			<var name="portletName" value="My Workflow Tasks" />
		</execute>

		<execute macro="Workflow#assignToMeTaskByActions">
			<var name="workflowAssetTitle" value="Home" />
			<var name="workflowAssetType" value="Page Revision" />
			<var name="workflowTask" value="Review" />
		</execute>

		<execute macro="Workflow#approveTaskByActions">
			<var name="workflowAssetTitle" value="Home" />
			<var name="workflowAssetType" value="Page Revision" />
			<var name="workflowTask" value="Review" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="contentcreator@liferay.com" />
			<var name="userLoginFullName" value="userfncreator creator" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#viewStagingWorkflowStatusPG">
			<var name="stagingWorkflowStatus" value="Ready for Publication" />
		</execute>

		<execute macro="Staging#gotoPublishToLive" />

		<execute macro="Staging#publishToLive" />

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="WebContent#viewPGViaWCD">
			<var name="webContentContent" value="Web Content Content" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="contentapprover@liferay.com" />
			<var name="userLoginFullName" value="userfnapprover approver" />
		</execute>

		<execute macro="Page#gotoMyAccount">
			<var name="portletName" value="My Workflow Tasks" />
		</execute>

		<execute macro="Workflow#viewCompletedTask">
			<var name="workflowAssetTitle" value="Home" />
			<var name="workflowAssetType" value="Page Revision" />
			<var name="workflowTask" value="Review" />
		</execute>

		<execute macro="Workflow#viewCompletedTask">
			<var name="workflowAssetTitle" value="Web Content Title" />
			<var name="workflowAssetType" value="Web Content Article" />
			<var name="workflowTask" value="Review" />
		</execute>
	</command>

	<command name="StagingPublishPage" priority="5">
		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Site#addCommunityCP">
			<var name="siteName" value="Community Site Name" />
			<var name="uncheckPropagation" value="true" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#addStagingAdminRole" />

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#editPasswordCP">
			<var name="password" value="password" />
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignUserAsMemberCP">
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#assignSiteRoleCP">
			<var name="resourceName" value="userfn userln" />
			<var name="roleTitle" value="Staging Admin" />
		</execute>

		<execute macro="Navigator#openSiteURL">
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesPublishing">
			<var name="portlet" value="Staging" />
		</execute>

		<execute macro="Staging#activateStagingCP">
			<var name="pageVersioningEnabled" value="true" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="userea@liferay.com" />
			<var name="userLoginFullName" value="userfn userln" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#addSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Site Pages Variation Name 1" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#viewSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Site Pages Variation Name 1" />
		</execute>

		<execute macro="Staging#addSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Site Pages Variation Name 2" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Staging#viewSitePagesVariationPG">
			<var name="sitePagesVariationName" value="Site Pages Variation Name 2" />
		</execute>

		<execute macro="Staging#changeSitePageVariationPG">
			<var name="sitePagesVariationMenulistName" value="Main Variation" />
			<var name="sitePagesVariationName" value="Site Pages Variation Name 2" />
		</execute>

		<execute macro="Navigator#gotoStagedSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Navigation Menu" />
		</execute>

		<execute macro="Staging#markAsReadyForPublication" />

		<execute macro="ProductMenuHelper#openProductMenu" />

		<execute macro="SitePageNavigator#gotoPages">
			<var name="page" value="Public Pages" />
			<var name="site" value="Community Site Name" />
		</execute>

		<execute macro="Page#deletePG">
			<var name="pageName" value="Wiki" />
		</execute>

		<execute macro="ProductMenu#gotoSite">
			<var name="site" value="Community Site Name" />
		</execute>

		<execute macro="Navigator#gotoStagedView" />

		<execute macro="Staging#gotoPublishToLive" />

		<execute macro="Staging#configurePublishToLive">
			<var name="checkPageName" value="Home" />
		</execute>

		<execute macro="Staging#publishToLive" />

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Home" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Portlet#viewPG">
			<var name="portletName" value="Navigation Menu" />
		</execute>

		<execute macro="Navigator#gotoSitePage">
			<var name="pageName" value="Wiki" />
			<var name="siteName" value="Community Site Name" />
		</execute>

		<execute macro="Portlet#viewPG">
			<var name="portletName" value="Wiki" />
		</execute>
	</command>
</definition>