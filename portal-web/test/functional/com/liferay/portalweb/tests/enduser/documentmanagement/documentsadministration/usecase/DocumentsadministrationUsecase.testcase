<definition component-name="portal-document-management">
	<property name="custom.properties" value="default.layout.template.id=1_column" />
	<property name="testray.main.component.name" value="Documents Management" />

	<set-up>
		<execute macro="TestCase#setUpPortalInstance" />

		<execute macro="User#firstLoginPG" />
	</set-up>

	<tear-down>
		<var method="TestPropsUtil#get('test.portal.instance')" name="testPortalInstance" />

		<if>
			<equals arg1="${testPortalInstance}" arg2="true" />
			<then>
				<execute macro="PortalInstances#tearDownCP" />
			</then>
			<else>
				<execute macro="User#firstLoginPG" />

				<execute macro="DMDocument#tearDownCP" />

				<execute macro="DMFolder#tearDownCP" />

				<execute macro="DMDocumentType#tearDownCP" />

				<execute macro="DMMetadataSet#tearDownCP" />

				<execute macro="Page#tearDownPG" />

				<execute macro="User#tearDownCP" />

				<execute macro="Site#tearDownCP" />
			</else>
		</if>
	</tear-down>

	<command name="AddAndRemoveMetadataSets" priority="4">
		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMNavigator#gotoMetadataSets" />

		<execute macro="DMMetadataSet#add">
			<var name="dmMetadataSetFieldNames" value="Text Box" />
			<var name="metadataSetName" value="DM Metadata Set Name" />
		</execute>

		<execute macro="DMMetadataSet#save" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMNavigator#gotoDocumentType" />

		<execute macro="DMDocumentType#add">
			<var name="dmDocumentTypeDescription" value="DM Document Type Description" />
			<var name="dmDocumentTypeFieldNames" value="Text Box" />
			<var name="dmDocumentTypeName" value="DM Document Type Name" />
			<var name="metadataSetName" value="DM Metadata Set Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMNavigator#gotoDocumentType" />

		<execute macro="DMDocumentType#edit">
			<var name="dmDocumentTypeName" value="DM Document Type Name" />
			<var name="metadataSetName" value="DM Metadata Set Name" />
			<var name="removeMetadataSet" value="true" />
		</execute>
	</command>

	<command name="AllowMultiplePortletConfigurationsPerSite" priority="4">
		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Site#addBlankCP">
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="ProductMenu#gotoSite">
			<var name="site" value="Site Name" />
		</execute>

		<execute macro="Page#add">
			<var name="page" value="Public Pages" />
			<var name="pageName" value="Site Page 1" />
		</execute>

		<execute macro="Page#add">
			<var name="page" value="Public Pages" />
			<var name="pageName" value="Site Page 2" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Site Page 1" />
			<var name="siteName" value="Site Name" />
			<var name="siteURL" value="true" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Site Page 2" />
			<var name="siteName" value="Site Name" />
			<var name="siteURL" value="true" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Site Page 1" />
			<var name="siteName" value="Site Name" />
			<var name="siteURL" value="true" />
		</execute>

		<execute macro="DMPortlet#configureDisplaySettingsPG">
			<var name="enableDisplaySettingsRelatedAssets" value="false" />
			<var name="enableDisplaySettingsShowSearch" value="false" />
			<var name="entriesToDisplayCount" value="75" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Site Page 2" />
			<var name="siteName" value="Site Name" />
			<var name="siteURL" value="true" />
		</execute>

		<execute macro="DMPortlet#viewDefaultConfigurationDisplaySettingsPG" />
	</command>

	<command name="CheckoutAndCheckin" priority="5">
		<var name="pageName" value="Documents and Media Page" />
		<var name="portletName" value="Documents and Media" />

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#editPasswordCP">
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#assignRegRoleCP">
			<var name="roleName" value="Administrator" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesMembers">
			<var name="portlet" value="Site Memberships" />
		</execute>

		<execute macro="Site#addMemberCP">
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="Page#add">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="pageName" value="${pageName}" />
			<var name="portletName" value="${portletName}" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute function="Click" locator1="Icon#DISPLAY_STYLE_DESCRIPTIVE" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMDocument#addPG">
			<var name="dmDocumentDescription" value="DM Document Description" />
			<var name="dmDocumentFile" value="Document_1.doc" />
			<var name="dmDocumentTitle" value="Document_1.doc" />
		</execute>

		<execute macro="User#logoutPG" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute function="Click" locator1="Icon#DISPLAY_STYLE_DESCRIPTIVE" />

		<execute macro="DMDocument#viewDocumentToolbarCmdAsGuestPG">
			<var name="dmDocumentTitle" value="Document_1.doc" />
		</execute>

		<execute macro="User#loginUserPG">
			<var name="password" value="test" />
			<var name="userEmailAddress" value="userea@liferay.com" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute function="Click" locator1="Icon#DISPLAY_STYLE_DESCRIPTIVE" />

		<execute macro="DMDocument#enableActionsMenuOnPortlet" />

		<execute macro="DMDocument#checkoutPG">
			<var name="dmDocumentTitle" value="Document_1.doc" />
		</execute>

		<execute function="AssertTextEquals" locator1="DocumentsAndMediaDocument#DOCUMENT_INFO_VERSION" value1="Version PWC" />
		<execute function="AssertTextEquals" locator1="DocumentsAndMediaDocument#DOCUMENT_INFO_WORKFLOW_STATUS" value1="Draft" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<var name="tagCounter" value="1,2" />

		<for list="${tagCounter}" param="tagCount" >
			<execute macro="DMDocument#editCmdPG">
				<var name="dmDocumentTagName" value="tag${tagCount}" />
				<var name="dmDocumentTitle" value="Document_1.doc" />
			</execute>

			<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />

			<execute macro="Page#gotoPG">
				<var name="pageName" value="${pageName}" />
			</execute>
		</for>

		<execute macro="DMDocument#editPublishPG">
			<var name="dmDocumentTitle" value="Document_1.doc" />
			<var name="dmDocumentTitleEdit" value="Document1" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="test@liferay.com" />
			<var name="userLoginFullName" value="Test Test" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMDocument#editCmdPG">
			<var name="checkedOut" value="true" />
			<var name="dmDocumentTitle" value="Document_1.doc" />
			<var name="userName" value="userfn userln" />
		</execute>

		<execute macro="User#logoutAndLoginPG">
			<var name="userLoginEmailAddress" value="userea@liferay.com" />
			<var name="userLoginFullName" value="userfn userln" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<var name="key_dmDocumentTitle" value="Document_1.doc" />

		<execute function="AssertClick" locator1="DocumentsAndMedia#DESCRIPTIVE_LIST_DOCUMENT_TITLE" value1="Document1" />

		<execute function="AssertTextEquals" locator1="DocumentsAndMediaDocument#DOCUMENT_INFO_VERSION" value1="Version PWC" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMDocument#saveAndCheckinEditedDocumentPG">
			<var name="dmDocumentTitle" value="Document1" />
		</execute>

		<execute macro="DMNavigator#gotoDocumentPG">
			<var name="dmDocumentTitle" value="Document1" />
		</execute>

		<execute function="AssertTextEquals" locator1="DocumentsAndMediaDocument#DOCUMENT_INFO_VERSION" value1="Version 1.1" />
		<execute function="AssertTextEquals" locator1="DocumentsAndMediaDocument#DOCUMENT_INFO_WORKFLOW_STATUS" value1="Approved" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMDocument#checkoutPG">
			<var name="dmDocumentTitle" value="Document1" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<var name="key_dmDocumentTitle" value="Document1" />

		<execute function="AssertClick" locator1="DocumentsAndMedia#DESCRIPTIVE_LIST_DOCUMENT_TITLE" value1="Document1" />

		<execute function="AssertClick#assertTextClick" locator1="Button#EDIT" value1="Edit" />

		<while>
			<condition function="IsElementPresent" locator1="AssetCategorization#TAGS_REMOVE_ICON_GENERIC" />
			<then>
				<execute function="Click" locator1="AssetCategorization#TAGS_REMOVE_ICON_GENERIC" />
			</then>
		</while>

		<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />

		<execute function="AssertTextEquals" locator1="DocumentsAndMediaDocument#DOCUMENT_INFO_VERSION" value1="Version PWC" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMDocument#checkinPG">
			<var name="dmDocumentTitle" value="Document1" />
		</execute>

		<execute function="AssertTextEquals" locator1="DocumentsAndMediaDocument#DOCUMENT_INFO_VERSION" value1="Version 1.1" />
		<execute function="AssertTextEquals" locator1="DocumentsAndMediaDocument#DOCUMENT_INFO_WORKFLOW_STATUS" value1="Approved" />
	</command>

	<command name="Comments" priority="4">
		<var name="pageName" value="Documents and Media Page" />

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMFolder#addCP">
			<var name="dmFolderName" value="Folder1" />
		</execute>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMFolder#addCP">
			<var name="dmFolderDescription" value="Description of Folder2" />
			<var name="dmFolderName" value="Folder2" />
		</execute>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMFolder#gotoCP">
			<var name="dmFolderName" value="Folder1" />
		</execute>

		<execute macro="DMDocument#addCP">
			<var name="dmDocumentDescription" value="This is a file with zero bytes" />
			<var name="dmDocumentTitle" value="Zero Document File" />
			<var name="nullFile" value="true" />
		</execute>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMFolder#gotoCP">
			<var name="dmFolderName" value="Folder1" />
		</execute>

		<execute macro="DMNavigator#gotoDocumentCP">
			<var name="dmDocumentTitle" value="Zero Document File" />
		</execute>

		<execute macro="DMDocument#viewCP">
			<var name="dmDocumentSize" value="0" />
			<var name="dmDocumentTitle" value="Zero Document File" />
		</execute>

		<execute macro="Page#add">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute function="Click" locator1="Icon#DISPLAY_STYLE_DESCRIPTIVE" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Activities" />
		</execute>

		<var name="key_dmFolderName" value="Folder1" />

		<execute function="AssertTextEquals" locator1="DocumentsAndMedia#DESCRIPTIVE_LIST_FOLDER_TITLE" value1="Folder1" />

		<var name="key_assetName" value="Zero Document File" />

		<execute function="AssertClick" locator1="Activities#ACTIVITY_TITLE_ASSET_NAME" value1="Zero Document File" />

		<execute macro="DMDocument#viewDocumentTitleCmdPG">
			<var name="dmDocumentTitle" value="Zero Document File" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMNavigator#gotoFolderPG">
			<var name="dmFolderName" value="Folder1" />
		</execute>

		<execute macro="DMDocumentComment#addPG">
			<var name="commentBody" value="This is the first comment" />
			<var name="dmDocumentTitle" value="Zero Document File" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMNavigator#gotoFolderPG">
			<var name="dmFolderName" value="Folder1" />
		</execute>

		<execute macro="DMDocumentComment#addPG">
			<var name="commentBody" value="This is comment #2" />
			<var name="dmDocumentTitle" value="Zero Document File" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMNavigator#gotoFolderPG">
			<var name="dmFolderName" value="Folder1" />
		</execute>

		<execute macro="DMDocumentComment#viewPG">
			<var name="commentBody" value="This is the first comment" />
			<var name="dmDocumentTitle" value="Zero Document File" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMNavigator#gotoFolderPG">
			<var name="dmFolderName" value="Folder1" />
		</execute>

		<execute macro="DMDocumentComment#viewPG">
			<var name="commentBody" value="This is comment #2" />
			<var name="dmDocumentTitle" value="Zero Document File" />
		</execute>
	</command>

	<command name="ConfigureXugglerVideoPreviewSizePG" priority="3">
		<property name="custom.properties" value="xuggler.enabled=true${line.separator}dl.file.entry.preview.video.width=0${line.separator}dl.file.entry.preview.video.height=0" />

		<var name="videoGenerationTimeCounter" value="0" />
		<var name="videoGenerationTimeMaxWaitTime" value="6" />

		<execute macro="ProductMenu#gotoControlPanelConfiguration">
			<var name="portlet" value="Server Administration" />
		</execute>

		<execute macro="ServerAdministration#configureExternalServices">
			<var name="installXuggler" value="true" />
			<var name="xugglerJarFile" value="Linux 64-bit JVM (with GNU libc v6) (xuggle-xuggler-arch-x86_64-pc-linux-gnu.jar)" />
		</execute>

		<execute macro="Portlet#shutdownServer" />

		<execute macro="Portlet#startServer" />

		<execute macro="Navigator#openURL" />

		<execute macro="User#loginPG">
			<var name="password" value="test" />
			<var name="userEmailAddress" value="test@liferay.com" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelConfiguration">
			<var name="portlet" value="Server Administration" />
		</execute>

		<execute macro="ServerAdministration#configureExternalServices">
			<var name="installNativeLibraries" value="true" />
		</execute>

		<execute macro="Portlet#shutdownServer" />

		<execute macro="Portlet#startServer" />

		<execute macro="Navigator#openURL" />

		<execute macro="User#loginPG">
			<var name="password" value="test" />
			<var name="userEmailAddress" value="test@liferay.com" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelConfiguration">
			<var name="portlet" value="Server Administration" />
		</execute>

		<execute macro="ServerAdministration#configureExternalServices">
			<var name="enableXuggler" value="true" />
		</execute>

		<execute macro="Page#add">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute function="Click" locator1="Icon#DISPLAY_STYLE_DESCRIPTIVE" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="DMDocument#addPG">
			<var name="dmDocumentDescription" value="DM Document Description" />
			<var name="dmDocumentFile" value="Document_1.mp4" />
			<var name="dmDocumentTitle" value="Document_1.mp4" />
		</execute>

		<execute function="Pause" locator1="180000" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="DMNavigator#gotoDocumentPG">
			<var name="dmDocumentTitle" value="Document_1.mp4" />
		</execute>

		<execute function="Pause" locator1="30000" />

		<while>
			<and>
				<not>
					<equals arg1="${videoGenerationTimeCounter}" arg2="${videoGenerationTimeMaxWaitTime}" />
				</not>
				<condition function="IsElementPresent" locator1="Message#INFO" />
			</and>
			<then>
				<var method="MathUtil#sum('${videoGenerationTimeCounter}', '1')" name="videoGenerationTimeCounter" />

				<execute function="Pause" locator1="30000" />

				<execute macro="Page#gotoPG">
					<var name="pageName" value="Documents and Media Page" />
				</execute>

				<execute macro="DMNavigator#gotoDocumentPG">
					<var name="dmDocumentTitle" value="Document_1.mp4" />
				</execute>
			</then>
		</while>

		<var attribute="poster" locator="//video" name="videoPreviewThumbnailLink" />

		<execute function="Open" locator1="${videoPreviewThumbnailLink}" />
		<execute function="Pause" locator1="1000" />

		<var name="key_videoGenerationThumbnailResolution" value="640" />

		<execute function="AssertElementNotPresent" locator1="DocumentsAndMediaDocument#VIDEO_GENERATION_THUMBNAIL_RESOLUTION" />

		<var name="key_videoGenerationThumbnailResolution" value="360" />

		<execute function="AssertElementNotPresent" locator1="DocumentsAndMediaDocument#VIDEO_GENERATION_THUMBNAIL_RESOLUTION" />

		<var name="key_videoGenerationThumbnailResolution" value="1280" />

		<execute function="AssertElementPresent#assertElementPresent" locator1="DocumentsAndMediaDocument#VIDEO_GENERATION_THUMBNAIL_RESOLUTION" />

		<var name="key_videoGenerationThumbnailResolution" value="720" />

		<execute function="AssertElementPresent#assertElementPresent" locator1="DocumentsAndMediaDocument#VIDEO_GENERATION_THUMBNAIL_RESOLUTION" />
	</command>

	<command name="ImportDocumentWithDBStore" priority="3">
		<property name="custom.properties" value="dl.store.impl=com.liferay.portal.store.db.DBStore" />

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMDocument#addCP">
			<var name="dmDocumentDescription" value="DM Document Description" />
			<var name="dmDocumentFile" value="Document_1.jpg" />
			<var name="dmDocumentTitle" value="DM Document Title" />
		</execute>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="LAR#exportPortlet">
			<var name="larFileName" value="DM_Test_DB_Store.lar" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Site#addBlankCP">
			<var name="siteName" value="Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSite">
			<var name="site" value="Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="LAR#importPortlet">
			<var name="larFileName" value="DM_Test_DB_Store.lar" />
		</execute>

		<execute macro="ProductMenu#gotoSite">
			<var name="site" value="Site Name" />
		</execute>

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMNavigator#gotoDocumentCP">
			<var name="dmDocumentTitle" value="DM Document Title" />
		</execute>

		<execute macro="DMDocument#viewCP">
			<var name="dmDocumentTitle" value="DM Document Title" />
		</execute>
	</command>

	<command name="RemoveCurrentDisplayStyleViews" priority="4">
		<execute macro="Page#add">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="DMPortlet#configureDisplaySettingsPG">
			<var name="currentDisplayStyleViews" value="" />
		</execute>
	</command>

	<command name="SelectMultipleDocumentsAndDeleteViaActionsButton" priority="4">
		<var name="dmDocumentCounterList" value="1,2,3" />

		<execute macro="Page#add">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<for list="${dmDocumentCounterList}" param="entryCount" >
			<execute macro="DMDocument#addPG">
				<var name="dmDocumentDescription" value="DM Document Description" />
				<var name="dmDocumentFile" value="Document_${entryCount}.doc" />
				<var name="dmDocumentTitle" value="Document_${entryCount}.doc" />
			</execute>
		</for>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<for list="${dmDocumentCounterList}" param="entryCount" >
			<var name="key_dmDocumentTitle" value="Document_${entryCount}.doc" />

			<execute function="Check" locator1="DocumentsAndMedia#ICON_DOCUMENT_CHECKBOX" />
		</for>

		<execute function="Click" locator1="Icon#MOVE_TO_RECYCLE_BIN" />

		<execute function="AssertTextEquals#assertPartialText" locator1="Message#SUCCESS" value1="moved to the Recycle Bin. Undo" />

		<execute macro="DMDocument#viewDefaultCP" />
	</command>

	<command name="UpdateDocumentTypeWithPermissions" priority="3">
		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMNavigator#gotoDocumentType" />

		<execute macro="DMDocumentType#add">
			<var name="dmDocumentTypeDescription" value="Images" />
			<var name="dmDocumentTypeFieldNames" value="Text Box,Date" />
			<var name="dmDocumentTypeName" value="Photos" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelConfiguration">
			<var name="portlet" value="Server Administration" />
		</execute>

		<execute macro="ServerAdministration#executeServerResourcesActions">
			<var name="actionsDescription" value="Clean up permissions." />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#addCP">
			<var name="roleDescription" value="This is the technical writer role" />
			<var name="roleName" value="Writer" />
			<var name="roleTitle" value="Technical Writer" />
			<var name="roleType" value="Regular Role" />
		</execute>

		<execute macro="Role#definePermissionsCP">
			<var name="permissionDefinitionKeys" value="SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_GENERAL_PERMISSIONS_VIEW_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_DOCUMENT_TYPE_DELETE_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_DOCUMENT_TYPE_UPDATE_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_DOCUMENT_TYPE_VIEW_CHECKBOX" />
			<var name="roleName" value="Technical Writer" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Roles" />
		</execute>

		<execute macro="Role#definePermissionsCP">
			<var name="permissionDefinitionKeys" value="SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_GENERAL_PERMISSIONS_ACCESS_IN_SITE_ADMINISTRATION_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_GENERAL_PERMISSIONS_VIEW_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_RESOURCE_PERMISSIONS_DOCUMENTS_ADD_DOCUMENT_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_RESOURCE_PERMISSIONS_DOCUMENTS_ADD_FOLDER_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_RESOURCE_PERMISSIONS_DOCUMENTS_FOLDER_ADD_DOCUMENT_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_RESOURCE_PERMISSIONS_DOCUMENTS_FOLDER_ADD_SUBFOLDER_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_RESOURCE_PERMISSIONS_DOCUMENTS_FOLDER_UPDATE_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_RESOURCE_PERMISSIONS_DOCUMENT_DELETE_CHECKBOX,SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_RESOURCE_PERMISSIONS_DOCUMENT_UPDATE_CHECKBOX" />
			<var name="roleName" value="Site Member" />
			<var name="roleType" value="Site" />
		</execute>

		<execute macro="Role#viewPermissionCP">
			<var name="permissionDefinitionValue" value="Delete" />
			<var name="permissionNavigationValue" value="Document" />
		</execute>

		<execute macro="Role#viewPermissionCP">
			<var name="permissionDefinitionValue" value="Update" />
			<var name="permissionNavigationValue" value="Document" />
		</execute>

		<execute macro="Role#viewPermissionCP">
			<var name="permissionDefinitionValue" value="Add Document" />
			<var name="permissionNavigationValue" value="Documents" />
		</execute>

		<execute macro="Role#viewPermissionCP">
			<var name="permissionDefinitionValue" value="Add Folder" />
			<var name="permissionNavigationValue" value="Documents" />
		</execute>

		<execute macro="Role#viewPermissionCP">
			<var name="permissionDefinitionValue" value="Add Document" />
			<var name="permissionNavigationValue" value="Documents Folder" />
		</execute>

		<execute macro="Role#viewPermissionCP">
			<var name="permissionDefinitionValue" value="Add Subfolder" />
			<var name="permissionNavigationValue" value="Documents Folder" />
		</execute>

		<execute macro="Role#viewPermissionCP">
			<var name="permissionDefinitionValue" value="Update" />
			<var name="permissionNavigationValue" value="Documents Folder" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userFirstName" value="userfn" />
			<var name="userLastName" value="userln" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#editPasswordCP">
			<var name="password" value="password" />
			<var name="userEmailAddress" value="userea@liferay.com" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="Site#assignUserSitesCP">
			<var name="siteName" value="Liferay" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#assignRegularRoleCP">
			<var name="roleName" value="Technical Writer" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#unassignRegularRoleCP">
			<var name="roleName" value="Power User" />
			<var name="userScreenName" value="usersn" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="userea2@liferay.com" />
			<var name="userFirstName" value="userfn2" />
			<var name="userLastName" value="userln2" />
			<var name="userScreenName" value="usersn2" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#editPasswordCP">
			<var name="password" value="password" />
			<var name="userEmailAddress" value="userea2@liferay.com" />
			<var name="userScreenName" value="usersn2" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelUsers">
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="Site#assignUserSitesCP">
			<var name="siteName" value="Liferay" />
			<var name="userScreenName" value="usersn2" />
		</execute>

		<execute macro="Page#add">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="DMDocument#enableActionsMenuOnPortlet" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute function="Click" locator1="Icon#DISPLAY_STYLE_DESCRIPTIVE" />

		<execute macro="User#logoutPG" />

		<execute macro="User#loginUserPG">
			<var name="password" value="test" />
			<var name="userEmailAddress" value="userea@liferay.com" />
		</execute>

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMNavigator#gotoDocumentType" />

		<execute macro="DMDocumentType#edit">
			<var name="dmDocumentTypeFieldNames" value="Radio" />
			<var name="dmDocumentTypeName" value="Photos" />
		</execute>

		<execute macro="User#logoutPG" />

		<execute macro="User#loginUserPG">
			<var name="password" value="test" />
			<var name="userEmailAddress" value="userea2@liferay.com" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="DMDocument#viewCannotAddRepository" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMDocumentType#viewNoAvailableActionsViaDocumentTypesPG" />
	</command>

	<command name="ViewDocumentWithGlobalScope" priority="4">
		<execute macro="Page#add">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="Page#add">
			<var name="pageName" value="Documents and Media Page - Global" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page - Global" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="ProductMenu#gotoSite">
			<var name="site" value="Global" />
		</execute>

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMFolder#addCP">
			<var name="dmFolderDescription" value="DM Folder Description" />
			<var name="dmFolderName" value="DM Folder Name" />
		</execute>

		<execute macro="DMFolder#gotoCP">
			<var name="dmFolderName" value="DM Folder Name" />
		</execute>

		<execute macro="DMFolder#addSubfolderCP">
			<var name="dmSubFolderDescription" value="DM SubFolder Description" />
			<var name="dmSubFolderName" value="DM SubFolder Name" />
		</execute>

		<execute macro="ProductMenu#gotoSite">
			<var name="site" value="Global" />
		</execute>

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMFolder#gotoCP">
			<var name="dmFolderName" value="DM Folder Name" />
		</execute>

		<execute macro="DMFolder#gotoCP">
			<var name="dmFolderName" value="DM SubFolder Name" />
		</execute>

		<execute macro="DMDocument#addCP">
			<var name="dmDocumentDescription" value="DM Document Description" />
			<var name="dmDocumentFile" value="Document_1.txt" />
			<var name="dmDocumentSize" value="0KB" />
			<var name="dmDocumentTitle" value="DM Document Title" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page - Global" />
		</execute>

		<execute macro="DMPortlet#configureScopetoGlobalPG">
			<var name="currentScope" value="Liferay" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page - Global" />
		</execute>

		<execute macro="DMPortlet#configureRootFolderPG">
			<var name="dmFolderName" value="DM Folder Name" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page - Global" />
		</execute>

		<execute function="Click" locator1="Icon#DISPLAY_STYLE_DESCRIPTIVE" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page - Global" />
		</execute>

		<execute macro="DMNavigator#gotoFolderPG">
			<var name="dmFolderName" value="DM SubFolder Name" />
		</execute>

		<execute macro="DMDocument#viewPG">
			<var name="dmDocumentDescription" value="DM Document Description" />
			<var name="dmDocumentTitle" value="DM Document Title" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="DMPortlet#viewDefaultPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Site Templates" />
		</execute>

		<execute macro="SiteTemplates#addCP">
			<var name="siteTemplateName" value="Site Template Name" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Site Templates" />
		</execute>

		<execute macro="SiteTemplates#addSitePageViaSiteTemplateCP">
			<var name="sitePageName" value="DM Site Page Name - Global" />
			<var name="siteTemplateName" value="Site Template Name" />
		</execute>

		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Site#addSiteTemplateCP">
			<var name="siteName" value="DM Site Name" />
			<var name="siteTemplateName" value="Site Template Name" />
		</execute>

		<execute macro="ProductMenu#gotoSite">
			<var name="site" value="DM Site Name" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="DM Site Page Name - Global" />
			<var name="siteName" value="DM Site Name" />
			<var name="siteURL" value="true" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="DM Site Page Name - Global" />
			<var name="siteName" value="DM Site Name" />
			<var name="siteURL" value="true" />
		</execute>

		<execute macro="DMPortlet#configureScopetoGlobalPG">
			<var name="currentScope" value="DM Site Name" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="DM Site Page Name - Global" />
			<var name="siteName" value="DM Site Name" />
			<var name="siteURL" value="true" />
		</execute>

		<execute macro="DMPortlet#configureRootFolderPG">
			<var name="dmFolderName" value="DM Folder Name" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="DM Site Page Name - Global" />
			<var name="siteName" value="DM Site Name" />
			<var name="siteURL" value="true" />
		</execute>

		<execute macro="DMNavigator#gotoFolderPG">
			<var name="dmFolderName" value="DM SubFolder Name" />
		</execute>

		<execute macro="DMDocument#viewPG">
			<var name="dmDocumentDescription" value="DM Document Description" />
			<var name="dmDocumentTitle" value="DM Document Title" />
		</execute>
	</command>

	<command name="ViewFileCategoryAndTags" priority="4">
		<var name="categoryDescription" value="Category Description" />
		<var name="categoryName" value="Category Name" />
		<var name="dmDocumentDescription" value="Document Description" />
		<var name="dmDocumentFile" value="Document_1.doc" />
		<var name="dmDocumentTitle" value="Document Title" />
		<var name="pageName" value="Documents and Media Page" />
		<var name="tagNameList" value="tag1,tag2" />

		<execute macro="Page#add">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Categories" />
		</execute>

		<execute macro="Category#addCP">
			<var name="categoryDescription" value="${categoryDescription}" />
			<var name="categoryName" value="Category Name" />
			<var name="vocabularyName" value="Topic" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="DMDocument#enableActionsMenuOnPortlet" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute function="Click" locator1="Icon#DISPLAY_STYLE_DESCRIPTIVE" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMDocument#addPG">
			<var name="categoryName" value="${categoryName}" />
			<var name="dmDocumentDescription" value="${dmDocumentDescription}" />
			<var name="dmDocumentFile" value="${dmDocumentFile}" />
			<var name="dmDocumentTitle" value="${dmDocumentTitle}" />
			<var name="tagNameList" value="${tagNameList}" />
		</execute>

		<var name="key_dmDocumentTitle" value="${dmDocumentTitle}" />

		<execute function="Click" locator1="DocumentsAndMedia#DESCRIPTIVE_LIST_DOCUMENT_VERTICAL_ELLIPSIS" />

		<execute function="AssertClick" locator1="MenuItem#EDIT" value1="Edit" />

		<execute function="AssertClick" locator1="AssetCategorization#CATEGORIZATION_PANEL_COLLAPSED" value1="Categorization" />

		<var name="key_categoryName" value="${categoryName}" />

		<execute function="AssertTextEquals" locator1="AssetCategorization#CATEGORY" value1="${categoryName}" />

		<for list="${tagNameList}" param="tagName">
			<var name="key_tagName" value="${tagName}" />

			<execute function="AssertTextEquals" locator1="AssetCategorization#TAG" value1="${tagName}" />
		</for>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="${pageName}" />
		</execute>

		<execute macro="DMDocument#viewPG">
			<var name="categoryName" value="${categoryName}" />
			<var name="dmDocumentDescription" value="${dmDocumentDescription}" />
			<var name="dmDocumentTitle" value="${dmDocumentTitle}" />
			<var name="tagNameList" value="${tagNameList}" />
		</execute>
	</command>

	<command name="ViewPortletAfterRenamingDocumentWithDuplicateTitlePG" priority="4">
		<execute macro="Page#add">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="Portlet#addPG">
			<var name="portletName" value="Documents and Media" />
		</execute>

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute function="Click" locator1="Icon#DISPLAY_STYLE_DESCRIPTIVE" />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute macro="DMDocument#addPG">
			<var name="dmDocumentDescription" value="DM Document Description" />
			<var name="dmDocumentFile" value="Document_1.doc" />
			<var name="dmDocumentTitle" value="DM Document Title" />
		</execute>

		<execute macro="DMDocument#addPG">
			<var name="dmDocument" value="Duplicate" />
			<var name="dmDocumentDescription" value="DM Document 2 Description" />
			<var name="dmDocumentFile" value="Document_2.doc" />
			<var name="dmDocumentTitle" value="DM Document Title" />
		</execute>

		<execute function="Type" locator1="DocumentsAndMediaEditDocument#TITLE_FIELD" value1="DM Document 2 Title" />

		<execute macro="PortletEntry#publish" />

		<execute function="Pause" locator1="1000" />

		<execute function="AssertTextNotPresent" value1="Documents and Media is temporarily unavailable." />

		<execute macro="Page#gotoPG">
			<var name="pageName" value="Documents and Media Page" />
		</execute>

		<execute function="Pause" locator1="1000" />

		<execute function="AssertTextNotPresent" value1="Documents and Media is temporarily unavailable." />

		<execute macro="DMDocument#viewPG">
			<var name="dmDocumentDescription" value="DM Document 2 Description" />
			<var name="dmDocumentTitle" value="DM Document 2 Title" />
		</execute>
	</command>

	<command name="ViewSingleDocumentSelectionDoesNotCheckAllFileSelectionCP" priority="4">
		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMDocument#addCP">
			<var name="dmDocumentDescription" value="DM Document1 Description" />
			<var name="dmDocumentFile" value="Document_1.jpg" />
			<var name="dmDocumentTitle" value="DM Document1 Title" />
		</execute>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMDocument#addCP">
			<var name="dmDocumentDescription" value="DM Document2 Description" />
			<var name="dmDocumentFile" value="Document_1.jpg" />
			<var name="dmDocumentTitle" value="DM Document2 Title" />
		</execute>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Documents and Media" />
		</execute>

		<execute macro="DMDocument#checkDocumentCheckboxCP">
			<var name="dmDocumentTitle" value="DM Document1 Title" />
		</execute>

		<execute function="AssertNotChecked" locator1="DocumentsAndMedia#TOOLBAR_SELECT_ALL_CHECKBOX" />

		<execute macro="DMDocument#uncheckDocumentCheckboxCP">
			<var name="dmDocumentTitle" value="DM Document1 Title" />
		</execute>

		<execute function="AssertNotChecked" locator1="DocumentsAndMedia#TOOLBAR_SELECT_ALL_CHECKBOX" />

		<execute macro="DMDocument#checkDocumentCheckboxCP">
			<var name="dmDocumentTitle" value="DM Document1 Title" />
		</execute>

		<execute macro="DMDocument#checkDocumentCheckboxCP">
			<var name="dmDocumentTitle" value="DM Document2 Title" />
		</execute>

		<execute function="AssertChecked" locator1="Checkbox#LEXICON_SELECT_ALL" />
	</command>
</definition>