<definition>
	<var name="siteMember" value="User" />
	<var name="siteType" value="Open" />

	<command name="addAllMembersCP">
		<execute function="AssertClick" locator1="SiteMemberships#TOOLBAR_ADD_MEMBERS" value1="Add Members" />
		<execute function="AssertClick" locator1="MenuItem#USER" value1="User" />
		<execute function="Check" locator1="Checkbox#SELECT_ALL" />
		<execute function="Click" locator1="Button#SAVE" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="addBlankCP">
		<execute macro="Site#addCP">
			<var name="membershipType" value="${membershipType}" />
			<var name="parentSiteName" value="${parentSiteName}" />
			<var name="siteLimitMembership" value="${siteLimitMembership}" />
			<var name="siteName" value="${siteName}" />
			<var name="siteTemplateName" value="${siteTemplateName}" />
			<var name="siteType" value="Blank" />
			<var name="uncheckPropagation" value="${uncheckPropagation}" />
		</execute>
	</command>

	<command name="addCommunityCP">
		<execute macro="Site#addCP">
			<var name="membershipType" value="${membershipType}" />
			<var name="parentSiteName" value="${parentSiteName}" />
			<var name="siteLimitMembership" value="${siteLimitMembership}" />
			<var name="siteName" value="${siteName}" />
			<var name="siteTemplateName" value="${siteTemplateName}" />
			<var name="siteType" value="Community" />
			<var name="uncheckPropagation" value="${uncheckPropagation}" />
		</execute>
	</command>

	<command name="addCP">
		<execute function="Click" locator1="Button#PLUS" />

		<if>
			<equals arg1="${siteType}" arg2="Blank" />
			<then>
				<execute function="AssertClick" locator1="MenuItem#BLANK_SITE" value1="Blank Site" />
			</then>
			<elseif>
				<equals arg1="${siteType}" arg2="Community" />
				<then>
					<execute function="AssertClick" locator1="MenuItem#COMMUNITY_SITE" value1="Community Site" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${siteType}" arg2="Intranet" />
				<then>
					<execute function="AssertClick" locator1="MenuItem#INTRANET_SITE" value1="Intranet Site" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${siteType}" arg2="Site Template" />
				<then>
					<var name="key_siteTemplateName" value="${siteTemplateName}" />

					<execute function="Click" locator1="MenuItem#SITE_TEMPLATE_SITE" />
				</then>
			</elseif>
			<else>
				<fail message="Invalid var siteType. Must be (Blank|Community|Intranet|Site Template)." />
			</else>
		</if>

		<execute function="Type#mouseOverFocusType" locator1="TextInput#NAME" value1="${siteName}" />

		<if>
			<or>
				<equals arg1="${siteType}" arg2="Community" />
				<equals arg1="${siteType}" arg2="Site Template" />
			</or>
			<then>
				<if>
					<equals arg1="${uncheckPropagation}" arg2="true" />
					<then>
						<execute function="Uncheck" locator1="Checkbox#ENABLE_PROPAGATION" />
					</then>
				</if>
			</then>
		</if>

		<if>
			<equals arg1="${membershipType}" arg2="Private" />
			<then>
				<execute function="Select" locator1="SitesEditSite#MEMBERSHIP_TYPE" value1="Private" />
			</then>
			<elseif>
				<equals arg1="${membershipType}" arg2="Restricted" />
				<then>
					<execute function="Select" locator1="SitesEditSite#MEMBERSHIP_TYPE" value1="Restricted" />
				</then>
			</elseif>
			<else>
				<execute function="Select" locator1="SitesEditSite#MEMBERSHIP_TYPE" value1="Open" />
			</else>
		</if>

		<if>
			<isset var="parentSiteName" />
			<then>
				<execute function="AssertClick" locator1="Button#SELECT" value1="Select" />

				<var name="key_parentSiteName" value="${parentSiteName}" />

				<execute function="SelectFrame" locator1="SitesSelectSite#SELECT_SITE_IFRAME" />
				<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${parentSiteName}" />
				<execute function="KeyPress" locator1="NavBar#BASIC_SEARCH_FIELD" value1="\RETURN" />
				<execute function="AssertTextEquals" locator1="SitesSelectSite#SITES_TABLE_NAME" value1="${parentSiteName}" />
				<execute function="Click" locator1="SitesSelectSite#SITES_TABLE_CHOOSE_BUTTON" value1="Choose" />

				<var name="key_parentSiteName" value="${parentSiteName}" />

				<execute function="SelectFrame" value1="relative=top" />
				<execute function="AssertTextEquals" locator1="SitesEditSite#PARENT_SITE_TABLE_NAME" value1="${parentSiteName}" />
			</then>
		</if>

		<execute function="Click" locator1="Button#SAVE" value1="Save" />

		<execute function="AssertTextEquals" locator1="SitesEditSite#DETAILS_NAME" value1="${siteName}" />

		<if>
			<isset var="siteLimitMembership" />
			<then>
				<if>
					<equals arg1="${siteLimitMembership}" arg2="Yes" />
					<then>
						<execute function="Check" locator1="SitesEditSite#PARENT_SITE_LIMIT_MEMBERSHIP_CHECKBOX" />
					</then>
					<elseif>
						<equals arg1="${siteLimitMembership}" arg2="No" />
						<then>
							<execute function="Uncheck" locator1="SitesEditSite#PARENT_SITE_LIMIT_MEMBERSHIP_CHECKBOX" />
						</then>
					</elseif>
				</if>

				<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />
				<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
			</then>
		</if>
	</command>

	<command name="addIntranetCP">
		<execute macro="Site#addCP">
			<var name="membershipType" value="${membershipType}" />
			<var name="parentSiteName" value="${parentSiteName}" />
			<var name="siteLimitMembership" value="${siteLimitMembership}" />
			<var name="siteName" value="${siteName}" />
			<var name="siteTemplateName" value="${siteTemplateName}" />
			<var name="siteType" value="Intranet" />
			<var name="uncheckPropagation" value="${uncheckPropagation}" />
		</execute>
	</command>

	<command name="addMemberCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="AssertClick" locator1="NavBar#USERS" value1="Users" />

		<execute function="Click" locator1="Button#PLUS" />

		<if>
			<isset var="userMiddleName" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="SiteMembershipsAddMembers#USER_TABLE_NAME" value1="${userFirstName} ${userMiddleName} ${userLastName}" />
			</then>
			<else>
				<execute function="AssertTextEquals#assertPartialText" locator1="SiteMembershipsAddMembers#USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
			</else>
		</if>

		<execute function="AssertTextEquals" locator1="SiteMembershipsAddMembers#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute function="Check" locator1="SiteMembershipsAddMembers#USER_TABLE_CHECKBOX" />
		<execute function="Click" locator1="Button#SAVE" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="addMemberOrganizationCP">
		<var name="key_orgName" value="${orgName}" />

		<execute function="AssertClick" locator1="NavBar#ORGANIZATIONS" value1="Organizations" />

		<execute function="Click" locator1="Button#PLUS" />

		<execute function="AssertTextEquals" locator1="SiteMembershipsAddMembers#ORGANIZATION_TABLE_NAME" value1="${orgName}" />
		<execute function="Check" locator1="SiteMembershipsAddMembers#ORGANIZATION_TABLE_CHECKBOX" />
		<execute function="Click" locator1="Button#SAVE" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="addMemberUserGroupCP">
		<var name="key_userGroupName" value="${userGroupName}" />

		<execute function="AssertClick" locator1="NavBar#USER_GROUPS" value1="User Groups" />

		<execute function="Click" locator1="Button#PLUS" />

		<execute function="AssertTextEquals" locator1="SiteMembershipsAddMembers#USER_GROUP_TABLE_NAME" value1="${userGroupName}" />
		<execute function="Check" locator1="SiteMembershipsAddMembers#USER_GROUP_TABLE_CHECKBOX" />
		<execute function="Click" locator1="Button#SAVE" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="addSiteTemplateCP">
		<execute macro="Site#addCP">
			<var name="membershipType" value="${membershipType}" />
			<var name="parentSiteName" value="${parentSiteName}" />
			<var name="siteLimitMembership" value="${siteLimitMembership}" />
			<var name="siteName" value="${siteName}" />
			<var name="siteTemplateName" value="${siteTemplateName}" />
			<var name="siteType" value="Site Template" />
			<var name="uncheckPropagation" value="${uncheckPropagation}" />
		</execute>
	</command>

	<command name="addVirtualHostsURLCP">
		<execute function="AssertClick" locator1="NavListItem#SITE_URL" value1="Site URL" />

		<if>
			<isset var="publicVirtualHosts" />
			<then>
				<execute function="AssertTextEquals" locator1="SiteSettingsSiteURL#SITE_URL_VIRTUAL_HOSTS_PUBLIC_PAGES_LABEL" value1="Public Pages" />
				<execute function="Type" locator1="TextInput#PUBLIC_VIRTUAL_HOST_URL" value1="${publicPageVirtualHostURL}" />
			</then>
		</if>

		<if>
			<isset var="privateVirtualHosts" />
			<then>
				<execute function="AssertTextEquals" locator1="SiteSettingsSiteURL#SITE_URL_VIRTUAL_HOSTS_PRIVATE_PAGES_LABEL" value1="Private Pages" />
				<execute function="Type" locator1="TextInput#PRIVATE_VIRTUAL_HOST_URL" value1="${privatePageVirtualHostURL}" />
			</then>
		</if>

		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />

		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="approveJoinSiteRestrictedViaMySitesPG">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="AssertTextEquals" locator1="SiteMemberships#MEMBERSHIP_TYPE" value1="Membership Type: Restricted" />
		<execute function="AssertTextEquals" locator1="SiteMemberships#REQUEST_MESSAGE" value1="There are 1 membership requests pending." />

		<execute function="Click" locator1="Icon#HEADER_VERTICAL_ELLIPSIS" />

		<execute function="AssertClick" locator1="MenuItem#VIEW_MEMBERSHIP_REQUESTS" value1="View Membership Requests" />

		<execute function="SelectFrame" locator1="IFrame#DIALOG" />

		<execute function="AssertTextEquals" locator1="SiteMembershipsViewMembershipRequests#USER_NAME" value1="${userFirstName} ${userLastName} (${userEmailAddress})" />
		<execute function="AssertTextEquals" locator1="SiteMembershipsViewMembershipRequests#USER_COMMENTS" value1="Please allow me to join the Restricted Site." />

		<execute function="Click" locator1="SiteMembershipsViewMembershipRequests#REPLY" />

		<execute function="Select" locator1="SiteMembershipsViewMembershipRequests#STATUS" value1="Approve" />
		<execute function="Type" locator1="SiteMembershipsViewMembershipRequests#REPLY_COMMENTS_AREA" value1="You may join the Restricted Site." />
		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />

		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your reply will be sent to the user by email." />
		<execute function="AssertClick" locator1="SiteMembershipsViewMembershipRequests#VIEW_MEMBERSHIP_NAVIGATION_APPROVED" value1="Approved" />

		<execute function="AssertTextEquals" locator1="SiteMembershipsViewMembershipRequests#USER_NAME" value1="${userFirstName} ${userLastName} (${userEmailAddress})" />
		<execute function="AssertTextEquals" locator1="SiteMembershipsViewMembershipRequests#USER_COMMENTS" value1="Please allow me to join the Restricted Site." />
		<execute function="AssertTextEquals" locator1="SiteMembershipsViewMembershipRequests#REPLIER_NAME" value1="Test Test" />
		<execute function="AssertTextEquals" locator1="SiteMembershipsViewMembershipRequests#REPLY_COMMENTS" value1="You may join the Restricted Site." />
	</command>

	<command name="assertMemberListNotVisibleCP">
		<for list="${usersEmailsList}" param="userEmail" >
			<var method="StringUtil#replace('${userEmail}', '@liferay.com', '')" name="userName" />

			<execute macro="Site#assertMemberNotVisibleCP">
				<var name="userFirstName" value="${userName}" />
				<var name="userLastName" value="${userName}" />
				<var name="userScreenName" value="${userName}" />
			</execute>
		</for>
	</command>

	<command name="assertMemberNotVisibleCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="AssertTextNotPresent" locator1="SiteMemberships#USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
		<execute function="AssertTextNotPresent" locator1="SiteMemberships#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
	</command>

	<command name="assignDefaultSiteTeam">
		<execute function="Click" locator1="SitesEditSite#MENU_ADVANCED_DEFAULT_USER_ASSOCIATIONS" />

		<execute function="AssertClick" locator1="SiteSettingsDefaultUserAssociations#TEAMS_SELECT" value1="Select" />
		<execute function="SelectFrame" locator1="SiteSettingsDefaultUserAssociations#TEAMS_SELECT_IFRAME" />

		<var name="key_teamName" value="${teamName}" />

		<execute function="AssertClick" locator1="SiteSettingsDefaultUserAssociations#TEAMS_CHOOSE_BUTTON" value1="Choose" />
		<execute function="SelectFrame" value1="relative=top" />

		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />

		<execute function="AssertTextEquals" locator1="SiteSettingsDefaultUserAssociations#TEAMS_SELECTED" value1="${teamName}" />
	</command>

	<command name="assignRoleCP">
		<execute function="Click" locator1="Icon#HEADER_VERTICAL_ELLIPSIS" />

		<execute function="AssertClick" locator1="MenuItem#ADD_SITE_ROLES_TO_USERS" value1="Add Site Roles to Users" />

		<var name="key_roleName" value="${roleName}" />

		<execute function="SelectFrame" locator1="IFrame#DIALOG" />

		<execute function="Pause" locator1="5000" />

		<execute function="Type" locator1="TextInput#SEARCH" value1="${roleName}" />
		<execute function="AssertClick" locator1="Button#SEARCH" value1="Search" />
		<execute function="AssertTextEquals" locator1="SiteMembershipsAssignUserRoles#ROLE_TABLE_TITLE" value1="${roleName}" />
		<execute function="Click" locator1="SiteMembershipsAssignUserRoles#ROLE_TABLE_TITLE" value1="${roleName}" />

		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="AssertClick" locator1="SiteMembershipsAssignUserRoles#AVAILABLE" value1="Available" />
		<execute function="Type" locator1="TextInput#KEYWORDS" value1="${userScreenName}" />
		<execute function="AssertClick" locator1="Button#SEARCH" value1="Search" />
		<execute function="AssertTextEquals" locator1="SiteMembershipsAssignUserRoles#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute function="Check" locator1="SiteMembershipsAssignUserRoles#USER_TABLE_CHECKBOX" />
		<execute function="AssertClick" locator1="Button#UPDATE_ASSOCIATIONS" value1="Update Associations" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />

		<execute function="AssertClick" locator1="SiteMembershipsAssignUserRoles#CURRENT" value1="Current" />

		<if>
			<isset var="userMiddleName" />
			<then>
				<execute function="AssertTextEquals" locator1="SiteMembershipsAssignUserRoles#USER_TABLE_USER_NAME" value1="${userFirstName} ${userMiddleName} ${userLastName}" />
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="SiteMembershipsAssignUserRoles#USER_TABLE_USER_NAME" value1="${userFirstName} ${userLastName}" />
			</else>
		</if>

		<execute function="AssertTextEquals" locator1="SiteMembershipsAssignUserRoles#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
	</command>

	<command name="assignSiteRolesSiteOwnerUserGroupsCP">
		<var name="key_userGroupName" value="${userGroupName}" />

		<execute function="AssertClick" locator1="NavBar#USER_GROUPS" value1="User Groups" />
		<execute function="Type" locator1="TextInput#KEYWORDS" value1="${userGroupName}" />
		<execute function="AssertClick" locator1="Button#SEARCH" value1="Search" />

		<execute function="AssertTextEquals" locator1="SiteMembershipsUserGroups#USER_GROUP_TABLE_NAME" value1="${userGroupName}" />
		<execute function="Click" locator1="SiteMembershipsUserGroups#USER_GROUP_TABLE_ACTIONS" />
		<execute function="AssertClick" locator1="MenuItem#ASSIGN_SITE_ROLES" value1="Assign Site Roles" />

		<execute function="Check" locator1="Checkbox#SITE_OWNER" />
		<execute function="Click" locator1="Button#UPDATE_ASSOCIATIONS" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
		<execute function="AssertChecked" locator1="Checkbox#SITE_OWNER" />
	</command>

	<command name="assignSiteRolesUserGroupsCP">
		<execute function="Click" locator1="Icon#HEADER_VERTICAL_ELLIPSIS" />

		<execute function="AssertClick" locator1="MenuItem#ADD_SITE_ROLES_TO_USER_GROUPS" value1="Add Site Roles to User Groups" />

		<var name="key_roleName" value="${roleName}" />

		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${roleName}" />
		<execute function="Click" locator1="NavBar#BASIC_SEARCH_BUTTON" />
		<execute function="AssertTextEquals" locator1="SiteMembershipsAssignUserRoles#ROLE_TABLE_TITLE" value1="${roleName}" />
		<execute function="Click" locator1="SiteMembershipsAssignUserRoles#ROLE_TABLE_TITLE" value1="${roleName}" />

		<var name="key_userGroupName" value="${userGroupName}" />

		<execute function="Click" locator1="SiteMembershipsUserGroups#AVAILABLE" />
		<execute function="AssertTextEquals" locator1="SiteMembershipsUserGroups#USER_GROUP_TABLE_USER_NAME" value1="${userGroupName}" />
		<execute function="Check" locator1="SiteMembershipsUserGroups#USER_GROUP_TABLE_CHECKBOX" />
		<execute function="Click" locator1="Button#UPDATE_ASSOCIATIONS" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />

		<execute function="Click" locator1="SiteMembershipsUserGroups#CURRENT" />
		<execute function="AssertTextEquals" locator1="SiteMembershipsUserGroups#USER_GROUP_TABLE_USER_NAME" value1="${userGroupName}" />
	</command>

	<command name="assignUserSitesCP">
		<execute function="AssertClick" locator1="NavTab#ALL_USERS" value1="All Users" />

		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${userScreenName}" />
		<execute function="AssertClick" locator1="NavBar#BASIC_SEARCH_BUTTON" value1="Search" />
		<execute function="AssertTextEquals" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute function="AssertClick" locator1="UsersAndOrganizations#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute function="AssertClick" locator1="UsersAndOrganizationsEditUser#SITES_TAB" value1="Sites" />
		<execute function="AssertClick" locator1="UsersAndOrganizationsEditUser#SITES_SELECT_LINK" value1="Select" />
		<execute function="SelectFrame" locator1="CPUsersandorganizationsUser#SITES_SELECT_IFRAME" />

		<var name="key_siteName" value="${siteName}" />

		<execute function="Type" locator1="CPUsersandorganizationsUser#SITES_SELECT_SEARCH_FIELD" value1="${siteName}" />
		<execute function="KeyPress" locator1="CPUsersandorganizationsUser#SITES_SELECT_SEARCH_FIELD" value1="\RETURN" />
		<execute function="AssertTextEquals" locator1="CPUsersandorganizationsUser#SITES_SELECT_TABLE_NAME" value1="${siteName}" />
		<execute function="AssertClick" locator1="CPUsersandorganizationsUser#SITES_SELECT_CHOOSE_BUTTON" value1="Choose" />
		<execute function="SelectFrame" value1="relative=top" />
		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="configureCurrentLanguagesCP">
		<var name="key_displaySettings" value="${displaySettings}" />

		<if>
			<condition function="IsElementPresent" locator1="SitesEditSite#MENU_MISCELLANEOUS_DISPLAY_SETTINGS" value1="Display Settings" />
			<then>
				<execute function="AssertClick" locator1="SitesEditSite#MENU_MISCELLANEOUS_DISPLAY_SETTINGS" value1="Display Settings" />
			</then>
			<else>
				<execute function="AssertClick" locator1="SitesEditSite#MENU_MISCELLANEOUS_DISPLAY_SETTINGS_LOCALIZED" value1="${displaySettings}" />
			</else>
		</if>

		<execute function="Check" locator1="SiteSettingsDisplaySettings#DEFINE_DEFAULT_AND_AVAILABLE_SITE_LANGUAGES_RADIO" />

		<if>
			<isset var="currentSiteLanguages" />
			<then>
				<while>
					<condition function="IsElementPresent" locator1="SiteSettingsDisplaySettings#AVAILABLE_LANGUAGES_CURRENT_PRESENT" />
					<then>
						<execute function="Click" locator1="SiteSettingsDisplaySettings#AVAILABLE_LANGUAGES_CURRENT_PRESENT" />
						<execute function="Click" locator1="SiteSettingsDisplaySettings#MOVE_CURRENT_TO_AVAILABLE_BUTTON" />
					</then>
				</while>

				<for list="${currentSiteLanguages}" param="currentSiteLanguage">
					<var name="currentSiteLanguage" value="${currentSiteLanguage}" />

					<execute function="Select" locator1="SiteSettingsDisplaySettings#AVAILABLE_LANGUAGES_AVAILABLE_SELECT" value1="${currentSiteLanguage}" />
					<execute function="Click" locator1="SiteSettingsDisplaySettings#MOVE_AVAILABLE_TO_CURRENT_BUTTON" />
					<execute function="AssertTextEquals#assertPartialText" locator1="SiteSettingsDisplaySettings#AVAILABLE_LANGUAGES_CURRENT_SELECT" value1="${currentSiteLanguage}" />
				</for>
			</then>
		</if>

		<if>
			<isset var="defaultSiteLanguage" />
			<then>
				<var name="defaultSiteLanguage" value="${defaultSiteLanguage}" />

				<execute function="Select" locator1="SiteSettingsDisplaySettings#DEFAULT_LANGUAGE_SELECT" value1="${defaultSiteLanguage}" />
			</then>
		</if>

		<execute function="Click" locator1="Button#SAVE" />

		<if>
			<isset var="localizedSuccessMessage" />
			<then>
				<var name="localizedSuccessMessage" value="${localizedSuccessMessage}" />

				<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="${localizedSuccessMessage}" />
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
			</else>
		</if>
	</command>

	<command name="deactivateCP">
		<var name="key_siteName" value="${siteName}" />

		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${siteName}" />
		<execute function="Click" locator1="Icon#BASIC_SEARCH" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_NAME" value1="${siteName}" />
		<execute function="Click" locator1="Sites#SITE_TABLE_ACTIONS" />
		<execute function="AssertClickNoError" locator1="MenuItem#DEACTIVATE" value1="Deactivate" />
		<execute function="Confirm" value1="Are you sure you want to deactivate this?" />

		<if>
			<equals arg1="${successMessage}" arg2="true" />
			<then>
				<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="Message#ERROR_1" value1="Your request failed to complete." />
				<execute function="AssertTextEquals" locator1="Message#ERROR_2" value1="The site cannot be deleted or deactivated because you are accessing the site." />
			</else>
		</if>
	</command>

	<command name="deleteCP">
		<var name="key_siteName" value="${siteName}" />

		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="Name" />
		<execute function="Click" locator1="Icon#BASIC_SEARCH" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_NAME" value1="${siteName}" />
		<execute function="Click" locator1="Sites#SITE_TABLE_ACTIONS" />
		<execute function="AssertClickNoError" locator1="MenuItem#DELETE" value1="Delete" />
		<execute function="Confirm" value1="Are you sure you want to delete this? It will be deleted immediately." />

		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
		<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="No sites were found." />
		<execute function="AssertTextNotPresent" value1="${siteName}" />
	</command>

	<command name="editCP">
		<execute function="AssertTextEquals" locator1="TextInput#NAME" value1="${siteName}" />
		<execute function="Type" locator1="TextInput#NAME" value1="${siteNameEdit}" />
		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />

		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
		<execute function="AssertTextEquals" locator1="TextInput#NAME" value1="${siteNameEdit}" />
	</command>

	<command name="editFriendlyURLCP">
		<execute function="AssertClick" locator1="NavListItem#SITE_URL" value1="Site URL" />
		<execute function="AssertTextEquals" locator1="SiteSettingsSiteURL#SITE_URL_FRIENDLY_URL_LABEL" value1="Friendly URL" />

		<execute function="Pause" locator1="5000" />

		<execute function="Type#mouseOverFocusType" locator1="TextInput#FRIENDLY_URL" value1="${siteFriendlyURLEdit}" />
		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />

		<if>
			<equals arg1="${friendlyURLInvalid}" arg2="true" />
			<then>
				<execute function="AssertTextEquals" locator1="Message#ERROR" value1="Your request failed to complete." />
				<execute function="AssertTextEquals" locator1="Message#ERROR_2" value1="The friendly URL has too many slashes." />
				<execute function="AssertTextEquals" locator1="TextInput#FRIENDLY_URL" value1="${siteFriendlyURLEdit}" />
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
			</else>
		</if>
	</command>

	<command name="editGoogleAnalyticsIDCP">
		<execute function="AssertClick" locator1="SitesEditSite#MENU_ADVANCED_ANALYTICS" value1="Analytics" />

		<execute function="Type" locator1="TextInput#GOOGLE_ANALYTICS_ID" value1="${googleAnalyticsID}" />

		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="enableRecycleBinCP">
		<execute function="AssertClick" locator1="NavListItem#RECYCLE_BIN" value1="Recycle Bin" />

		<execute function="Check" locator1="Checkbox#ENABLE_RECYCLE_BIN" />

		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="exportSite">
		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertClick#assertPartialTextClickAt" locator1="Sites#SITE_TABLE_NAME" value1="${siteName}" />

		<execute function="AssertClick" locator1="SitePages#TOOLBAR_EXPORT" value1="Export" />

		<execute function="SelectFrame" locator1="SitesExport#EXPORT_IFRAME" />
		<execute function="Type" locator1="SitesImport#EXPORT_FILE_NAME" value1="${fileName}" />
		<execute function="AssertClick" locator1="SitesExport#EXPORT_BUTTON" value1="Export" />
		<execute function="Pause" locator1="5000" />
		<execute function="AssertClick" locator1="SitesExport#DOWNLOAD_FILE" value1="${fileDownload}" />
	</command>

	<command name="gotoManageSitesTemplatesViaAddDropdown">
		<execute function="Click" locator1="Button#PLUS" />
		<execute function="AssertClick" locator1="MenuItem#MANAGE_SITES_TEMPLATES" value1="Manage Sites Templates" />
	</command>

	<command name="gotoSiteViaMySitesPG">
		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertClick" locator1="MySites#SITE_TABLE_SITE_NAME" value1="${siteName}" />
	</command>

	<command name="importSite">
		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertClick#assertPartialTextClickAt" locator1="Sites#SITE_TABLE_NAME" value1="${siteName}" />

		<execute function="AssertClick" locator1="SitePages#TOOLBAR_IMPORT" value1="Import" />

		<execute function="SelectFrame" locator1="SitesImport#IMPORT_IFRAME" />
		<execute function="AssertClick" locator1="SitesImport#SELECT_FILE" value1="Select File" />

		<execute function="SikuliClick" locator1="OS#FILE_DIALOG_BOX_TYPE_FILE_NAME_ICON_PNG" />
		<execute function="SikuliType" locator1="OS#FILE_DIALOG_BOX_FILE_NAME_FIELD_PNG" value1="${larFileName}" />
		<execute function="SikuliClick" locator1="OS#FILE_DIALOG_BOX_TEST_LAR_FILE_ICON_PNG" />
		<execute function="SikuliClick" locator1="OS#FILE_DIALOG_BOX_OPEN_BUTTON_PNG" />

		<execute function="AssertClick" locator1="SitesImport#IMPORT_CONTINUE" value1="Continue" />
		<execute function="AssertClick" locator1="SitesImport#IMPORT_CONTINUE_2" value1="Continue" />
		<execute function="AssertClick" locator1="SitesImport#IMPORT" value1="Import" />
		<execute function="Pause" locator1="2000" />
	</command>

	<command name="inactivateCP">
		<execute function="AssertTextEquals" locator1="TextInput#NAME" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="SitesEditSite#ACTIVE_LABEL" value1="Active" />
		<execute function="Uncheck" locator1="Checkbox#ACTIVE" />
		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="joinViaMySitesPG">
		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertTextEquals" locator1="Message#INFO" value1="No sites were found." />
		<execute function="AssertClick" locator1="MySites#NAVIGATION_AVAILABLE_SITES" value1="Available Sites" />

		<execute function="Pause" locator1="3000" />

		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${siteName}" />
		<execute function="AssertClick" locator1="NavBar#BASIC_SEARCH_BUTTON" value1="Search" />

		<if>
			<equals arg1="${membershipType}" arg2="Private" />
			<then>
				<execute function="AssertTextEquals" locator1="Message#INFO" value1="No sites were found." />
			</then>
			<elseif>
				<equals arg1="${membershipType}" arg2="Restricted" />
				<then>
					<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME" value1="${siteName}" />
					<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME_MEMBERS" value1="1" />
					<execute function="AssertClick" locator1="MySitesAvailableSites#SITE_TABLE_REQUEST_MEMBERSHIP" value1="Request Membership" />
					<execute function="Type" locator1="TextArea#COMMENTS" value1="Please allow me to join the Restricted Site." />
					<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />

					<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
					<execute function="AssertTextEquals" locator1="Message#SUCCESS_1" value1="Your request was sent. You will receive a reply by email." />
					<execute function="AssertTextEquals" locator1="MySitesAvailableSites#SITE_TABLE_MEMBERSHIP_REQUESTED" value1="Membership Requested" />
				</then>
			</elseif>
			<else>
				<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME" value1="${siteName}" />
				<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME_MEMBERS" value1="1" />
				<execute function="AssertClick" locator1="MySitesAvailableSites#SITE_TABLE_JOIN_SITE_NAME" value1="Join" />
				<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
				<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME" value1="${siteName}" />
				<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME_MEMBERS" value1="2" />
				<execute function="AssertTextEquals" locator1="MySitesAvailableSites#SITE_TABLE_LEAVE_SITE_NAME" value1="Leave" />
			</else>
		</if>
	</command>

	<command name="leaveViaMySitesPG">
		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME_MEMBERS" value1="2" />
		<execute function="AssertClick" locator1="MySites#NAVIGATION_AVAILABLE_SITES" value1="Available Sites" />
		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${siteName}" />
		<execute function="AssertClick" locator1="NavBar#BASIC_SEARCH_BUTTON" value1="Search" />
		<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME_MEMBERS" value1="2" />
		<execute function="AssertClick" locator1="MySitesAvailableSites#SITE_TABLE_LEAVE_SITE_NAME" value1="Leave" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
		<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME_MEMBERS" value1="1" />
		<execute function="AssertTextEquals" locator1="MySitesAvailableSites#SITE_TABLE_JOIN_SITE_NAME" value1="Join" />
	</command>

	<command name="manageMembershipOptions">
		<execute macro="Page#gotoConfigurationCP">
			<var name="portletName" value="Site Settings" />
		</execute>

		<if>
			<equals arg1="${selectMembershipType}" arg2="true" />
			<then>
				<execute function="AssertTextEquals" locator1="SitesEditSite#MEMBERSHIP_OPTIONS_MEMBERSHIP_TYPE_LABEL" value1="Membership Type" />
				<execute function="Select" locator1="SitesEditSite#MEMBERSHIP_OPTIONS_MEMBERSHIP_TYPE" value1="${membershipType}" />
			</then>
		</if>

		<if>
			<equals arg1="${allowManualMembershipManagement}" arg2="true" />
			<then>
				<execute function="Check" locator1="Checkbox#ALLOW_MANUAL_MEMBERSHIP_MANAGEMENT" />
			</then>
			<elseif>
				<equals arg1="${allowManualMembershipManagement}" arg2="false" />
				<then>
					<execute function="Uncheck" locator1="Checkbox#ALLOW_MANUAL_MEMBERSHIP_MANAGEMENT" />
				</then>
			</elseif>
		</if>

		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="removeMemberCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="Type" locator1="TextInput#SEARCH" value1="${userScreenName}" />
		<execute function="Click" locator1="Icon#BASIC_SEARCH" />

		<if>
			<isset var="userMiddleName" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="SiteMemberships#USER_TABLE_NAME" value1="${userFirstName} ${userMiddleName} ${userLastName}" />
			</then>
			<else>
				<execute function="AssertTextEquals#assertPartialText" locator1="SiteMemberships#USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
			</else>
		</if>

		<execute function="AssertTextEquals" locator1="SiteMemberships#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute function="Click" locator1="SiteMemberships#USER_TABLE_ACTIONS" />
		<execute function="AssertClick" locator1="MenuItem#REMOVE_MEMBERSHIP" value1="Remove Membership" />

		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="removeSiteRolesSiteOwnerUserGroupsCP">
		<var name="key_userGroupName" value="${userGroupName}" />

		<execute function="AssertClick" locator1="NavBar#USER_GROUPS" value1="User Groups" />
		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${userGroupName}" />
		<execute function="AssertClick" locator1="NavBar#BASIC_SEARCH_BUTTON" value1="Search" />

		<execute function="AssertTextEquals" locator1="SiteMembershipsUserGroups#USER_GROUP_TABLE_NAME" value1="${userGroupName}" />
		<execute function="Click" locator1="SiteMembershipsUserGroups#USER_GROUP_TABLE_ACTIONS" />
		<execute function="AssertClick" locator1="MenuItem#ASSIGN_SITE_ROLES" value1="Assign Site Roles" />

		<execute function="Uncheck" locator1="Checkbox#SITE_OWNER" />
		<execute function="Click" locator1="Button#UPDATE_ASSOCIATIONS" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
		<execute function="AssertNotChecked" locator1="Checkbox#SITE_OWNER" />
	</command>

	<command name="searchCP">
		<var name="key_siteName" value="${siteName}" />

		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${siteName}" />
		<execute function="Click" locator1="Icon#BASIC_SEARCH" />
		<execute function="AssertElementPresent" locator1="Sites#SITE_TABLE_CHECKBOX" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_NAME" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_TYPE" value1="${siteType}" />

		<if>
			<equals arg1="${siteMember}" arg2="Organization" />
			<then>
				<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_MEMBERS_ORGS" value1="1 ${siteMember}" />
			</then>
			<elseif>
				<equals arg1="${siteMember}" arg2="User" />
				<then>
					<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_MEMBERS_USERS" value1="1 ${siteMember}" />
				</then>
			</elseif>
			<else>
				<fail message="Invalid var siteMember. Must be (Organization|User)." />
			</else>
		</if>

		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_ACTIVE" value1="Yes" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_TAGS" value1="" />
		<execute function="AssertVisible" locator1="Sites#SITE_TABLE_ACTIONS" />
	</command>

	<command name="searchMemberCP">
		<if>
			<isset var="userScreenNameSearchValue" />
			<then>
				<execute function="Type" locator1="TextInput#SEARCH" value1="${userScreenNameSearchValue}" />
			</then>
			<elseif>
				<isset var="userFirstNameSearchValue" />
				<then>
					<execute function="Type" locator1="TextInput#SEARCH" value1="${userFirstNameSearchValue}" />
				</then>
			</elseif>
			<elseif>
				<isset var="userLastNameSearchValue" />
				<then>
					<execute function="Type" locator1="TextInput#SEARCH" value1="${userLastNameSearchValue}" />
				</then>
			</elseif>
			<else>
				<execute function="Type" locator1="TextInput#SEARCH" value1="${userEmailAddressSearchValue}" />
			</else>
		</if>

		<execute function="AssertClick" locator1="Button#SEARCH" value1="Search" />

		<execute macro="Site#viewMemberCP">
			<var name="userFirstName" value="${userFirstName}" />
			<var name="userLastName" value="${userLastName}" />
			<var name="userScreenName" value="${userScreenName}" />
		</execute>

		<execute function="AssertClick" locator1="NavBar#SUMMARY" value1="Summary" />
	</command>

	<command name="selectPageType">
		<execute function="AssertTextEquals" locator1="SitesEditSite#PAGES_LABEL" value1="Pages" />

		<if>
			<equals arg1="${selectPublicPages}" arg2="true" />
			<then>
				<execute function="AssertClick" locator1="SitesEditSite#PAGES_PUBLIC_PAGES_LABEL" value1="Public Pages" />
				<execute function="Select" locator1="SitesEditSite#PAGES_PUBLIC_PAGES_SITE_TEMPLATE_SELECT" value1="${siteTemplate}" />
			</then>
			<elseif>
				<equals arg1="${selectPrivatePages}" arg2="true" />
				<then>
					<execute function="AssertClick" locator1="SitesEditSite#PAGES_PRIVATE_PAGES_LABEL" value1="Private Pages" />
					<execute function="Select" locator1="SitesEditSite#PAGES_PRIVATE_PAGES_SITE_TEMPLATE_SELECT" value1="${siteTemplate}" />
				</then>
			</elseif>
		</if>

		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="selectParentSite">
		<execute function="AssertClick" locator1="SitesEditSite#PARENT_SITE_SELECT" value1="Select" />

		<var name="key_parentSiteName" value="${parentSiteName}" />

		<execute function="SelectFrame" locator1="SitesSelectSite#SELECT_SITE_IFRAME" />
		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${parentSiteName}" />
		<execute function="Click" locator1="Icon#BASIC_SEARCH" />

		<if>
			<equals arg1="${chooseButtonAvailable}" arg2="false" />
			<then>
				<execute function="AssertTextNotPresent" locator1="SitesSelectSite#SITES_TABLE_NAME" value1="${parentSiteName}" />
				<execute function="AssertTextNotPresent" locator1="SitesSelectSite#SITES_TABLE_CHOOSE_BUTTON" value1="Choose" />
				<execute function="AssertTextEquals" locator1="Message#INFO" value1="No sites were found." />
			</then>
		</if>

		<execute function="Close" locator1="null" />
		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="tearDownCP">
		<execute macro="Page#gotoCP">
			<var name="portletName" value="Sites" />
		</execute>

		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="Name" />
		<execute function="Click" locator1="Icon#BASIC_SEARCH" />

		<if>
			<condition function="IsElementNotPresent" locator1="Message#EMPTY_INFO" />
			<then>
				<execute function="Check#checkAll" locator1="Checkbox#SELECT_ALL" />
				<execute function="ClickNoError" locator1="Icon#DELETE" value1="Delete" />
				<execute function="Confirm" value1="Are you sure you want to delete this? It will be deleted immediately." />
				<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
			</then>
		</if>
	</command>

	<command name="viewCannotAdd">
		<execute function="Click" locator1="Button#PLUS" />
		<execute function="AssertClick" locator1="MenuItem#BLANK_SITE" value1="Blank Site" />
		<execute function="Type" locator1="TextInput#NAME" value1="${siteName}" />
		<execute function="Click" locator1="Button#SAVE" value1="Save" />

		<if>
			<equals arg1="${siteNameInvalid}" arg2="Duplicate" />
			<then>
				<execute function="AssertTextEquals" locator1="Message#ERROR_1" value1="Your request failed to complete." />
				<execute function="AssertTextEquals" locator1="Message#ERROR_2" value1="Please enter a unique name." />
			</then>
			<elseif>
				<equals arg1="${siteNameInvalid}" arg2="Null" />
				<then>
					<execute function="AssertTextEquals" locator1="Message#REQUIRED_INFO" value1="This field is required." />
				</then>
			</elseif>
			<else>
				<execute function="AssertTextEquals" locator1="Message#ERROR_1" value1="Your request failed to complete." />
				<execute function="AssertTextEquals" locator1="Message#ERROR_2" value1="The Site Name cannot be blank, numeric or a reserved word such as null. The Site Name cannot contain the following invalid characters: *." />
			</else>
		</if>
	</command>

	<command name="viewChildChildCP">
		<var name="key_childSiteName" value="${childSiteName}" />

		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_NAME" value1="${childSiteName}" />
		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_TYPE" value1="${siteType}" />
		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_ACTIVE" value1="Yes" />
		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_TAGS" value1="" />
		<execute function="AssertElementPresent" locator1="SitesChildSite#SITE_TABLE_ACTIONS" />
		<execute function="AssertClick" locator1="SitesChildSite#SITE_TABLE_CHILD_SITE" value1="This site has 1 child site." />

		<var name="key_childChildSiteName" value="${childChildSiteName}" />
		<var name="key_childSiteName" value="${childSiteName}" />

		<var method="StringUtil#upperCase('${childSiteName}')" name="childSiteNameUppercase" />

		<execute function="AssertTextEquals" locator1="SitesChildSiteChildSite#SITE_NAME" value1="${childSiteNameUppercase}" />
		<execute function="AssertTextEquals" locator1="SitesChildSiteChildSite#SITE_TABLE_NAME" value1="${childChildSiteName}" />
		<execute function="AssertTextEquals" locator1="SitesChildSiteChildSite#SITE_TABLE_TYPE" value1="${siteType}" />
		<execute function="AssertTextEquals" locator1="SitesChildSiteChildSite#SITE_TABLE_MEMBERS_USERS" value1="1 User" />
		<execute function="AssertTextEquals" locator1="SitesChildSiteChildSite#SITE_TABLE_ACTIVE" value1="Yes" />
		<execute function="AssertTextEquals" locator1="SitesChildSiteChildSite#SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute function="AssertTextEquals" locator1="SitesChildSiteChildSite#SITE_TABLE_TAGS" value1="" />
		<execute function="AssertVisible" locator1="SitesChildSiteChildSite#SITE_TABLE_ACTIONS" />
	</command>

	<command name="viewChildCP">
		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_NAME" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_TYPE" value1="${siteType}" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_ACTIVE" value1="Yes" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_TAGS" value1="" />
		<execute function="AssertVisible" locator1="Sites#SITE_TABLE_ACTIONS" />
		<execute function="AssertClick#pauseAssertTextClickAt" locator1="Sites#SITE_TABLE_CHILD_SITE" value1="This site has 1 child site." />

		<var name="key_childSiteName" value="${childSiteName}" />
		<var name="key_siteName" value="${siteName}" />

		<var method="StringUtil#upperCase('${siteName}')" name="siteNameUppercase" />

		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_NAME" value1="${siteNameUppercase}" />
		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_NAME" value1="${childSiteName}" />
		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_TYPE" value1="${siteType}" />
		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_MEMBERS_USERS" value1="1 User" />
		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_ACTIVE" value1="Yes" />
		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute function="AssertTextEquals" locator1="SitesChildSite#SITE_TABLE_TAGS" value1="" />
		<execute function="AssertElementPresent" locator1="SitesChildSite#SITE_TABLE_ACTIONS" />
	</command>

	<command name="viewCP">
		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertElementPresent" locator1="Sites#SITE_TABLE_CHECKBOX" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_NAME" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_TYPE" value1="${siteType}" />

		<if>
			<equals arg1="${siteMember}" arg2="Organization" />
			<then>
				<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_MEMBERS_ORGS" value1="1 ${siteMember}" />
			</then>
			<elseif>
				<equals arg1="${siteMember}" arg2="User" />
				<then>
					<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_MEMBERS_USERS" value1="1 ${siteMember}" />
				</then>
			</elseif>
			<else>
				<fail message="Invalid var siteMember. Must be (Organization|User)." />
			</else>
		</if>

		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_ACTIVE" value1="Yes" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute function="AssertTextEquals" locator1="Sites#SITE_TABLE_TAGS" value1="" />
		<execute function="AssertElementPresent" locator1="Sites#SITE_TABLE_ACTIONS" />
	</command>

	<command name="viewCurrentLanguagesCP">
		<var name="key_displaySettings" value="${displaySettings}" />

		<execute function="AssertClick" locator1="SitesEditSite#MENU_MISCELLANEOUS_DISPLAY_SETTINGS_LOCALIZED" value1="${displaySettings}" />

		<execute function="Check" locator1="SiteSettingsDisplaySettings#DEFINE_DEFAULT_AND_AVAILABLE_SITE_LANGUAGES_RADIO" value1="Display Settings" />

		<for list="${currentSiteLanguages}" param="currentSiteLanguage">
			<var name="currentSiteLanguage" value="${currentSiteLanguage}" />

			<execute function="AssertTextEquals#assertPartialText" locator1="SiteSettingsDisplaySettings#AVAILABLE_LANGUAGES_CURRENT_SELECT" value1="${currentSiteLanguage}" />
		</for>

		<for list="${availableSiteLanguages}" param="availableSiteLanguage">
			<var name="availableSiteLanguage" value="${availableSiteLanguage}" />

			<execute function="AssertTextEquals#assertPartialText" locator1="SiteSettingsDisplaySettings#AVAILABLE_LANGUAGES_AVAILABLE_SELECT" value1="${availableSiteLanguage}" />
		</for>

		<if>
			<isset var="defaultSiteLanguage" />
			<then>
				<var name="defaultSiteLanguage" value="${defaultSiteLanguage}" />

				<execute function="Select" locator1="SiteSettingsDisplaySettings#DEFAULT_LANGUAGE_SELECT" value1="${defaultSiteLanguage}" />
			</then>
		</if>
	</command>

	<command name="viewDefaultThemePG">
		<execute function="AssertElementNotPresent" locator1="Home#DARK_THEME" />
		<execute function="AssertElementPresent" locator1="Home#DEFAULT_THEME" />
	</command>

	<command name="viewGlobalLandingDefault">
		<var name="key_portletName" value="${portletName}" />
		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertElementPresent" locator1="ProductMenu#PRODUCT_MENU_PANEL_SITE_ADMINISTRATION_SITE_NAME" value1="${siteName}" />
		<execute function="AssertTextNotPresent" value1="You do not have the roles required to access this portlet" />
		<execute function="AssertTextEquals" locator1="ProductMenu#PRODUCT_MENU_PANEL_MENU_ITEM" value1="${portletName}" />
	</command>

	<command name="viewLimitMembershipParentSiteCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="AssertClick" locator1="SiteMemberships#TOOLBAR_ADD_MEMBERS" value1="Add Members" />
		<execute function="AssertClick" locator1="MenuItem#USER" value1="User" />
		<execute function="AssertTextNotPresent" locator1="SiteMembershipsAddMembers#USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
		<execute function="AssertTextNotPresent" locator1="SiteMembershipsAddMembers#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
	</command>

	<command name="viewMemberCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute function="AssertTextEquals#assertPartialText" locator1="SiteMemberships#USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
		<execute function="AssertTextEquals" locator1="SiteMemberships#USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute function="AssertVisible" locator1="SiteMemberships#USER_TABLE_ACTIONS" />
	</command>

	<command name="viewMemberListCP">
		<for list="${usersEmailsList}" param="userEmail" >
			<var method="StringUtil#replace('${userEmail}', '@liferay.com', '')" name="userName" />

			<execute macro="Site#viewMemberCP">
				<var name="userFirstName" value="${userName}" />
				<var name="userLastName" value="${userName}" />
				<var name="userScreenName" value="${userName}" />
			</execute>
		</for>
	</command>

	<command name="viewMemberOrganizationCP">
		<var name="key_orgName" value="${orgName}" />

		<execute function="AssertClick" locator1="NavBar#ORGANIZATIONS" value1="Organizations" />

		<execute function="AssertTextEquals#assertPartialText" locator1="SiteMemberships#ORGANIZATION_TABLE_NAME" value1="${orgName}" />
		<if>
			<equals arg1="${toolTip}" arg2="true" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="SiteMemberships#ORGANIZATION_TABLE_TOOLTIP" value1="This site belongs to ${orgName} which is an organization" />
			</then>
		</if>
	</command>

	<command name="viewMySitesViaMySitesPG">
		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertTextEquals" locator1="MySites#NAVIGATION_MY_SITES" value1="My Sites" />
		<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="MySites#SITE_TABLE_SITE_NAME_MEMBERS" value1="${memberCount}" />
		<execute function="AssertElementPresent" locator1="MySites#SITE_TABLE_SITE_ACTIONS" />
	</command>

	<command name="viewNoMySitesViaMySitesPG">
		<var name="key_siteName" value="${siteName}" />

		<execute function="AssertElementNotPresent" locator1="MySites#SITE_TABLE_SITE_NAME" />
		<execute function="AssertElementNotPresent" locator1="MySites#SITE_TABLE_SITE_NAME_MEMBERS" />
		<execute function="AssertElementNotPresent" locator1="MySites#SITE_TABLE_SITE_ACTIONS" />
	</command>

	<command name="viewPrivateVirtaulHostUrlUserLoginRedirect">
		<execute function="AssertTextEquals" locator1="TextInput#EMAIL_ADDRESS" value1="${userEmailAddress}" />
		<execute function="AssertElementPresent" locator1="TextInput#PASSWORD" />
	</command>

	<command name="viewSiteAdminPermissionsCP">
		<var name="key_siteName" value="${siteName}" />

		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${siteName}" />
		<execute function="Click" locator1="Button#SUBMIT" />
		<execute function="Click" locator1="Sites#SITE_TABLE_ACTIONS" />
		<execute function="AssertTextEquals" locator1="MenuItem#SITE_ADMINISTRATION" value1="Site Administration" />
		<execute function="AssertTextEquals" locator1="MenuItem#ADD_CHILD_SITE" value1="Add Child Site" />
		<execute function="AssertTextEquals" locator1="MenuItem#LEAVE" value1="Leave" />
		<execute function="AssertTextEquals" locator1="MenuItem#DEACTIVATE" value1="Deactivate" />
		<execute function="AssertTextEquals" locator1="MenuItem#DELETE" value1="Delete" />
	</command>

	<command name="viewSiteClonedFromSiteTemplateCP">
		<var name="key_siteTemplateName" value="${siteTemplateName}" />

		<execute function="AssertClick" locator1="SitesEditSite#MENU_BASIC_INFORMATION_SITE_TEMPLATE" value1="Site Template" />

		<if>
			<equals arg1="${clonedFromTemplate}" arg2="true" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="SiteSettingsSiteTemplate#SITE_CLONED_FROM_TEMPLATE_MESSAGE" value1="This site was cloned from site template ${siteTemplateName}" />
			</then>
			<else>
				<execute function="AssertTextEquals#assertPartialText" locator1="SiteSettingsSiteTemplate#SITE_NOT_CLONED_FROM_TEMPLATE_MESSAGE" value1="This site is not related to a site template." />
			</else>
		</if>
	</command>

	<command name="viewSiteFriendlyURLPG">
		<execute function="Pause" locator1="1073" />
		<execute function="Pause" locator1="1073" />
		<execute function="AssertTextEquals" locator1="Home#SITE_NAME" value1="${siteName}" />
		<execute function="AssertLocation" value1="${sitePageURL}" />
	</command>

	<command name="viewSiteHierarchyInBreadcrumbPG">
		<if>
			<isset var="breadcrumbListVisible" />
			<then>
				<for list="${breadcrumbListVisible}" param="breadcrumbName">
					<var name="key_breadcrumbName" value="${breadcrumbName}" />

					<execute function="AssertTextEquals" locator1="SitesDirectory#BREADCRUMB" value1="${breadcrumbName}" />
				</for>
			</then>
		</if>
	</command>

	<command name="viewSiteNotClonedFromSiteTemplateCP">
		<var name="key_siteTemplateName" value="${siteTemplateName}" />

		<execute function="AssertClick" locator1="SitesEditSite#MENU_BASIC_INFORMATION_SITE_TEMPLATE" value1="Site Template" />

		<execute function="AssertTextEquals#assertPartialText" locator1="SiteSettingsSiteTemplate#SITE_CLONED_FROM_TEMPLATE_MESSAGE" value1="Site Template" />
	</command>

	<command name="viewSitePG">
		<execute macro="Page#gotoPG">
			<var name="defaultURL" value="${defaultURL}" />
			<var name="nodePort" value="${nodePort}" />
			<var name="pageName" value="${sitePageName}" />
			<var name="soDashboard" value="${soDashboard}" />
			<var name="soPage" value="${soPage}" />
		</execute>

		<execute function="Pause" locator1="1073" />
		<execute function="Pause" locator1="1073" />
		<execute function="Pause" locator1="1073" />
		<execute function="AssertTextEquals" locator1="Home#SITE_NAME" value1="${childSiteName}" />
		<execute function="AssertLocation" value1="${sitePageURL}" />
	</command>

	<command name="viewVirtualHostsURLPG">
		<var name="key_pageName" value="${sitePageName}" />

		<execute function="AssertTextEquals" locator1="Home#SITE_NAME" value1="${siteName}" />
		<execute function="AssertTextEquals" locator1="Home#PAGE" value1="${sitePageName}" />
		<execute function="Pause" locator1="1073" />
		<execute function="Pause" locator1="1073" />

		<execute function="AssertLocation" value1="${sitePageURL}" />
	</command>
</definition>