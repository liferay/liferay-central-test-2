<definition>
	<var name="assetType" value="Message Boards Thread" />
	<var name="userName" value="Test Test" />

	<command name="addCP">
		<execute function="AssertClick" locator1="MessageBoards#POST_NEW_THREAD_BUTTON" value1="Post New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />
		<execute function="Type#typeCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadBody}" />
		<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />

		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="addCPWithAttachment">
		<execute function="AssertClick" locator1="MessageBoards#POST_NEW_THREAD_BUTTON" value1="Post New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />
		<execute function="Type#typeCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadBody}" />

		<execute macro="Panel#expandPanel">
			<var name="panelHeading" value="Attachments" />
		</execute>

		<execute function="UploadCommonFile" locator1="MessageBoardsEditMessage#ATTACHMENTS_BROWSE_FIELD" value1="${mbAttachmentFile}" />
		<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />

		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="addInvalidAttachmentPG">
		<execute function="Click" locator1="MessageBoards#POST_NEW_THREAD_BUTTON" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="Panel#expandPanel">
			<var name="panelHeading" value="Attachments" />
		</execute>

		<execute function="UploadCommonFile" locator1="MessageBoardsEditMessage#ATTACHMENTS_FILE_FIELD_1" value1="${mbThreadAttachment}" />
		<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />
		<execute function="AssertTextEquals" locator1="Message#ERROR_1" value1="Your request failed to complete." />

		<if>
			<equals arg1="${invalidSize}" arg2="true" />
			<then>
				<execute function="AssertTextEquals" locator1="Message#ERROR_2" value1="Request is larger than ${maxAttachmentFileSize}KB and could not be processed." />
			</then>
		</if>
	</command>

	<command name="addPG">
		<execute function="Click" locator1="MessageBoards#POST_NEW_THREAD_BUTTON" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<if>
			<isset var="source" />
			<then>
				<execute function="Click" locator1="CKEditor#TOOLBAR_SOURCE_BUTTON" />
				<execute function="Type" locator1="CKEditor#BODY_FIELD_SOURCE_ON" value1="${threadBody}" />
				<execute function="Click" locator1="CKEditor#TOOLBAR_SOURCE_BUTTON" />

				<if>
					<isset var="fontSize" />
					<then>
						<var name="key_fontSize" value="${fontSize}" />

						<execute function="AssertClick" locator1="CKEditor#TOOLBAR_SIZE_BUTTON" value1="Size" />
						<execute function="AssertTextEquals" locator1="CKEditor#TOOLBAR_SIZE_BUTTON_DROPDOWN" value1="${key_fontSize}" />
					</then>
				</if>
			</then>
			<else>
				<execute function="Type#typeCKEditorWaitForCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadBody}" />
			</else>
		</if>

		<if>
			<equals arg1="${markAsQuestion}" arg2="true" />
			<then>
				<execute function="Check" locator1="Checkbox#MARK_AS_A_QUESTION" />
			</then>
		</if>

		<if>
			<equals arg1="${anonymous}" arg2="true" />
			<then>
				<execute function="Check" locator1="Checkbox#ANONYMOUS" />
			</then>
		</if>

		<if>
			<equals arg1="${priority}" arg2="true" />
			<then>
				<execute function="Select" locator1="MessageBoardsEditMessage#PRIORITY_SELECT" value1="${threadPriority}" />
			</then>
		</if>

		<if>
			<equals arg1="${source}" arg2="true" />
			<then>
				<execute function="Click" locator1="CKEditor#TOOLBAR_SOURCE_BUTTON" />
				<execute function="Type" locator1="CKEditor#BODY_FIELD_SOURCE_ON" value1="${threadBody}" />
				<execute function="Click" locator1="CKEditor#TOOLBAR_SOURCE_BUTTON" />

				<if>
					<isset var="fontSize" />
					<then>
						<var name="key_fontSize" value="${fontSize}" />

						<execute function="AssertClick" locator1="CKEditor#TOOLBAR_SIZE_BUTTON" value1="Size" />
						<execute function="AssertTextEquals" locator1="CKEditor#TOOLBAR_SIZE_BUTTON_DROPDOWN" value1="${key_fontSize}" />
					</then>
				</if>
			</then>
			<else>
				<execute function="Type#typeCKEditorWaitForCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadBody}" />
			</else>
		</if>

		<if>
			<equals arg1="${viewableBy}" arg2="true" />
			<then>
				<execute function="Select" locator1="AssetPermissions#VIEWABLE_AS_SELECT" value1="${viewableBySelection}" />
			</then>
		</if>

		<if>
			<isset var="mbThreadAttachment" />
			<then>
				<if>
					<condition function="IsElementPresent" locator1="MessageBoardsEditMessage#ATTACHMENTS_DROPDOWN_COLLAPSED" />
					<then>
						<execute function="AssertClick" locator1="MessageBoardsEditMessage#ATTACHMENTS_DROPDOWN" value1="Attachments" />
					</then>
				</if>

				<execute function="UploadCommonFile" locator1="MessageBoardsEditMessage#ATTACHMENTS_FILE_FIELD_1" value1="${mbThreadAttachment}" />
			</then>
		</if>

		<if>
			<equals arg1="${threadAddTag}" arg2="true" />
			<then>
				<execute macro="MessageboardsThread#addTagPGCmd" />
			</then>
		</if>

		<if>
			<equals arg1="${saveAsDraft}" arg2="true" />
			<then>
				<execute function="AssertClick" locator1="Button#SAVE_AS_DRAFT" value1="Save as Draft" />
			</then>
			<elseif>
				<equals arg1="${preview}" arg2="true" />
				<then>
					<execute function="AssertClick" locator1="Button#PREVIEW" value1="Preview" />

					<var name="key_threadSubject" value="${threadSubject}" />

					<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="Edit ${threadSubject}" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_1" value1="${userName}" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSubject}" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_WORKFLOW_STATUS_1" value1="Draft" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBody}" />
				</then>
			</elseif>
			<else>
				<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />
			</else>
		</if>

		<execute function="AssertTextEquals#assertText" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="addTagPGCmd">
		<execute function="AssertTextEquals" locator1="TextInput#SUBJECT" value1="${threadSubject}" />
		<execute function="AssertElementPresent" locator1="CKEditor#BODY_FIELD" />

		<execute macro="Panel#expandPanel">
			<var name="panelHeading" value="Categorization" />
		</execute>

		<if>
			<isset var="tagNameList" />
			<then>
				<for list="${tagNameList}" param="tagName">
					<execute function="Type" locator1="AssetCategorization#TAGS_FIELD" value1="${tagName}" />
					<execute function="AssertClick" locator1="AssetCategorization#TAGS_ADD_BUTTON" value1="Add" />
				</for>
			</then>
			<else>
				<var name="key_tagName" value="${tagName}" />

				<execute function="Type" locator1="AssetCategorization#TAGS_FIELD" value1="${tagName}" />
				<execute function="AssertClick" locator1="AssetCategorization#TAGS_ADD_BUTTON" value1="Add" />
				<execute function="AssertElementPresent" locator1="AssetCategorization#TAG" value1="${tagName}" />
			</else>
		</if>
	</command>

	<command name="addWithWorkflowCP">
		<execute function="AssertClick" locator1="MessageBoards#POST_NEW_THREAD_BUTTON" value1="Post New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />
		<execute function="Type#typeCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadBody}" />
		<execute function="Click" locator1="Button#SUBMIT_FOR_PUBLICATION" />

		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="addWithWorkflowPG">
		<execute function="Click" locator1="MessageBoards#POST_NEW_THREAD_BUTTON" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />
		<execute function="Type#typeCKEditorWaitForCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadBody}" />
		<execute function="Click" locator1="Button#SUBMIT_FOR_PUBLICATION" />

		<execute function="AssertTextEquals#assertText" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="assertAlertNotPresent">
		<execute function="AssertAlertNotPresent" />
	</command>

	<command name="banUser">
		<var name="key_userName" value="${userName}" />

		<if>
			<condition function="IsNotVisible" locator1="MessageBoardsThread#MESSAGE_USER_DETAILS" />
			<then>
				<execute function="MakeVisible" locator1="MessageBoardsThread#MESSAGE_USER_DETAILS" />
			</then>
		</if>

		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_BAN_THIS_USER" value1="Ban This User" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="deletePG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
		<execute function="Click" locator1="MessageBoards#THREAD_TABLE_ACTIONS" />
		<execute function="Click" locator1="MenuItem#MOVE_TO_THE_RECYCLE_BIN" />
		<execute function="AssertTextEquals#assertPartialText" locator1="Message#SUCCESS" value1="The ${assetType} ${threadSubject} was moved to the Recycle Bin. Undo" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_THREAD" />

		<execute macro="RecycleBin#emptyCP" />
	</command>

	<command name="editCP">
		<if>
			<condition function="IsElementNotPresent" locator1="MessageBoardsThread#MESSAGE_EDIT_1" />
			<then>
				<execute function="MakeVisible" locator1="MessageBoardsThread#MESSAGE_EDIT_1" value1="Edit" />
				<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_EDIT_1" value1="Edit" />
			</then>
			<else>
				<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_EDIT_1" value1="Edit" />
			</else>
		</if>

		<if>
			<equals arg1="${threadAttachmentRemove}" arg2="true" />
			<then>
				<if>
					<condition function="IsNotVisible" locator1="MessageBoardsEditMessage#ATTACHMENTS_REMOVE_LINK" />
					<then>
						<execute function="Click" locator1="MessageBoardsEditMessage#ATTACHMENTS_DROPDOWN" />
					</then>
				</if>

				<execute function="AssertTextEquals" locator1="MessageBoardsEditMessage#ATTACHMENTS_NAME" value1="${mbAttachmentFile}" />
				<execute function="AssertClick" locator1="MessageBoardsEditMessage#ATTACHMENTS_REMOVE_LINK" value1="Remove" />
			</then>
		</if>

		<if>
			<isset var="threadSubjectEdit" />
			<then>
				<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubjectEdit}" />
			</then>
		</if>

		<if>
			<isset var="threadBodyEdit" />
			<then>
				<execute function="Type#typeCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadBodyEdit}" />
			</then>
		</if>

		<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />

		<execute function="AssertTextEquals#assertText" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="editPG">
		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_EDIT_1" value1="Edit" />

		<if>
			<isset var="threadSubjectEdit" />
			<then>
				<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubjectEdit}" />
			</then>
		</if>

		<if>
			<isset var="threadBodyEdit" />
			<then>
				<execute function="Type#typeCKEditorWaitForCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadBodyEdit}" />
			</then>
		</if>

		<if>
			<equals arg1="${saveAsDraft}" arg2="true" />
			<then>
				<execute function="AssertClick" locator1="Button#SAVE_AS_DRAFT" value1="Save as Draft" />
			</then>
			<elseif>
				<equals arg1="${preview}" arg2="true" />
				<then>
					<execute function="AssertClickNoError" locator1="Button#PREVIEW" value1="Preview" />
					<execute function="Confirm" value1="In order to preview your changes, the message will be saved as a draft and other users may not be able to see it. Are you sure you want to do this?" />

					<var name="key_threadSubject" value="${threadSubject}" />

					<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="Edit ${threadSubject}" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_1" value1="${userName}" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSubject}" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_WORKFLOW_STATUS_1" value1="Draft" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBodyEdit}" />
				</then>
			</elseif>
			<else>
				<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />
			</else>
		</if>

		<execute function="AssertTextEquals#assertText" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="editViaMyPosts">
		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_MY_POSTS" value1="My Posts" />

		<var name="key_threadSubject" value="${threadSubject}" />

		<if>
			<equals arg1="threadSubjectEdit" arg2="true" />
			<then>
				<var name="key_threadSubject" value="${threadSubjectEdit}" />
			</then>
		</if>

		<execute function="AssertTextEquals" locator1="MessageBoardsMyPosts#THREAD_TABLE_THREAD" value1="${threadSubject}" />
		<execute function="Click" locator1="MessageBoardsMyPosts#THREAD_TABLE_ACTIONS" />
		<execute function="AssertClick" locator1="MenuItem#EDIT" value1="Edit" />

		<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />
		<execute function="AssertTextEquals#assertText" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="flagPG">
		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_FLAG_1" value1="Flag" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#REPORT_INAPPROPRIATE_CONTENT_HEADER" value1="Report Inappropriate Content" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#REPORT_INAPPROPRIATE_CONTENT_WARNING" value1="You are about to report a violation of our Terms of Use. All reports are strictly confidential." />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#REPORT_INAPPROPRIATE_CONTENT_WARNING_TERMS_OF_USE_LINK" value1="Terms of Use" />
		<execute function="Select" locator1="MessageBoardsThread#REPORT_INAPPROPRIATE_CONTENT_REASON_SELECT" value1="${flagReason}" />
		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#REPORT_INAPPROPRIATE_CONTENT_SUCCESS_MESSAGE" value1="Although we cannot disclose our final decision, we do review every report and appreciate your effort to make sure Liferay is a safe environment for everyone." />
		<execute function="Click" locator1="Button#CLOSE_IFRAME" />
	</command>

	<command name="gotoCP">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
	</command>

	<command name="gotoPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<if>
			<isset var="messageBoardsThreadURL" />
			<then>
				<var method="selenium#getLocation()" name="currentURL" />

				<execute macro="TestUtils#assertEquals">
					<var name="actual" value="${currentURL}" />
					<var name="expected" value="${messageBoardsThreadURL}" />
				</execute>
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
				<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_STARTED_BY" value1="${startedByUserName}" />
				<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_POSTS" value1="${postCount}" />
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_TABLE_LAST_POST" value1="${lastPostUserName}" />
				<execute function="Click" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
			</else>
		</if>
	</command>

	<command name="gotoViewInContext">
		<execute function="AssertClick" locator1="Link#VIEW_IN_CONTEXT" value1="View in Context Â»" />
	</command>

	<command name="lockPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
		<execute function="Click" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />

		<execute function="AssertClick" locator1="MessageBoardsThread#THREAD_ACTIONS_LOCK_THREAD" value1="Lock Thread" />
		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="markAsAnswerCP">
		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_MARK_AS_AN_ANSWER_1" value1="Mark as an Answer" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_ANSWER_1" value1="Answer" />
	</command>

	<command name="markAsAnswerPG">
		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_MARK_AS_AN_ANSWER_1" value1="Mark as an Answer" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_ANSWER_1" value1="Answer" />
	</command>

	<command name="movePG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<if>
			<equals arg1="${categoryDescriptionEnabled}" arg2="true" />
			<then>
				<var name="key_categoryDescription" value="${categoryDescription}" />

				<execute function="AssertClick" locator1="MessageBoards#CATEGORY_TABLE_CATEGORY_DESCRIPTION" value1="${categoryDescription}" />
			</then>
			<else>
				<var name="key_categoryName" value="${categoryName1}" />

				<execute function="AssertClick" locator1="MessageBoards#CATEGORY_TABLE_CATEGORY" value1="${categoryName1}" />
			</else>
		</if>

		<execute function="Click" locator1="PGMessageboardsCategory#THREAD_TABLE_ACTIONS_GENERIC" />
		<execute function="AssertClick" locator1="PGMessageboardsCategory#THREAD_MENULIST_MOVE" value1="Move" />

		<execute function="AssertClick" locator1="Button#SELECT" value1="Select" />

		<execute function="Pause" locator1="5000" />

		<execute function="SelectFrame" locator1="MessageBoardsSelectCategory#IFRAME" />

		<var name="key_categoryName" value="${categoryName2}" />

		<execute function="AssertClick" locator1="MessageBoardsSelectCategory#CATEGORY_TABLE_CHOOSE_BUTTON_2" value1="Choose" />

		<if>
			<equals arg1="${explanationPost}" arg2="true" />
			<then>
				<execute function="SelectFrame" value1="relative=top" />
				<execute function="AssertElementPresent" locator1="MessageBoardsMoveThread#CATEGORY_FIELD" />
				<execute function="Check" locator1="MessageBoardsMoveThread#ADD_EXPLANATION_POST_CHECKBOX" />
				<execute function="Type" locator1="MessageBoardsMoveThread#ADD_EXPLANATION_POST_SUBJECT_FIELD" value1="${explanationSubject}" />
				<execute function="Type#typeCKEditor" locator1="MessageBoardsMoveThread#ADD_EXPLANATION_POST_BODY_FIELD" value1="${explanationBody}" />
			</then>
		</if>

		<execute function="SelectFrame" value1="relative=top" />
		<execute function="AssertElementPresent" locator1="MessageBoardsMoveThread#CATEGORY_FIELD" />
		<execute function="AssertClick" locator1="Button#MOVE_THREAD" value1="Move Thread" />
	</command>

	<command name="moveToHomePG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<if>
			<equals arg1="${categoryDescriptionEnabled}" arg2="true" />
			<then>
				<var name="key_categoryDescription" value="${categoryDescription}" />

				<execute function="AssertClick" locator1="MessageBoards#CATEGORY_TABLE_CATEGORY_DESCRIPTION" value1="${categoryDescription}" />
			</then>
			<else>
				<var name="key_categoryName" value="${categoryName}" />

				<execute function="AssertClick" locator1="MessageBoards#CATEGORY_TABLE_CATEGORY" value1="${categoryName}" />
			</else>
		</if>

		<execute function="AssertClick" locator1="PGMessageboardsCategory#THREAD_TABLE_ACTIONS_GENERIC" value1="Actions" />
		<execute function="AssertClick" locator1="PGMessageboardsCategory#THREAD_MENULIST_MOVE" value1="Move" />

		<execute function="AssertClick" locator1="Button#SELECT" value1="Select" />

		<execute function="SelectFrame" locator1="MessageBoardsSelectCategory#IFRAME" />

		<if>
			<condition function="IsElementPresent" locator1="MessageBoardsSelectCategory#CATEGORIES_LINK" />
			<then>
				<execute function="AssertClick" locator1="MessageBoardsSelectCategory#CATEGORIES_LINK" value1="Categories" />
			</then>
		</if>

		<execute function="AssertClick" locator1="MessageBoardsSelectCategory#CHOOSE_THIS_CATEGORY_BUTTON" value1="Choose This Category" />

		<if>
			<equals arg1="${explanationPost}" arg2="true" />
			<then>
				<execute function="SelectFrame" value1="relative=top" />
				<execute function="AssertElementPresent" locator1="MessageBoardsMoveThread#CATEGORY_FIELD" />
				<execute function="Check" locator1="MessageBoardsMoveThread#ADD_EXPLANATION_POST_CHECKBOX" />
				<execute function="Type" locator1="MessageBoardsMoveThread#ADD_EXPLANATION_POST_SUBJECT_FIELD" value1="${explanationSubject}" />
				<execute function="Type#typeCKEditor" locator1="MessageBoardsMoveThread#ADD_EXPLANATION_POST_BODY_FIELD" value1="${explanationBody}" />
			</then>
		</if>

		<execute function="SelectFrame" value1="relative=top" />
		<execute function="AssertElementPresent" locator1="MessageBoardsMoveThread#CATEGORY_FIELD" />
		<execute function="AssertClick" locator1="Button#MOVE_THREAD" value1="Move Thread" />
	</command>

	<command name="moveToRecycleBinCP">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
		<execute function="Click" locator1="MessageBoards#THREAD_TABLE_ACTIONS" />
		<execute function="AssertElementPresent#assertVisible" locator1="MenuItem#MOVE_TO_THE_RECYCLE_BIN" />
		<execute function="AssertClick" locator1="MenuItem#MOVE_TO_THE_RECYCLE_BIN" value1="Move to the Recycle Bin" />
		<execute function="AssertTextEquals#assertPartialText" locator1="Message#SUCCESS" value1="The ${assetType} ${threadSubject} was moved to the Recycle Bin. Undo" />
		<execute function="AssertTextEquals#assertText" locator1="Message#INFO" value1="There are no threads in this category." />
	</command>

	<command name="quickReplyPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />

		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_QUICK_REPLY_1" value1="Quick Reply" />

		<execute function="Type#typeCKEditorWaitForCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadReplyBody}" />
		<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />

		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="ratePG">
		<if>
			<equals arg1="${ratingType}" arg2="Positive" />
			<then>
				<execute function="Click" locator1="MessageBoardsThread#MESSAGE_RATING_1_UPVOTE" />
			</then>
			<elseif>
				<equals arg1="${ratingType}" arg2="Negative" />
				<then>
					<execute function="Click" locator1="MessageBoardsThread#MESSAGE_RATING_1_DOWNVOTE" />
				</then>
			</elseif>
		</if>
	</command>

	<command name="removeViewPermissionsPG">
		<var method="StringUtil#lowerCase('${key_roleName}')" name="key_roleName" />
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="Click" locator1="MessageBoards#THREAD_TABLE_ACTIONS" />
		<execute function="AssertClick" locator1="MenuItem#PERMISSIONS" value1="Permissions" />

		<execute function="SelectFrame" locator1="Permissions#PERMISSIONS_IFRAME" />
		<execute function="AssertTextEquals" locator1="Permissions#HEADER_TITLE" value1="${threadSubject}" />
		<execute function="Uncheck" locator1="Permissions#CONFIGURATION_PERMISSIONS_VIEW_CHECKBOX" />
		<execute function="AssertClick" locator1="Button#SAVE" value1="Save" />
		<execute function="AssertTextEquals" locator1="Permissions#SUCCESS_MESSAGE" value1="Your request completed successfully." />
		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="replyCP">
		<var name="key_threadSubject" value="${threadSubject}" />

		<if>
			<equals arg1="${markAsQuestion}" arg2="true" />
			<then>
				<var name="key_threadSubject" value="${threadSubject}" />
				<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_ADMIN_FLAG" value1="Waiting for an Answer" />
			</then>
		</if>

		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_REPLY_1" value1="Reply" />

		<execute function="Type#typeCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadReplyBody}" />
		<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />

		<execute function="AssertTextEquals" locator1="Message#SUCCESS" value1="Your request completed successfully." />

		<if>
			<equals arg1="${markAsAnswer}" arg2="true" />
			<then>
				<execute macro="MessageboardsThread#markAsAnswerCP" />
			</then>
		</if>
	</command>

	<command name="replyPG">
		<if>
			<equals arg1="${displayStyle}" arg2="Question" />
			<then>
				<var name="key_threadSubject" value="${threadSubject}" />

				<execute function="AssertClick" locator1="MessageBoards#QUESTION_CATEGORY_THREAD_TABLE_QUESTION" value1="${threadSubject}" />
			</then>
			<else>
				<var name="key_threadSubject" value="${threadSubject}" />

				<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
				<execute function="Click" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
			</else>
		</if>

		<if>
			<isset var="threadReplySpecific" />
			<then>
				<var name="key_threadBody" value="${threadBody}" />

				<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_REPLY_SPECIFIC" value1="Reply" />
			</then>
			<else>
				<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_REPLY_1" value1="Reply" />
			</else>
		</if>

		<execute function="Type#typeCKEditorWaitForCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadReplyBody}" />

		<if>
			<equals arg1="${anonymous}" arg2="true" />
			<then>
				<execute function="Check" locator1="Checkbox#ANONYMOUS" />
			</then>
		</if>

		<if>
			<isset var="mbThreadAttachment" />
			<then>
				<if>
					<condition function="IsElementPresent" locator1="MessageBoardsEditMessage#ATTACHMENTS_DROPDOWN_COLLAPSED" />
					<then>
						<execute function="AssertClick" locator1="MessageBoardsEditMessage#ATTACHMENTS_DROPDOWN" value1="Attachments" />
					</then>
				</if>

				<execute function="UploadCommonFile" locator1="MessageBoardsEditMessage#ATTACHMENTS_FILE_FIELD_1" value1="${mbThreadAttachment}" />
			</then>
		</if>

		<execute function="Click" locator1="Button#PUBLISH" />

		<execute function="AssertTextEquals#assertText" locator1="Message#SUCCESS" value1="Your request completed successfully." />

		<if>
			<equals arg1="${markAsAnswer}" arg2="true" />
			<then>
				<execute macro="MessageboardsThread#markAsAnswerPG" />
			</then>
		</if>
	</command>

	<command name="replyWithQuotePG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
		<execute function="Click" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />

		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_REPLY_WITH_QUOTE_1" value1="Reply with Quote" />

		<execute function="Click" locator1="CKEditor#TOOLBAR_SOURCE_BUTTON" />
		<execute function="Type#sendKeys" locator1="CKEditor#BODY_FIELD_SOURCE_ON_SEND_KEYS" value1="${threadReplyBody}" />
		<execute function="Click" locator1="Button#PUBLISH" />

		<execute function="AssertTextEquals#assertText" locator1="Message#SUCCESS" value1="Your request completed successfully." />
	</command>

	<command name="restoreMBAttachmentCP">
		<execute function="Click" locator1="MessageBoardsThread#MESSAGE_BODY_ATTACHMENT_1" />

		<var name="key_mbAttachmentFile" value="${mbAttachmentFile}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsRemovedAttachments#ATTACHMENT_TABLE_NAME" value1="${mbAttachmentFile}" />
		<execute function="Click" locator1="MessageBoardsRemovedAttachments#ATTACHMENT_TABLE_ACTIONS" />
		<execute function="AssertClick" locator1="MenuItem#RESTORE" value1="Restore" />
		<execute function="AssertTextEquals" locator1="Message#INFO" value1="This message does not have file attachments in the Recycle Bin." />
	</command>

	<command name="searchPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="Type" locator1="NavBar#BASIC_SEARCH_FIELD" value1="${threadKeyword}" />
		<execute function="AssertClick" locator1="NavBar#BASIC_SEARCH_BUTTON" value1="Search" />

		<execute function="AssertTextEquals" locator1="MessageBoardsSearch#SEARCH_RESULTS_ENTRY_TITLE" value1="${threadSubject}" />
	</command>

	<command name="splitThreadPG">
		<var name="key_threadBody" value="${threadReplyBody}" />

		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_SPLIT_THREAD" value1="Split Thread" />

		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="Message#INFO" value1="Click OK to create a new thread with the following messages." />
		<execute function="AssertTextEquals" locator1="MessageBoardsSplitThread#THREAD_TABLE_SUBJECT" value1="RE: ${threadSubject}" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSplitSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsSplitThread#ADD_EXPLANATION_POST_LABEL" value1="Add explanation post to the source thread." />

		<execute function="Check" locator1="MessageBoardsSplitThread#ADD_EXPLANATION_POST_CHECKBOX" />

		<execute function="AssertTextEquals" locator1="Message#INFO_EXPLANATION_POST" value1="The following post will be added in place of the moved message." />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSplitReplySubject}" />
		<execute function="Type#typeCKEditorWaitForCKEditor" locator1="CKEditor#BODY_FIELD" value1="${threadSplitReplyBody}" />

		<execute function="AssertClick" locator1="Button#OK" value1="OK" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSplitReplySubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadReplyBody}" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_BODY_2" />
	</command>

	<command name="tearDownCP">
		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Message Boards" />
		</execute>

		<if>
			<condition function="IsElementPresent#isVisible" locator1="MessageBoards#THREAD_TABLE_ALL_CHECKBOX" />
			<then>
				<execute function="Check" locator1="MessageBoards#THREAD_TABLE_ALL_CHECKBOX" />
				<execute function="AssertClick" locator1="MessageBoardsAdmin#THREADS_RECYCLE_BIN_BUTTON" value1="Move to the Recycle Bin" />

				<execute function="AssertTextEquals#assertPartialText" locator1="Message#SUCCESS" value1="moved to the Recycle Bin. Undo" />
			</then>
		</if>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Recycle Bin" />
		</execute>

		<execute macro="RecycleBin#emptyCP" />
	</command>

	<command name="tearDownPG">
		<execute macro="Page#gotoPG">
			<var name="defaultURL" value="${defaultURL}" />
			<var name="nodePort" value="${nodePort}" />
			<var name="pageName" value="${pageName}" />
			<var name="soDashboard" value="${soDashboard}" />
			<var name="soPage" value="${soPage}" />
		</execute>

		<while>
			<condition function="IsElementPresent" locator1="MessageBoards#THREAD_TABLE_ACTIONS_GENERIC" />
			<then>
				<execute function="Click" locator1="MessageBoards#THREAD_TABLE_ACTIONS_GENERIC" />
				<execute function="AssertClick" locator1="MenuItem#MOVE_TO_THE_RECYCLE_BIN" value1="Move to the Recycle Bin" />
			</then>
		</while>

		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_MY_POSTS" value1="My Posts" />

		<while>
			<condition function="IsElementPresent" locator1="MessageBoardsMyPosts#THREAD_TABLE_ACTIONS_GENERIC" />
			<then>
				<execute function="Click" locator1="MessageBoardsMyPosts#THREAD_TABLE_ACTIONS_GENERIC" />
				<execute function="AssertClick" locator1="MenuItem#MOVE_TO_THE_RECYCLE_BIN" value1="Move to the Recycle Bin" />
			</then>
		</while>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoSitesContent">
			<var name="portlet" value="Recycle Bin" />
		</execute>

		<execute macro="RecycleBin#emptyCP" />
	</command>

	<command name="viewAnonymousPostingCheckboxCP">
		<execute function="AssertClick" locator1="MessageBoards#POST_NEW_THREAD_BUTTON" value1="Post New Thread" />

		<execute function="AssertElementPresent" locator1="Checkbox#ANONYMOUS" />
	</command>

	<command name="viewAnswerCP">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_ADMIN_FLAG" value1="Resolved" />
		<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_ADMIN_THREAD" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_ANSWER_1" value1="Answer" />
		<execute function="AssertClick" locator1="MessageBoardsThread#THREAD_CONTROLS_BACK" value1="Back" />
	</command>

	<command name="viewAsWorkflowAsset">
		<execute function="AssertTextEquals" locator1="Home#SITE_ADMINISTRATION_PORTLET_TITLE" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBody}" />
	</command>

	<command name="viewCP">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_ADMIN_THREAD" value1="${threadSubject}" />
		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_TABLE_ADMIN_FLAG" />
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_ADMIN_STARTED_BY" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_ADMIN_POSTS" value1="${postsNumber}" />
		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_TABLE_ADMIN_VIEWS" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_TABLE_ADMIN_LAST_POST" value1="${userName}" />
		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_TABLE_ACTIONS" value1="${threadSubject}" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_ADMIN_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_1" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBody}" />

		<if>
			<isset var="mbAttachmentFile" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_ATTACHMENT_1" value1="${mbAttachmentFile}" />
			</then>
		</if>
	</command>

	<command name="viewDefaultCP">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals#assertText" locator1="Message#INFO" value1="There are no threads in this category." />
		<execute function="AssertTextNotPresent" value1="${threadSubject}" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_CHECKBOX" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_THREAD" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_FLAG" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_STARTED_BY" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_POSTS" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_VIEWS" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_LAST_POST" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_ACTIONS" />
	</command>

	<command name="viewLockedPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_TABLE_THREAD_LOCKED_ICON" />
		<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_ACTIONS_UNLOCK_THREAD" value1="Unlock Thread" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_REPLY_1" value1="Reply" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_QUICK_REPLY_1" value1="Quick Reply" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_REPLY_WITH_QUOTE_1" value1="Reply with Quote" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_EDIT_1" value1="Edit" />
	</command>

	<command name="viewMarkAsAnswerPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<if>
			<equals arg1="${displayStyle}" arg2="Question" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoards#QUESTION_CATEGORY_THREAD_TABLE_STATISTICS_ANSWERS" value1="${questionAnswers}" />
				<execute function="AssertClick" locator1="MessageBoards#QUESTION_CATEGORY_THREAD_TABLE_QUESTION" value1="${threadSubject}" />
			</then>
			<else>
				<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_FLAG" value1="Resolved" />
				<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
			</else>
		</if>

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_ANSWER_1" value1="Answer" />
	</command>

	<command name="viewMarkAsQuestionCheckedCP">
		<execute function="AssertClick" locator1="MessageBoards#POST_NEW_THREAD_BUTTON" value1="Post New Thread" />

		<execute function="AssertChecked" locator1="Checkbox#MARK_AS_A_QUESTION" />
		<execute function="AssertClick" locator1="Button#CANCEL" value1="Cancel" />
	</command>

	<command name="viewMarkAsQuestionNotCheckedCP">
		<execute function="AssertClick" locator1="MessageBoards#POST_NEW_THREAD_BUTTON" value1="Post New Thread" />

		<execute function="AssertNotChecked" locator1="Checkbox#MARK_AS_A_QUESTION" />
		<execute function="AssertClick" locator1="Button#CANCEL" value1="Cancel" />
	</command>

	<command name="viewNoAnonymousPostingCheckboxCP">
		<execute function="AssertClick" locator1="MessageBoards#POST_NEW_THREAD_BUTTON" value1="Post New Thread" />

		<execute function="AssertElementNotPresent" locator1="Checkbox#ANONYMOUS" />
	</command>

	<command name="viewNoPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals#assertText" locator1="Message#INFO" value1="There are no threads in this category." />
		<execute function="AssertTextNotPresent" value1="${threadSubject}" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_THREAD"  />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_STARTED_BY" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_POSTS" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_LAST_POST" />
	</command>

	<command name="viewNoXSSPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertAlertNotPresent" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_1" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="" />
	</command>

	<command name="viewPG">
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_1" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBody}" />

		<if>
			<isset var="fontSize" />
			<then>
				<var name="key_fontSize" value="${fontSize}" />

				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_STYLE_1" value1="${threadBody}" />
			</then>
		</if>

		<if>
			<isset var="threadSubject2" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_2" value1="${userName}" />

				<var name="key_threadSubject" value="${threadSubject2}" />

				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_2" value1="${threadSubject2}" />
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_2" value1="${threadBody2}" />
			</then>
		</if>

		<if>
			<isset var="workflowTask" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_WORKFLOW_STATUS_1" value1="Pending (${workflowTask})" />
			</then>
		</if>
	</command>

	<command name="viewPGViaAP">
		<var name="key_assetTitle" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="AP#ASSET_ABSTRACT_TITLE" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="AP#ASSET_ABSTRACT_DESCRIPTION" value1="${threadBody}" />
		<execute function="AssertClick" locator1="AP#ASSET_ABSTRACT_TITLE" value1="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="APAsset#ASSET_TITLE" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="AssetRelatedAssets#MESSAGE_BOARDS_THREAD_TITLE" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="AssetRelatedAssets#MESSAGE_BOARDS_THREAD_CONTENT" value1="${threadBody}" />
	</command>

	<command name="viewRatingPG">
		<if>
			<equals arg1="${ratingType}" arg2="Positive" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_RATING_1" value1="+1 (1 Vote)" />
			</then>
			<elseif>
				<equals arg1="${ratingType}" arg2="Negative" />
				<then>
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_RATING_1" value1="-1 (1 Vote)" />
				</then>
			</elseif>
		</if>
	</command>

	<command name="viewReplyCP">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_ADMIN_THREAD" value1="${threadSubject}" />
		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_TABLE_ADMIN_FLAG" />
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_ADMIN_STARTED_BY" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_ADMIN_POSTS" value1="${postsNumber}" />
		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_TABLE_ADMIN_VIEWS" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_TABLE_ADMIN_LAST_POST" value1="${userName}" />
		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_TABLE_ACTIONS" value1="${threadSubject}" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_1" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBody}" />

		<if>
			<isset var="mbAttachmentFile" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_ATTACHMENT_1" value1="${mbAttachmentFile}" />
			</then>
		</if>

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_2" value1="${userName2}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_2" value1="RE: ${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_2" value1="${threadBody2}" />
	</command>

	<command name="viewReplyPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_STARTED_BY" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_POSTS" value1="${postCount}" />

		<if>
			<equals arg1="${guestReply}" arg2="true" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_TABLE_LAST_POST" value1="Anonymous" />
				<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
			</then>
			<else>
				<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
			</else>
		</if>

		<if>
			<equals arg1="${loggedOut}" arg2="true" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_TABLE_SUBJECT_2" value1="RE: ${threadSubject}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSubject}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBody}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_1" value1="${userName}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_2" value1="RE: ${threadSubject}" />
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_2" value1="${threadReplyBody}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_2_GUEST" value1="Anonymous" />
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_TABLE_SUBJECT_2" value1="RE: ${threadSubject}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSubject}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBody}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_1" value1="${userName}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_RATING_1_UPVOTE" value1="0" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_2" value1="RE: ${threadSubject}" />
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_2" value1="${threadReplyBody}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_2" value1="${userName}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_RATING_2_UPVOTE" value1="0" />
			</else>
		</if>

		<if>
			<equals arg1="${guestReply}" arg2="false" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_2" value1="${userName}" />
			</then>
		</if>

		<if>
			<isset var="mbThreadAttachment" />
			<then>
				<var name="key_mbThreadAttachment" value="${mbThreadAttachment}" />

				<execute function="AssertElementPresent" locator1="MessageBoardsThread#MESSAGE_ATTACHMENT_IMAGE" />
			</then>
		</if>
	</command>

	<command name="viewSplitThreadPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_POSTS" value1="2" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBody}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_2" value1="Thread Split" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_2" value1="${threadSplitReplyBody}" />

		<execute macro="Page#gotoPG">
			<var name="defaultURL" value="${defaultURL}" />
			<var name="nodePort" value="${nodePort}" />
			<var name="pageName" value="${pageName}" />
			<var name="soDashboard" value="${soDashboard}" />
			<var name="soPage" value="${soPage}" />
		</execute>

		<var name="key_threadSubject" value="${threadSplitReplySubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSplitReplySubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_POSTS" value1="1" />
		<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_THREAD" value1="${threadSplitReplySubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSplitReplySubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSplitReplySubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadReplyBody}" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_SUBJECT_2" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_BODY_2" />
	</command>

	<command name="viewStatisticsPostsCountDefaultPG">
		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_STATISTICS" value1="Statistics" />

		<if>
			<condition function="IsElementPresent" locator1="MessageBoardsStatistics#GENERAL_DROPDOWN_COLLAPSED" />
			<then>
				<execute function="AssertClick" locator1="MessageBoardsStatistics#GENERAL_DROPDOWN" value1="General" />
			</then>
		</if>

		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#GENERAL_NUMBER_OF_CATEGORIES" value1="0" />
		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#GENERAL_NUMBER_OF_POSTS" value1="0" />
		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#GENERAL_NUMBER_OF_PARTICIPANTS" value1="0" />
		<execute function="AssertTextEquals" locator1="Message#INFO" value1="There are no top posters." />
	</command>

	<command name="viewStatisticsPostsCountPG">
		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_STATISTICS" value1="Statistics" />

		<if>
			<condition function="IsElementPresent" locator1="MessageBoardsStatistics#GENERAL_DROPDOWN_COLLAPSED" />
			<then>
				<execute function="AssertClick" locator1="MessageBoardsStatistics#GENERAL_DROPDOWN" value1="General" />
			</then>
		</if>

		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#GENERAL_NUMBER_OF_POSTS" value1="${threadPostNumber}" />

		<if>
			<isset var="userPostNumber" />
			<then>
				<execute macro="MessageboardsThread#viewStatisticsTopPoster" />
			</then>
			<else>
				<execute macro="MessageboardsThread#viewStatisticsTopPoster">
					<var name="userMessageboardsRank" value="${userMessageboardsRank}" />
					<var name="userName" value="${userName}" />
					<var name="userPostNumber" value="${threadPostNumber}" />
				</execute>
			</else>
		</if>
	</command>

	<command name="viewStatisticsTopPoster">
		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_STATISTICS" value1="Statistics" />

		<if>
			<condition function="IsElementPresent" locator1="MessageBoardsStatistics#TOP_POSTERS_DROPDOWN_COLLAPSED" />
			<then>
				<execute function="AssertClick" locator1="MessageBoardsStatistics#TOP_POSTERS_DROPDOWN" value1="Top Posters" />
			</then>
		</if>

		<var name="key_userName" value="${userName}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_NAME" value1="${userName}" />

		<if>
			<isset var="userMessageboardsRank" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_RANK" value1="Rank: ${userMessageboardsRank}" />
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_RANK" value1="Rank: Youngling" />
			</else>
		</if>

		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_POSTS" value1="Posts: ${userPostNumber}" />
		<execute function="AssertElementPresent" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_JOIN_DATE" />
		<execute function="AssertElementPresent" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_LAST_POST_DATE" />
		<execute function="AssertElementPresent" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_ICON" />
	</command>

	<command name="viewTagPG">
		<var method="StringUtil#lowerCase('${tagName}')" name="tagName" />

		<var name="key_tagName" value="tagName" />

		<if>
			<equals arg1="${messageTagNumber}" arg2="1" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_TAG_1" value1="${tagName}" />
			</then>
			<elseif>
				<equals arg1="${messageTagNumber}" arg2="2" />
				<then>
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_TAG_2" value1="${tagName}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${messageTagNumber}" arg2="3" />
				<then>
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_TAG_3" value1="${tagName}" />
				</then>
			</elseif>
			<else>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_TAG_1" value1="${tagName}" />
			</else>
		</if>
	</command>

	<command name="viewWaitingForAnswerPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_TABLE_FLAG" value1="Waiting for an Answer" />
	</command>

	<command name="viewWithWorkflowPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_THREAD" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_STARTED_BY" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_POSTS" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_LAST_POST" />

		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_MY_POSTS" value1="My Posts" />

		<execute function="AssertTextEquals" locator1="MessageBoardsMyPosts#THREAD_TABLE_THREAD" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsMyPosts#THREAD_TABLE_STATUS" value1="Pending" />

		<execute function="AssertClick" locator1="MessageBoardsMyPosts#THREAD_TABLE_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_1" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_SUBJECT_1" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_WORKFLOW_STATUS_1" value1="Pending (${workflowTask})" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBody}" />
	</command>

	<command name="viewWithWorkflowPGViaAP">
		<var name="key_assetTitle" value="${threadSubject}" />

		<execute function="AssertElementNotPresent" locator1="AP#ASSET_ABSTRACT_TITLE" value1="${threadSubject}" />
	</command>
</definition>