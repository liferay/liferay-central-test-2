<definition>
	<var name="siteMember" value="User" />
	<var name="siteType" value="Open" />

	<command name="addAllMembersCP">
		<execute action="CPSitememberships#assertClick" locator-key1="TOOLBAR_ADD_MEMBERS" value1="Add Members" />
		<execute action="CPSitememberships#assertClick" locator-key1="ADD_MEMBERS_MENULIST_USER" value1="User" />
		<execute action="CPSitemembershipsAddmembers#check" locator-key1="USER_TABLE_ALL_CHECKBOX" />
		<execute action="CPSitemembershipsAddmembers#click" locator-key1="SAVE_BUTTON" />
		<execute action="CPSitemembershipsAddmembers#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="addBlankCP">
		<execute macro="Site#addCP">
			<var name="siteType" value="Blank" />
		</execute>
	</command>

	<command name="addCommunityCP">
		<execute macro="Site#addCP">
			<var name="siteType" value="Community" />
		</execute>
	</command>

	<command name="addCP">
		<execute action="CPSites#assertClick" locator-key1="ADD" value1="Add" />

		<if>
			<equals arg1="${siteType}" arg2="Blank" />
			<then>
				<execute action="CPSites#assertClick" locator-key1="ADD_BLANK_SITE" value1="Blank Site" />
			</then>
			<elseif>
				<equals arg1="${siteType}" arg2="Community" />
				<then>
					<execute action="CPSites#assertClick" locator-key1="ADD_COMMUNITY_SITE" value1="Community Site" />
					<if>
						<equals arg1="${uncheckPropagation}" arg2="true" />
						<then>
							<execute action="CPSitesAdd#uncheck" locator-key1="ENABLE_PROPAGATION_CHECKBOX" />
						</then>
					</if>
				</then>
			</elseif>
			<elseif>
				<equals arg1="${siteType}" arg2="Intranet" />
				<then>
					<execute action="CPSites#assertClick" locator-key1="ADD_INTRANET_SITE" value1="Intranet Site" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${siteType}" arg2="Site Template" />
				<then>
					<var name="key_siteTemplateName" value="${siteTemplateName}" />

					<execute action="CPSites#click" locator-key1="ADD_SITE_TEMPLATE_SITE" />
					<if>
						<equals arg1="${uncheckPropagation}" arg2="true" />
						<then>
							<execute action="CPSitesAdd#uncheck" locator-key1="ENABLE_PROPAGATION_CHECKBOX" />
						</then>
					</if>
				</then>
			</elseif>
			<else>
				<fail message="Invalid var siteType. Must be (Blank|Community|Intranet|Site Template)." />
			</else>
		</if>

		<if>
			<equals arg1="${membershipType}" arg2="Private" />
			<then>
				<execute action="CPSitesAdd#select" locator-key1="MEMBERSHIP_TYPE" value1="Private" />
			</then>
			<elseif>
				<equals arg1="${membershipType}" arg2="Restricted" />
				<then>
					<execute action="CPSitesAdd#select" locator-key1="MEMBERSHIP_TYPE" value1="Restricted" />
				</then>
			</elseif>
			<else>
				<execute action="CPSitesAdd#select" locator-key1="MEMBERSHIP_TYPE" value1="Open" />
			</else>
		</if>

		<if>
			<isset var="parentSiteName" />
			<then>
				<execute action="CPSitesAdd#assertClick" locator-key1="PARENT_SITE_SELECT" value1="Select" />

				<var name="key_parentSiteName" value="${parentSiteName}" />

				<execute action="CPSitesAddSelectSite#selectFrame" locator-key1="SELECT_SITE_IFRAME" />
				<execute action="CPSitesAddSelectSite#type" locator-key1="BASIC_SEARCH_FIELD" value1="${parentSiteName}" />
				<execute action="CPSitesAddSelectSite#assertClick" locator-key1="BASIC_SEARCH_BUTTON" value1="Search" />
				<execute action="CPSitesAddSelectSite#assertTextEquals" locator-key1="SITES_TABLE_NAME" value1="${parentSiteName}" />
				<execute action="CPSitesAddSelectSite#click" locator-key1="SITES_TABLE_CHOOSE_BUTTON" value1="Choose" />

				<var name="key_parentSiteName" value="${parentSiteName}" />

				<execute action="CPSitesAdd#selectFrame" value1="relative=top" />
				<execute action="CPSitesAdd#assertTextEquals" locator-key1="PARENT_SITE_TABLE_NAME" value1="${parentSiteName}" />
			</then>
		</if>

		<execute action="CPSitesAdd#type" locator-key1="DETAILS_NAME" value1="${siteName}" />
		<execute action="CPSitesAdd#click" locator-key1="MENU_SAVE" value1="Save" />

		<execute action="CPSitesEdit#assertTextEquals" locator-key1="SITE_TITLE" value1="${siteName}" />

		<if>
			<equals arg1="${siteLimitMembership}" arg2="Yes" />
			<then>
				<execute action="CPSitesEdit#check" locator-key1="PARENT_SITE_LIMIT_MEMBERSHIP_CHECKBOX" />
			</then>
			<elseif>
				<equals arg1="${siteLimitMembership}" arg2="No" />
				<then>
					<execute action="CPSitesEdit#uncheck" locator-key1="PARENT_SITE_LIMIT_MEMBERSHIP_CHECKBOX" />
				</then>
			</elseif>
		</if>

		<execute action="CPSitesEdit#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />
		<execute action="CPSitesEdit#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="addIntranetCP">
		<execute macro="Site#addCP">
			<var name="siteType" value="Intranet" />
		</execute>
	</command>

	<command name="addMemberCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute action="CPSitememberships#assertClick" locator-key1="TOOLBAR_ADD_MEMBERS" value1="Add Members" />
		<execute action="CPSitememberships#assertClick" locator-key1="ADD_MEMBERS_MENULIST_USER" value1="User" />

		<execute action="CPSitemembershipsAddmembers#type" locator-key1="SEARCH_FIELD" value1="${userScreenName}" />
		<execute action="CPSitemembershipsAddmembers#assertClick" locator-key1="SEARCH_BUTTON" value1="Search" />

		<if>
			<isset var="userMiddleName" />
			<then>
				<execute action="CPSitemembershipsAddmembers#assertTextEquals" locator-key1="USER_TABLE_NAME" value1="${userFirstName} ${userMiddleName} ${userLastName}" />
			</then>
			<else>
				<execute action="CPSitemembershipsAddmembers#assertTextEquals" locator-key1="USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
			</else>
		</if>

		<execute action="CPSitemembershipsAddmembers#assertTextEquals" locator-key1="USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute action="CPSitemembershipsAddmembers#check" locator-key1="USER_TABLE_CHECKBOX" />
		<execute action="CPSitemembershipsAddmembers#click" locator-key1="SAVE_BUTTON" />
		<execute action="CPSitemembershipsAddmembers#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="addMemberOrganizationCP">
		<var name="key_orgName" value="${orgName}" />

		<execute action="CPSitememberships#assertClick" locator-key1="TOOLBAR_ADD_MEMBERS" value1="Add Members" />
		<execute action="CPSitememberships#assertClick" locator-key1="ADD_MEMBERS_MENULIST_ORGANIZATION" value1="Organization" />
		<execute action="CPSitemembershipsAddmembers#type" locator-key1="SEARCH_ORGANIZATION_FIELD" value1="${orgName}" />
		<execute action="CPSitemembershipsAddmembers#assertClick" locator-key1="SEARCH_BUTTON" value1="Search" />
		<execute action="CPSitemembershipsAddmembers#assertTextEquals" locator-key1="ORGANIZATION_TABLE_NAME" value1="${orgName}" />
		<execute action="CPSitemembershipsAddmembers#check" locator-key1="ORGANIZATION_TABLE_CHECKBOX" />
		<execute action="CPSitemembershipsAddmembers#click" locator-key1="SAVE_BUTTON" />
		<execute action="CPSitemembershipsAddmembers#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="addMemberUserGroupCP">
		<var name="key_userGroupName" value="${userGroupName}" />

		<execute action="CPSitememberships#assertClick" locator-key1="TOOLBAR_ADD_MEMBERS" value1="Add Members" />
		<execute action="CPSitememberships#assertClick" locator-key1="ADD_MEMBERS_MENULIST_USER_GROUPS" value1="User Group" />
		<execute action="CPSitemembershipsAddmembers#type" locator-key1="SEARCH_USER_GROUP_FIELD" value1="${userGroupName}" />
		<execute action="CPSitemembershipsAddmembers#assertClick" locator-key1="SEARCH_BUTTON" value1="Search" />
		<execute action="CPSitemembershipsAddmembers#assertTextEquals" locator-key1="USER_GROUP_TABLE_NAME" value1="${userGroupName}" />
		<execute action="CPSitemembershipsAddmembers#check" locator-key1="USER_GROUP_TABLE_CHECKBOX" />
		<execute action="CPSitemembershipsAddmembers#click" locator-key1="SAVE_BUTTON" />
		<execute action="CPSitemembershipsAddmembers#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="addSiteTemplateCP">
		<execute macro="Site#addCP">
			<var name="siteType" value="Site Template" />
		</execute>
	</command>

	<command name="addVirtualHostsURLCP">
		<execute action="CPSitesettings#assertClick" locator-key1="MENU_BASIC_INFORMATION_SITE_URL" value1="Site URL" />

		<if>
			<isset var="publicVirtualHosts" />
			<then>
				<execute action="CPSitesettingsSiteURL#assertTextEquals" locator-key1="SITE_URL_VIRTUAL_HOSTS_PUBLIC_PAGES_LABEL" value1="Public Pages" />
				<execute action="CPSitesettingsSiteURL#type" locator-key1="SITE_URL_VIRTUAL_HOSTS_PUBLIC_PAGES_FIELD" value1="${publicPageVirtualHostURL}" />
			</then>
		</if>

		<if>
			<isset var="privateVirtualHosts" />
			<then>
				<execute action="CPSitesettingsSiteURL#assertTextEquals" locator-key1="SITE_URL_VIRTUAL_HOSTS_PRIVATE_PAGES_LABEL" value1="Private Pages" />
				<execute action="CPSitesettingsSiteURL#type" locator-key1="SITE_URL_VIRTUAL_HOSTS_PRIVATE_PAGES_FIELD" value1="${privatePageVirtualHostURL}" />
			</then>
		</if>

		<execute action="CPSitesettingsSiteURL#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />

		<execute action="CPSitesettingsSiteURL#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="approveJoinSiteRestrictedViaMySitesPG">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute action="CPSitememberships#assertTextEquals" locator-key1="MEMBERSHIP_TYPE" value1="Membership Type: Restricted" />
		<execute action="CPSitememberships#assertTextEquals" locator-key1="REQUEST_MESSAGE" value1="There are 1 membership requests pending." />
		<execute action="CPSitememberships#assertClick" locator-key1="TOOLBAR_VIEW_MEMBERSHIP_REQUESTS" value1="View Membership Requests" />

		<execute action="CPSitemembershipsViewmembershiprequestsPending#assertTextEquals" locator-key1="REQUESTS_TABLE_USER_NAME" value1="${userFirstName} ${userLastName} (${userEmailAddress})" />
		<execute action="CPSitemembershipsViewmembershiprequestsPending#assertTextEquals" locator-key1="REQUESTS_TABLE_USER_COMMENTS" value1="Please allow me to join the Restricted Site." />
		<execute action="CPSitemembershipsViewmembershiprequestsPending#assertClick" locator-key1="REQUESTS_TABLE_REPLY" value1="Reply" />

		<execute action="CPSitemembershipsViewmembershiprequestsPendingReply#select" locator-key1="STATUS" value1="Approve" />
		<execute action="CPSitemembershipsViewmembershiprequestsPendingReply#type" locator-key1="REPLY_COMMENTS" value1="You may join the Restricted Site." />
		<execute action="CPSitemembershipsViewmembershiprequestsPendingReply#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />

		<execute action="CPSitemembershipsViewmembershiprequestsPending#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
		<execute action="CPSitemembershipsViewmembershiprequestsPending#assertTextEquals" locator-key1="SUCCESS_MESSAGE_2" value1="Your reply will be sent to the user by email." />
		<execute action="CPSitemembershipsViewmembershiprequestsPending#assertClick" locator-key1="VIEW_MEMBERSHIP_NAVIGATION_APPROVED" value1="Approved" />

		<execute action="CPSitemembershipsViewmembershiprequestsApproved#assertTextEquals" locator-key1="APPROVED_TABLE_USER_NAME" value1="${userFirstName} ${userLastName} (${userEmailAddress})" />
		<execute action="CPSitemembershipsViewmembershiprequestsApproved#assertTextEquals" locator-key1="APPROVED_TABLE_USER_COMMENTS" value1="Please allow me to join the Restricted Site." />
		<execute action="CPSitemembershipsViewmembershiprequestsApproved#assertTextEquals" locator-key1="APPROVED_TABLE_REPLIER_NAME" value1="Test Test" />
		<execute action="CPSitemembershipsViewmembershiprequestsApproved#assertTextEquals" locator-key1="APPROVED_TABLE_REPLY_COMMENTS" value1="You may join the Restricted Site." />
	</command>

	<command name="assertMemberListNotVisibleCP">
		<for list="${usersEmailsList}" param="userEmail" >
			<var name="userName" value="${userEmail?replace('@liferay.com', '')}" />

			<execute macro="Site#assertMemberNotVisibleCP">
				<var name="userFirstName" value="${userName}" />
				<var name="userLastName" value="${userName}" />
				<var name="userScreenName" value="${userName}" />
			</execute>
		</for>
	</command>

	<command name="assertMemberNotVisibleCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute action="CPSitememberships#assertTextNotPresent" locator-key1="USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
		<execute action="CPSitememberships#assertTextNotPresent" locator-key1="USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
	</command>

	<command name="assignDefaultSiteTeam">
		<execute action="CPSitesettings#click" locator-key1="MENU_ADVANCED_DEFAULT_USER_ASSOCIATIONS" />

		<execute action="CPSitesettingsDefaultUserAssociations#assertClick" locator-key1="TEAMS_SELECT" value1="Select" />
		<execute action="CPSitesettingsDefaultUserAssociations#selectFrame" locator-key1="TEAMS_SELECT_IFRAME" />

		<var name="key_teamName" value="${teamName}" />

		<execute action="CPSitesettingsDefaultUserAssociations#assertClick" locator-key1="TEAMS_CHOOSE_BUTTON" value1="Choose" />
		<execute action="CPSitesettingsDefaultUserAssociations#selectFrame" value1="relative=top" />

		<execute action="CPSitesettings#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />
		<execute action="CPSitesettings#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />

		<execute action="CPSitesettingsDefaultUserAssociations#assertTextEquals" locator-key1="TEAMS_SELECTED" value1="${teamName}" />
	</command>

	<command name="assignRoleCP">
		<execute action="CPSitememberships#assertClick" locator-key1="TOOLBAR_ADD_SITE_ROLES_TO" value1="Add Site Roles to" />
		<execute action="CPSitememberships#assertClick" locator-key1="ADD_SITE_ROLES_TO_MENULIST_USERS" value1="Users" />

		<var name="key_roleName" value="${roleName}" />

		<execute action="CPSitemembershipsAssignuserroles#type" locator-key1="ROLES_SEARCH_FIELD" value1="${roleName}" />
		<execute action="CPSitemembershipsAssignuserroles#click" locator-key1="ROLES_SEARCH_BUTTON" />
		<execute action="CPSitemembershipsAssignuserroles#assertTextEquals" locator-key1="ROLE_TABLE_TITLE" value1="${roleName}" />
		<execute action="CPSitemembershipsAssignuserroles#click" locator-key1="ROLE_TABLE_TITLE" value1="${roleName}" />

		<var name="key_userScreenName" value="${userScreenName}" />

		<execute action="CPSitemembershipsAssignuserrolesUser#assertClick" locator-key1="AVAILABLE" value1="Available" />
		<execute action="CPSitemembershipsAssignuserrolesUser#type" locator-key1="BASIC_SEARCH_FIELD" value1="${userScreenName}" />
		<execute action="CPSitemembershipsAssignuserrolesUser#assertClick" locator-key1="BASIC_SEARCH_BUTTON" value1="Search" />
		<execute action="CPSitemembershipsAssignuserrolesUser#assertTextEquals" locator-key1="USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute action="CPSitemembershipsAssignuserrolesUser#check" locator-key1="USER_TABLE_CHECKBOX" />
		<execute action="CPSitemembershipsAssignuserrolesUser#assertClick" locator-key1="UPDATE_ASSOCIATIONS_BUTTON" value1="Update Associations" />
		<execute action="CPSitemembershipsAssignuserrolesUser#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />

		<execute action="CPSitemembershipsAssignuserrolesUser#assertClick" locator-key1="CURRENT" value1="Current" />

		<if>
			<isset var="userMiddleName" />
			<then>
				<execute action="CPSitemembershipsAssignuserrolesUser#assertTextEquals" locator-key1="USER_TABLE_USER_NAME" value1="${userFirstName} ${userMiddleName} ${userLastName}" />
			</then>
			<else>
				<execute action="CPSitemembershipsAssignuserrolesUser#assertTextEquals" locator-key1="USER_TABLE_USER_NAME" value1="${userFirstName} ${userLastName}" />
			</else>
		</if>

		<execute action="CPSitemembershipsAssignuserrolesUser#assertTextEquals" locator-key1="USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
	</command>

	<command name="assignSiteRolesSiteOwnerUserGroupsCP">
		<var name="key_userGroupName" value="${userGroupName}" />

		<execute action="CPSitememberships#assertClick" locator-key1="NAVIGATION_USER_GROUPS" value1="User Groups" />
		<execute action="CPSitemembershipsUsergroups#type" locator-key1="SEARCH_FIELD" value1="${userGroupName}" />
		<execute action="CPSitemembershipsUsergroups#assertClick" locator-key1="SEARCH_BUTTON" value1="Search" />

		<execute action="CPSitemembershipsUsergroups#assertTextEquals" locator-key1="USER_GROUP_TABLE_NAME" value1="${userGroupName}" />
		<execute action="CPSitemembershipsUsergroups#assertClick" locator-key1="USER_GROUP_TABLE_ACTIONS" value1="Actions" />
		<execute action="CPSitemembershipsUsergroups#assertClick" locator-key1="USER_GROUP_MENULIST_ASSIGN_SITE_ROLES" value1="Assign Site Roles" />

		<execute action="CPSitemembershipsUsergroups#check" locator-key1="SITE_OWNER_CHECKBOX" />
		<execute action="CPSitemembershipsUsergroups#click" locator-key1="UPDATE_ASSOCIATIONS_BUTTON" />
		<execute action="CPSitemembershipsUsergroups#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
		<execute action="CPSitemembershipsUsergroups#assertChecked" locator-key1="SITE_OWNER_CHECKBOX" />
	</command>

	<command name="assignSiteRolesUserGroupsCP">
		<execute action="CPSitememberships#assertClick" locator-key1="TOOLBAR_ADD_SITE_ROLES_TO" value1="Add Site Roles to" />
		<execute action="CPSitememberships#assertClick" locator-key1="ADD_SITE_ROLES_TO_MENULIST_USER_GROUPS" value1="User Groups" />

		<var name="key_roleName" value="${roleName}" />

		<execute action="CPSitemembershipsAssignuserroles#type" locator-key1="ROLES_SEARCH_FIELD" value1="${roleName}" />
		<execute action="CPSitemembershipsAssignuserroles#click" locator-key1="ROLES_SEARCH_BUTTON" />
		<execute action="CPSitemembershipsAssignuserroles#assertTextEquals" locator-key1="ROLE_TABLE_TITLE" value1="${roleName}" />
		<execute action="CPSitemembershipsAssignuserroles#click" locator-key1="ROLE_TABLE_TITLE" value1="${roleName}" />

		<var name="key_userGroupName" value="${userGroupName}" />

		<execute action="CPSitemembershipsAssignuserrolesUsergroups#click" locator-key1="AVAILABLE" />
		<execute action="CPSitemembershipsAssignuserrolesUsergroups#assertTextEquals" locator-key1="USER_GROUP_TABLE_USER_NAME" value1="${userGroupName}" />
		<execute action="CPSitemembershipsAssignuserrolesUsergroups#check" locator-key1="USER_GROUP_TABLE_CHECKBOX" />
		<execute action="CPSitemembershipsAssignuserrolesUsergroups#click" locator-key1="UPDATE_ASSOCIATIONS_BUTTON" />
		<execute action="CPSitemembershipsAssignuserrolesUsergroups#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />

		<execute action="CPSitemembershipsAssignuserrolesUsergroups#click" locator-key1="CURRENT" />
		<execute action="CPSitemembershipsAssignuserrolesUsergroups#assertTextEquals" locator-key1="USER_GROUP_TABLE_USER_NAME" value1="${userGroupName}" />
	</command>

	<command name="assignUserSitesCP">
		<execute action="CPUsersandorganizations#assertClick" locator-key1="SEARCH_ALL_USERS" value1="All Users" />

		<var name="key_userScreenName" value="${userScreenName}" />

		<execute action="CPUsersandorganizationsViewusers#type" locator-key1="BASIC_SEARCH_FIELD" value1="${userScreenName}" />
		<execute action="CPUsersandorganizationsViewusers#assertClick" locator-key1="BASIC_SEARCH_BUTTON" value1="Search" />
		<execute action="CPUsersandorganizationsViewusers#assertTextEquals" locator-key1="USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute action="CPUsersandorganizationsViewusers#assertClick" locator-key1="USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute action="CPUsersandorganizationsUser#assertClick" locator-key1="MENU_USER_INFORMATION_SITES" value1="Sites" />
		<execute action="CPUsersandorganizationsUser#assertClick" locator-key1="SITES_SELECT_LINK" value1="Select" />
		<execute action="CPUsersandorganizationsUser#selectFrame" locator-key1="SITES_SELECT_IFRAME" />

		<var name="key_siteName" value="${siteName}" />

		<execute action="CPUsersandorganizationsUser#type" locator-key1="SITES_SELECT_SEARCH_FIELD" value1="${siteName}" />
		<execute action="CPUsersandorganizationsUser#keyPress" locator-key1="SITES_SELECT_SEARCH_BUTTON" value1="\\13" />
		<execute action="CPUsersandorganizationsUser#assertTextEquals" locator-key1="SITES_SELECT_TABLE_NAME" value1="${siteName}" />
		<execute action="CPUsersandorganizationsUser#assertClick" locator-key1="SITES_SELECT_CHOOSE_BUTTON" value1="Choose" />
		<execute action="CPUsersandorganizationsUser#selectFrame" value1="relative=top" />
		<execute action="CPUsersandorganizationsUser#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />
		<execute action="CPUsersandorganizationsUser#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="configureCurrentLanguagesCP">
		<var name="key_displaySettings" value="${displaySettings}" />

		<if>
			<condition action="CPSitesettings#isTextEqual" locator-key1="MENU_MISCELLANEOUS_DISPLAY_SETTINGS" value1="Display Settings" />
			<then>
				<execute action="CPSitesettings#assertClick" locator-key1="MENU_MISCELLANEOUS_DISPLAY_SETTINGS" value1="Display Settings" />
			</then>
			<else>
				<execute action="CPSitesettings#assertClick" locator-key1="MENU_MISCELLANEOUS_DISPLAY_SETTINGS_LOCALIZED" value1="${displaySettings}" />
			</else>
		</if>

		<execute action="CPSitesettingsDisplaysettings#check" locator-key1="DEFINE_DEFAULT_AND_AVAILABLE_SITE_LANGUAGES_RADIO" />

		<if>
			<isset var="currentSiteLanguages" />
			<then>
				<while>
					<condition action="CPSitesettingsDisplaysettings#isElementPresent" locator-key1="AVAILABLE_LANGUAGES_CURRENT_PRESENT" />
					<then>
						<execute action="CPSitesettingsDisplaysettings#click" locator-key1="AVAILABLE_LANGUAGES_CURRENT_PRESENT" />
						<execute action="CPSitesettingsDisplaysettings#click" locator-key1="MOVE_CURRENT_TO_AVAILABLE_BUTTON" />
					</then>
				</while>

				<for list="${currentSiteLanguages}" param="currentSiteLanguage">
					<var name="currentSiteLanguage" value="${currentSiteLanguage}" />

					<execute action="CPSitesettingsDisplaysettings#select" locator-key1="AVAILABLE_LANGUAGES_AVAILABLE_SELECT" value1="${currentSiteLanguage}" />
					<execute action="CPSitesettingsDisplaysettings#click" locator-key1="MOVE_AVAILABLE_TO_CURRENT_BUTTON" />
					<execute action="CPSitesettingsDisplaysettings#assertTextEquals" locator-key1="AVAILABLE_LANGUAGES_CURRENT_SELECT" value1="${currentSiteLanguage}" />
				</for>
			</then>
		</if>

		<if>
			<isset var="defaultSiteLanguage" />
			<then>
				<var name="defaultSiteLanguage" value="${defaultSiteLanguage}" />

				<execute action="CPSitesettingsDisplaysettings#select" locator-key1="DEFAULT_LANGUAGE_SELECT" value1="${defaultSiteLanguage}" />
			</then>
		</if>

		<execute action="CPSitesettingsDisplaysettings#click" locator-key1="SAVE_BUTTON" />

		<if>
			<isset var="localizedSuccessMessage" />
			<then>
				<var name="localizedSuccessMessage" value="${localizedSuccessMessage}" />

				<execute action="CPSitesettingsDisplaysettings#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="${localizedSuccessMessage}" />
			</then>
			<else>
				<execute action="CPSitesettingsDisplaysettings#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
			</else>
		</if>
	</command>

	<command name="deactivateOrganizationSiteCP">
		<var name="key_siteName" value="${siteName}" />

		<execute action="CPSites#type" locator-key1="BASIC_SEARCH_FIELD" value1="${siteName}" />
		<execute action="CPSites#assertClick" locator-key1="BASIC_SEARCH_BUTTON" value1="Search" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_NAME" value1="${siteName}" />
		<execute action="CPSites#click" locator-key1="SITE_TABLE_ACTIONS" />
		<execute action="CPSites#assertClick" locator-key1="SITE_MENULIST_DEACTIVATE" value1="Deactivate" />
		<execute action="CPSites#confirm" locator-key1="CONFIRMATION" value1="Are you sure you want to deactivate this?" />

		<if>
			<equals arg1="${successMessage}" arg2="true" />
			<then>
				<execute action="CPSites#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
			</then>
			<else>
				<execute action="CPSites#assertTextEquals" locator-key1="ERROR_MESSAGE_1" value1="Your request failed to complete." />
				<execute action="CPSites#assertTextEquals" locator-key1="ERROR_MESSAGE_2" value1="You cannot delete this site because you are currently accessing this site." />
			</else>
		</if>
	</command>

	<command name="deleteCP">
		<var name="key_siteName" value="${siteName}" />

		<execute action="CPSites#type" locator-key1="BASIC_SEARCH_FIELD" value1="Name" />
		<execute action="CPSites#assertClick" locator-key1="BASIC_SEARCH_BUTTON" value1="Search" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_NAME" value1="${siteName}" />
		<execute action="CPSites#click" locator-key1="SITE_TABLE_ACTIONS" />
		<execute action="CPSites#assertClick" locator-key1="SITE_MENULIST_DELETE" value1="Delete" />
		<execute action="CPSites#confirm" locator-key1="CONFIRMATION" value1="Are you sure you want to delete this? It will be deleted immediately." />

		<execute action="CPSites#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
		<execute action="CPSites#assertTextEquals" locator-key1="INFO_MESSAGE" value1="No sites were found." />
		<execute action="CPSites#assertTextNotPresent" value1="${siteName}" />
	</command>

	<command name="editCP">
		<execute action="CPSitesettings#assertTextEquals" locator-key1="NAME_FIELD" value1="${siteName}" />
		<execute action="CPSitesettings#type" locator-key1="NAME_FIELD" value1="${siteNameEdit}" />
		<execute action="CPSitesettings#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />

		<execute action="CPSitesettings#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
		<execute action="CPSitesettings#assertTextEquals" locator-key1="NAME_FIELD" value1="${siteNameEdit}" />
	</command>

	<command name="editFriendlyURLCP">
		<execute action="CPSitesettings#assertClick" locator-key1="MENU_BASIC_INFORMATION_SITE_URL" value1="Site URL" />

		<execute action="CPSitesettingsSiteURL#assertTextEquals" locator-key1="SITE_URL_FRIENDLY_URL_LABEL" value1="Friendly URL" />
		<execute action="CPSitesettingsSiteURL#type" locator-key1="SITE_URL_FRIENDLY_URL_FIELD" value1="${siteFriendlyURLEdit}" />
		<execute action="CPSitesettingsSiteURL#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />

		<if>
			<equals arg1="${friendlyURLInvalid}" arg2="true" />
			<then>
				<execute action="CPSitesettingsSiteURL#assertTextEquals" locator-key1="ERROR_MESSAGE" value1="Your request failed to complete." />
				<execute action="CPSitesettingsSiteURL#assertTextEquals" locator-key1="SITE_URL_ERROR_MESSAGE" value1="The friendly URL has too many slashes." />
				<execute action="CPSitesettingsSiteURL#assertTextEquals" locator-key1="SITE_URL_FRIENDLY_URL_FIELD" value1="${siteFriendlyURL}" />
			</then>
			<else>
				<execute action="CPSitesettingsSiteURL#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
			</else>
		</if>
	</command>

	<command name="exportSite">
		<var name="key_siteName" value="${siteName}" />

		<execute action="CPSites#assertClick" locator-key1="SITE_TABLE_NAME" value1="${siteName}" />

		<execute action="CPSitepages#assertClick" locator-key1="TOOLBAR_EXPORT" value1="Export" />

		<execute action="CPSites#selectFrame" locator-key1="CONFIGURATION_FRAME" />
		<execute action="CPSites#type" locator-key1="EXPORT_FILE_NAME" value1="${fileName}" />
		<execute action="CPSites#assertClick" locator-key1="CONFIGURATION_EXPORT_BUTTON" value1="Export" />
		<execute action="CPSites#pause" locator1="5000" />
		<execute action="CPSites#assertClick" locator-key1="DOWNLOAD_FILE" value1="${fileDownload}" />
	</command>

	<command name="gotoManageSitesTemplatesViaAddDropdown">
		<execute action="CPSites#assertClick" locator-key1="ADD" value1="Add" />
		<execute action="CPSites#assertClick" locator-key1="ADD_MANAGE_SITES_TEMPLATES" value1="Manage Sites Templates" />
	</command>

	<command name="importSite">
		<var name="key_siteName" value="${siteName}" />

		<execute action="CPSites#assertClick" locator-key1="SITE_TABLE_NAME" value1="${siteName}" />

		<execute action="CPSitepages#assertClick" locator-key1="TOOLBAR_IMPORT" value1="Import" />

		<execute action="CPSites#selectFrame" locator-key1="IMPORT_FRAME" />
		<execute action="CPSites#assertClick" locator-key1="SELECT_FILE" value1="Select File" />

		<execute action="OS#sikuliClick" locator-key1="FILE_DIALOG_BOX_TYPE_FILE_NAME_ICON_PNG" />
		<execute action="OS#sikuliType" locator-key1="FILE_DIALOG_BOX_FILE_NAME_FIELD_PNG" value1="${larFileName}" />
		<execute action="OS#sikuliClick" locator-key1="FILE_DIALOG_BOX_TEST_LAR_FILE_ICON_PNG" />
		<execute action="OS#sikuliClick" locator-key1="FILE_DIALOG_BOX_OPEN_BUTTON_PNG" />

		<execute action="CPSites#assertClick" locator-key1="IMPORT_CONTINUE" value1="Continue" />
		<execute action="CPSites#assertClick" locator-key1="IMPORT_CONTINUE_2" value1="Continue" />
		<execute action="CPSites#assertClick" locator-key1="IMPORT" value1="Import" />
		<execute action="CPSites#pause" locator1="2000" />
	</command>

	<command name="inactivateCP">
		<execute action="CPSitesettings#assertTextEquals" locator-key1="NAME_FIELD" value1="${siteName}" />
		<execute action="CPSitesettings#assertTextEquals" locator-key1="ACTIVE_LABEL" value1="Active" />
		<execute action="CPSitesettings#uncheck" locator-key1="ACTIVE_CHECKBOX" />
		<execute action="CPSitesettings#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />
		<execute action="CPSitesettings#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="joinViaMySitesPG">
		<var name="key_siteName" value="${siteName}" />

		<execute action="PGMysites#assertTextEquals" locator-key1="INFO_MESSAGE" value1="No sites were found." />
		<execute action="PGMysites#assertClick" locator-key1="NAVIGATION_AVAILABLE_SITES" value1="Available Sites" />
		<execute action="PGMysitesAvailablesites#type" locator-key1="SEARCH_FIELD" value1="${siteName}" />
		<execute action="PGMysitesAvailablesites#assertClick" locator-key1="SEARCH_BUTTON" value1="Search" />

		<if>
			<equals arg1="${membershipType}" arg2="Private" />
			<then>
				<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="INFO_MESSAGE" value1="No sites were found." />
			</then>
			<elseif>
				<equals arg1="${membershipType}" arg2="Restricted" />
				<then>
					<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME" value1="${siteName}" />
					<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME_MEMBERS" value1="1" />
					<execute action="PGMysitesAvailablesites#assertClick" locator-key1="SITE_TABLE_REQUEST_MEMBERSHIP" value1="Request Membership" />
					<execute action="PGMysitesAvailablesitesRequestmembership#type" locator-key1="COMMENTS_FIELD" value1="Please allow me to join the Restricted Site." />
					<execute action="PGMysitesAvailablesitesRequestmembership#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />
					<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
					<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SUCCESS_MESSAGE_2" value1="Your request was sent. You will receive a reply by email." />
					<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_MEMBERSHIP_REQUESTED" value1="Membership Requested" />
				</then>
			</elseif>
			<else>
				<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME" value1="${siteName}" />
				<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME_MEMBERS" value1="1" />
				<execute action="PGMysitesAvailablesites#assertClick" locator-key1="SITE_TABLE_JOIN_SITE_NAME" value1="Join" />
				<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
				<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME" value1="${siteName}" />
				<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME_MEMBERS" value1="2" />
				<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_LEAVE_SITE_NAME" value1="Leave" />
			</else>
		</if>
	</command>

	<command name="leaveViaMySitesPG">
		<var name="key_siteName" value="${siteName}" />

		<execute action="PGMysites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME" value1="${siteName}" />
		<execute action="PGMysites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME_MEMBERS" value1="2" />
		<execute action="PGMysites#assertClick" locator-key1="NAVIGATION_AVAILABLE_SITES" value1="Available Sites" />
		<execute action="PGMysitesAvailablesites#type" locator-key1="SEARCH_FIELD" value1="${siteName}" />
		<execute action="PGMysitesAvailablesites#assertClick" locator-key1="SEARCH_BUTTON" value1="Search" />
		<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME" value1="${siteName}" />
		<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME_MEMBERS" value1="2" />
		<execute action="PGMysitesAvailablesites#assertClick" locator-key1="SITE_TABLE_LEAVE_SITE_NAME" value1="Leave" />
		<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
		<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME" value1="${siteName}" />
		<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME_MEMBERS" value1="1" />
		<execute action="PGMysitesAvailablesites#assertTextEquals" locator-key1="SITE_TABLE_JOIN_SITE_NAME" value1="Join" />
	</command>

	<command name="manageMembershipOptions">
		<execute macro="Page#gotoConfigurationCP">
			<var name="portletName" value="Site Settings" />
		</execute>

		<if>
			<equals arg1="${selectMembershipType}" arg2="true" />
			<then>
				<execute action="CPSitesettings#assertTextEquals" locator-key1="MEMBERSHIP_OPTIONS_MEMBERSHIP_TYPE_LABEL" value1="Membership Type" />
				<execute action="CPSitesettings#select" locator-key1="MEMBERSHIP_OPTIONS_MEMBERSHIP_TYPE" value1="${membershipType}" />
			</then>
		</if>

		<if>
			<equals arg1="${allowManualMembershipManagement}" arg2="true" />
			<then>
				<execute action="CPSitesEdit#check" locator-key1="MEMBERSHIP_OPTIONS_MEMBERSHIP_MANAGEMENT_CHECKBOX" />
			</then>
			<elseif>
				<equals arg1="${allowManualMembershipManagement}" arg2="false" />
				<then>
					<execute action="CPSitesEdit#uncheck" locator-key1="MEMBERSHIP_OPTIONS_MEMBERSHIP_MANAGEMENT_CHECKBOX" />
				</then>
			</elseif>
		</if>

		<execute action="CPSitesettings#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />
		<execute action="CPSitesettings#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="removeMemberCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute action="CPSitememberships#type" locator-key1="USER_SEARCH_FIELD" value1="${userScreenName}" />
		<execute action="CPSitememberships#assertClick" locator-key1="USER_SEARCH_BUTTON" value1="Search" />

		<if>
			<isset var="userMiddleName" />
			<then>
				<execute action="CPSitememberships#assertTextEquals" locator-key1="USER_TABLE_NAME" value1="${userFirstName} ${userMiddleName} ${userLastName}" />
			</then>
			<else>
				<execute action="CPSitememberships#assertTextEquals" locator-key1="USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
			</else>
		</if>

		<execute action="CPSitememberships#assertTextEquals" locator-key1="USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute action="CPSitememberships#assertClick" locator-key1="USER_TABLE_ACTIONS" value1="Actions" />
		<execute action="CPSitememberships#assertClick" locator-key1="USER_MENULIST_REMOVE_MEMBERSHIP" value1="Remove Membership" />

		<execute action="CPSitemembershipsAddmembers#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="removeSiteRolesSiteOwnerUserGroupsCP">
		<var name="key_userGroupName" value="${userGroupName}" />

		<execute action="CPSitememberships#assertClick" locator-key1="NAVIGATION_USER_GROUPS" value1="User Groups" />
		<execute action="CPSitemembershipsUsergroups#type" locator-key1="SEARCH_FIELD" value1="${userGroupName}" />
		<execute action="CPSitemembershipsUsergroups#assertClick" locator-key1="SEARCH_BUTTON" value1="Search" />

		<execute action="CPSitemembershipsUsergroups#assertTextEquals" locator-key1="USER_GROUP_TABLE_NAME" value1="${userGroupName}" />
		<execute action="CPSitemembershipsUsergroups#assertClick" locator-key1="USER_GROUP_TABLE_ACTIONS" value1="Actions" />
		<execute action="CPSitemembershipsUsergroups#assertClick" locator-key1="USER_GROUP_MENULIST_ASSIGN_SITE_ROLES" value1="Assign Site Roles" />

		<execute action="CPSitemembershipsUsergroups#uncheck" locator-key1="SITE_OWNER_CHECKBOX" />
		<execute action="CPSitemembershipsUsergroups#click" locator-key1="UPDATE_ASSOCIATIONS_BUTTON" />
		<execute action="CPSitemembershipsUsergroups#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
		<execute action="CPSitemembershipsUsergroups#assertNotChecked" locator-key1="SITE_OWNER_CHECKBOX" />
	</command>

	<command name="searchCP">
		<var name="key_siteName" value="${siteName}" />

		<execute action="CPSites#type" locator-key1="BASIC_SEARCH_FIELD" value1="${siteName}" />
		<execute action="CPSites#assertClick" locator-key1="BASIC_SEARCH_BUTTON" value1="Search" />
		<execute action="CPSites#assertElementPresent" locator-key1="SITE_TABLE_CHECKBOX" value1="${siteName}" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_NAME" value1="${siteName}" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_TYPE" value1="${siteType}" />

		<if>
			<equals arg1="${siteMember}" arg2="Organization" />
			<then>
				<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_MEMBERS_ORGS" value1="1 ${siteMember}" />
			</then>
			<elseif>
				<equals arg1="${siteMember}" arg2="User" />
				<then>
					<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_MEMBERS_USERS" value1="1 ${siteMember}" />
				</then>
			</elseif>
			<else>
				<fail message="Invalid var siteMember. Must be (Organization|User)." />
			</else>
		</if>

		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_ACTIVE" value1="Yes" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_TAGS" value1="" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_ACTIONS" value1="Actions" />
	</command>

	<command name="searchMemberCP">
		<if>
			<isset var="userScreenNameSearchValue" />
			<then>
				<execute action="CPSitememberships#type" locator-key1="USER_SEARCH_FIELD" value1="${userScreenNameSearchValue}" />
			</then>
			<elseif>
				<isset var="userFirstNameSearchValue" />
				<then>
					<execute action="CPSitememberships#type" locator-key1="USER_SEARCH_FIELD" value1="${userFirstNameSearchValue}" />
				</then>
			</elseif>
			<elseif>
				<isset var="userLastNameSearchValue" />
				<then>
					<execute action="CPSitememberships#type" locator-key1="USER_SEARCH_FIELD" value1="${userLastNameSearchValue}" />
				</then>
			</elseif>
			<else>
				<execute action="CPSitememberships#type" locator-key1="USER_SEARCH_FIELD" value1="${userEmailAddressSearchValue}" />
			</else>
		</if>

		<execute action="CPSitememberships#assertClick" locator-key1="USER_SEARCH_BUTTON" value1="Search" />

		<execute macro="Site#viewMemberCP">
			<var name="userFirstName" value="${userFirstName}" />
			<var name="userLastName" value="${userLastName}" />
			<var name="userScreenName" value="${userScreenName}" />
		</execute>
	</command>

	<command name="selectPageType">
		<execute action="CPSitesettings#assertTextEquals" locator-key1="PAGES_LABEL" value1="Pages" />

		<if>
			<equals arg1="${selectPublicPages}" arg2="true" />
			<then>
				<execute action="CPSitesettings#assertClick" locator-key1="PAGES_PUBLIC_PAGES_LABEL" value1="Public Pages" />
				<execute action="CPSitesettings#select" locator-key1="PAGES_PUBLIC_PAGES_SITE_TEMPLATE_SELECT" value1="${siteTemplate}" />
			</then>
			<elseif>
				<equals arg1="${selectPrivatePages}" arg2="true" />
				<then>
					<execute action="CPSitesettings#assertClick" locator-key1="PAGES_PRIVATE_PAGES_LABEL" value1="Private Pages" />
					<execute action="CPSitesettings#select" locator-key1="PAGES_PRIVATE_PAGES_SITE_TEMPLATE_SELECT" value1="${siteTemplate}" />
				</then>
			</elseif>
		</if>

		<execute action="CPSitesettings#assertClick" locator-key1="SAVE_BUTTON" value1="Save" />
		<execute action="CPSitesettings#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
	</command>

	<command name="selectParentSite">
		<execute action="CPSitesettings#assertClick" locator-key1="PARENT_SITE_SELECT" value1="Select" />

		<var name="key_parentSiteName" value="${parentSiteName}" />

		<execute action="CPSitesAddSelectSite#selectFrame" locator-key1="SELECT_SITE_IFRAME" />
		<execute action="CPSitesAddSelectSite#type" locator-key1="BASIC_SEARCH_FIELD" value1="${parentSiteName}" />
		<execute action="CPSitesAddSelectSite#assertClick" locator-key1="BASIC_SEARCH_BUTTON" value1="Search" />

		<if>
			<equals arg1="${chooseButtonAvailable}" arg2="false" />
			<then>
				<execute action="CPSitesAddSelectSite#assertTextNotPresent" locator-key1="SITES_TABLE_NAME" value1="${parentSiteName}" />
				<execute action="CPSitesAddSelectSite#assertTextNotPresent" locator-key1="SITES_TABLE_CHOOSE_BUTTON" value1="Choose" />
				<execute action="CPSitesAddSelectSite#assertTextEquals" locator-key1="INFO_MESSAGE" value1="No sites were found." />
			</then>
		</if>

		<execute action="CPSitesAddSelectSite#close" locator1="null" />
		<execute action="CPSitesAdd#selectFrame" value1="relative=top" />
	</command>

	<command name="tearDownCP">
		<execute macro="Page#gotoCP">
			<var name="portletName" value="Sites" />
		</execute>

		<execute action="CPSites#type" locator-key1="BASIC_SEARCH_FIELD" value1="Name" />
		<execute action="CPSites#assertClick" locator-key1="BASIC_SEARCH_BUTTON" value1="Search" />

		<while>
			<condition action="CPSites#isElementPresent" locator-key1="SITE_TABLE_ACTIONS_GENERIC" />
			<then>
				<execute action="CPSites#click" locator-key1="SITE_TABLE_ACTIONS_GENERIC" />
				<execute action="CPSites#assertClick" locator-key1="SITE_MENULIST_DELETE" value1="Delete" />
				<execute action="CPSites#confirm" locator-key1="CONFIRMATION" value1="Are you sure you want to delete this? It will be deleted immediately." />
				<execute action="CPSites#assertTextEquals" locator-key1="SUCCESS_MESSAGE" value1="Your request completed successfully." />
			</then>
		</while>
	</command>

	<command name="viewCannotAdd">
		<execute action="CPSites#assertClick" locator-key1="ADD" value1="Add" />
		<execute action="CPSites#assertClick" locator-key1="ADD_BLANK_SITE" value1="Blank Site" />
		<execute action="CPSitesAdd#type" locator-key1="DETAILS_NAME" value1="${siteName}" />
		<execute action="CPSitesAdd#click" locator-key1="MENU_SAVE" value1="Save" />

		<if>
			<equals arg1="${siteNameInvalid}" arg2="Duplicate" />
			<then>
				<execute action="CPSitesAdd#assertTextEquals" locator-key1="ERROR_MESSAGE_1" value1="Your request failed to complete." />
				<execute action="CPSitesAdd#assertTextEquals" locator-key1="ERROR_MESSAGE_2" value1="Please enter a unique name." />
			</then>
			<elseif>
				<equals arg1="${siteNameInvalid}" arg2="Null" />
				<then>
					<execute action="CPSitesAdd#assertTextEquals" locator-key1="DETAILS_REQUIRED_INFO_MESSAGE" value1="This field is required." />
				</then>
			</elseif>
			<else>
				<execute action="CPSitesAdd#assertTextEquals" locator-key1="ERROR_MESSAGE_1" value1="Your request failed to complete." />
				<execute action="CPSitesAdd#assertTextEquals" locator-key1="ERROR_MESSAGE_2" value1="Please enter a valid name." />
			</else>
		</if>
	</command>

	<command name="viewChildChildCP">
		<var name="key_childSiteName" value="${childSiteName}" />

		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_NAME" value1="${childSiteName}" />
		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_TYPE" value1="${siteType}" />
		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_ACTIVE" value1="Yes" />
		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_TAGS" value1="" />
		<execute action="CPSitesChild#assertElementPresent" locator-key1="SITE_TABLE_ACTIONS" />
		<execute action="CPSitesChild#assertClick" locator-key1="SITE_TABLE_CHILD_SITE" value1="This site has 1 child site." />

		<var name="key_childChildSiteName" value="${childChildSiteName}" />
		<var name="key_childSiteName" value="${childSiteName}" />

		<execute action="CPSitesChildChild#assertTextEquals" locator-key1="SITE_NAME" value1="${childSiteName}" />
		<execute action="CPSitesChildChild#assertTextEquals" locator-key1="SITE_TABLE_NAME" value1="${childChildSiteName}" />
		<execute action="CPSitesChildChild#assertTextEquals" locator-key1="SITE_TABLE_TYPE" value1="${siteType}" />
		<execute action="CPSitesChildChild#assertTextEquals" locator-key1="SITE_TABLE_MEMBERS_USERS" value1="1 User" />
		<execute action="CPSitesChildChild#assertTextEquals" locator-key1="SITE_TABLE_ACTIVE" value1="Yes" />
		<execute action="CPSitesChildChild#assertTextEquals" locator-key1="SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute action="CPSitesChildChild#assertTextEquals" locator-key1="SITE_TABLE_TAGS" value1="" />
		<execute action="CPSitesChild#assertElementPresent" locator-key1="SITE_TABLE_ACTIONS" />
	</command>

	<command name="viewChildCP">
		<var name="key_siteName" value="${siteName}" />

		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_NAME" value1="${siteName}" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_TYPE" value1="${siteType}" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_ACTIVE" value1="Yes" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_TAGS" value1="" />
		<execute action="CPSitesChild#assertElementPresent" locator-key1="SITE_TABLE_ACTIONS" />
		<execute action="CPSites#assertClick" locator-key1="SITE_TABLE_CHILD_SITE" value1="This site has 1 child site." />

		<var name="key_childSiteName" value="${childSiteName}" />
		<var name="key_siteName" value="${siteName}" />

		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_NAME" value1="${siteName}" />
		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_NAME" value1="${childSiteName}" />
		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_TYPE" value1="${siteType}" />
		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_MEMBERS_USERS" value1="1 User" />
		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_ACTIVE" value1="Yes" />
		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute action="CPSitesChild#assertTextEquals" locator-key1="SITE_TABLE_TAGS" value1="" />
		<execute action="CPSitesChild#assertElementPresent" locator-key1="SITE_TABLE_ACTIONS" />
	</command>

	<command name="viewCP">
		<var name="key_siteName" value="${siteName}" />

		<execute action="CPSites#assertElementPresent" locator-key1="SITE_TABLE_CHECKBOX" value1="${siteName}" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_NAME" value1="${siteName}" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_TYPE" value1="${siteType}" />

		<if>
			<equals arg1="${siteMember}" arg2="Organization" />
			<then>
				<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_MEMBERS_ORGS" value1="1 ${siteMember}" />
			</then>
			<elseif>
				<equals arg1="${siteMember}" arg2="User" />
				<then>
					<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_MEMBERS_USERS" value1="1 ${siteMember}" />
				</then>
			</elseif>
			<else>
				<fail message="Invalid var siteMember. Must be (Organization|User)." />
			</else>
		</if>

		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_ACTIVE" value1="Yes" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_PENDING_REQUESTS" value1="" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_TABLE_TAGS" value1="" />
		<execute action="CPSites#assertElementPresent" locator-key1="SITE_TABLE_ACTIONS" />
	</command>

	<command name="viewCurrentLanguagesCP">
		<var name="key_displaySettings" value="${displaySettings}" />

		<execute action="CPSitesettings#assertClick" locator-key1="MENU_MISCELLANEOUS_DISPLAY_SETTINGS_LOCALIZED" value1="${displaySettings}" />

		<execute action="CPSitesettingsDisplaysettings#check" locator-key1="DEFINE_DEFAULT_AND_AVAILABLE_SITE_LANGUAGES_RADIO" value1="Display Settings" />

		<for list="${currentSiteLanguages}" param="currentSiteLanguage">
			<var name="currentSiteLanguage" value="${currentSiteLanguage}" />

			<execute action="CPSitesettingsDisplaysettings#assertTextEquals" locator-key1="AVAILABLE_LANGUAGES_CURRENT_SELECT" value1="${currentSiteLanguage}" />
		</for>

		<for list="${availableSiteLanguages}" param="availableSiteLanguage">
			<var name="availableSiteLanguage" value="${availableSiteLanguage}" />

			<execute action="CPSitesettingsDisplaysettings#assertTextEquals" locator-key1="AVAILABLE_LANGUAGES_AVAILABLE_SELECT" value1="${availableSiteLanguage}" />
		</for>

		<if>
			<isset var="defaultSiteLanguage" />
			<then>
				<var name="defaultSiteLanguage" value="${defaultSiteLanguage}" />

				<execute action="CPSitesettingsDisplaysettings#select" locator-key1="DEFAULT_LANGUAGE_SELECT" value1="${defaultSiteLanguage}" />
			</then>
		</if>
	</command>

	<command name="viewGlobalLandingDefault">
		<var name="key_portletName" value="${portletName}" />

		<execute action="Home#assertElementPresent" locator-key1="SCOPE_SELECTOR_SITE_NAME" value1="${siteName}" />
		<execute action="Home#assertTextNotPresent" value1="You do not have the roles required to access this portlet" />
		<execute action="Home#assertTextEquals" locator-key1="SITE_ADMINISTRATION_NAVIGATION" value1="${portletName}" />
	</command>

	<command name="viewLimitMembershipParentSiteCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute action="CPSitememberships#assertClick" locator-key1="TOOLBAR_ADD_MEMBERS" value1="Add Members" />
		<execute action="CPSitememberships#assertClick" locator-key1="ADD_MEMBERS_MENULIST_USER" value1="User" />
		<execute action="CPSitemembershipsAddmembers#assertTextNotPresent" locator-key1="USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
		<execute action="CPSitemembershipsAddmembers#assertTextNotPresent" locator-key1="USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
	</command>

	<command name="viewMemberCP">
		<var name="key_userScreenName" value="${userScreenName}" />

		<execute action="CPSitememberships#assertTextEquals" locator-key1="USER_TABLE_NAME" value1="${userFirstName} ${userLastName}" />
		<execute action="CPSitememberships#assertTextEquals" locator-key1="USER_TABLE_SCREEN_NAME" value1="${userScreenName}" />
		<execute action="CPSitememberships#assertTextEquals" locator-key1="USER_TABLE_ACTIONS" value1="Actions" />
	</command>

	<command name="viewMemberListCP">
		<for list="${usersEmailsList}" param="userEmail" >
			<var name="userName" value="${userEmail?replace('@liferay.com', '')}" />

			<execute macro="Site#viewMemberCP">
				<var name="userFirstName" value="${userName}" />
				<var name="userLastName" value="${userName}" />
				<var name="userScreenName" value="${userName}" />
			</execute>
		</for>
	</command>

	<command name="viewMemberOrganizationCP">
		<var name="key_orgName" value="${orgName}" />

		<execute action="CPSitememberships#assertClick" locator-key1="NAVIGATION_ORGANIZATIONS" value1="Organizations" />

		<execute action="CPSitememberships#assertTextEquals" locator-key1="ORGANIZATION_TABLE_NAME" value1="${orgName}" />
		<if>
			<equals arg1="${toolTip}" arg2="true" />
			<then>
				<execute action="CPSitememberships#assertTextEquals" locator-key1="ORGANIZATION_TABLE_TOOLTIP" value1="This site belongs to ${orgName} which is an organization" />
			</then>
		</if>
	</command>

	<command name="viewMySitesViaMySitesPG">
		<var name="key_siteName" value="${siteName}" />

		<if>
			<equals arg1="${organizationSite}" arg2="true" />
			<then>
				<execute action="Dockbar#assertClick" locator-key1="MY_SITES" value1="My Sites" />
				<execute action="Dockbar#assertTextNotPresent" locator-key1="MY_SITES_PUBLIC_SITE" value1="${siteName}" />
			</then>
			<else>
				<execute action="PGMysites#assertTextEquals" locator-key1="NAVIGATION_MY_SITES" value1="My Sites" />
				<execute action="PGMysites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME" value1="${siteName}" />
				<execute action="PGMysites#assertTextEquals" locator-key1="SITE_TABLE_SITE_NAME_MEMBERS" value1="2" />
				<execute action="PGMysites#assertTextEquals" locator-key1="SITE_TABLE_SITE_ACTIONS" value1="Actions" />
			</else>
		</if>
	</command>

	<command name="viewPrivateVirtaulHostUrlUserLoginRedirect">
		<execute action="PGLogin#assertTextEquals" locator-key1="EMAIL_ADDRESS_FIELD" value1="${userEmailAddress}" />
		<execute action="PGLogin#assertElementPresent" locator-key1="PASSWORD_FIELD" />
	</command>

	<command name="viewSiteAdminPermissionsCP">
		<var name="key_siteName" value="${siteName}" />

		<execute action="CPSites#type" locator-key1="BASIC_SEARCH_FIELD" value1="${siteName}" />
		<execute action="CPSites#assertClick" locator-key1="BASIC_SEARCH_BUTTON" value1="Search" />
		<execute action="CPSites#click" locator-key1="SITE_TABLE_ACTIONS" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_MENULIST_SITE_ADMINISTRATION" value1="Site Administration" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_MENULIST_ADD_CHILD_SITE" value1="Add Child Site" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_MENULIST_LEAVE" value1="Leave" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_MENULIST_DEACTIVATE" value1="Deactivate" />
		<execute action="CPSites#assertTextEquals" locator-key1="SITE_MENULIST_DELETE" value1="Delete" />
	</command>

	<command name="viewSiteClonedFromSiteTemplateCP">
		<var name="key_siteTemplateName" value="${siteTemplateName}" />

		<execute action="CPSitesettings#assertClick" locator-key1="MENU_BASIC_INFORMATION_SITE_TEMPLATE" value1="Site Template" />

		<if>
			<equals arg1="${clonedFromTemplate}" arg2="true" />
			<then>
				<execute action="CPSitesettingsSitetemplate#assertTextEquals" locator-key1="SITE_CLONED_FROM_TEMPLATE_MESSAGE" value1="This site was cloned from site template ${siteTemplateName}" />
			</then>
			<else>
				<execute action="CPSitesettingsSitetemplate#assertTextEquals" locator-key1="SITE_NOT_CLONED_FROM_TEMPLATE_MESSAGE" value1="This site is not related to a site template." />
			</else>
		</if>
	</command>

	<command name="viewSiteFriendlyURLPG">
		<execute action="Home#assertTextEquals" locator-key1="BREADCRUMB_1" value1="${siteName}" />
		<execute action="Home#assertTextEquals" locator-key1="BREADCRUMB_2" value1="${sitePageName}" />
		<execute action="Home#assertTextEquals" locator-key1="SITE_NAME" value1="${siteName}" />
		<execute action="Home#assertLocation" value1="${sitePageURL}" />
	</command>

	<command name="viewSiteNotClonedFromSiteTemplateCP">
		<var name="key_siteTemplateName" value="${siteTemplateName}" />

		<execute action="CPSitesettings#assertClick" locator-key1="MENU_BASIC_INFORMATION_SITE_TEMPLATE" value1="Site Template" />

		<execute action="CPSitesettingsSitetemplate#assertTextEquals" locator-key1="SITE_CLONED_FROM_TEMPLATE_MESSAGE" value1="Site Template" />
	</command>

	<command name="viewSitePG">
		<execute macro="Page#gotoPG">
			<var name="pageName" value="${sitePageName}" />
		</execute>

		<execute action="Home#assertTextEquals" locator-key1="BREADCRUMB_1" value1="${siteName}" />
		<execute action="Home#assertTextEquals" locator-key1="BREADCRUMB_2" value1="${childSiteName}" />
		<execute action="Home#assertTextEquals" locator-key1="BREADCRUMB_3" value1="${sitePageName}" />
		<execute action="Home#assertTextEquals" locator-key1="SITE_NAME" value1="${childSiteName}" />
		<execute action="Home#assertLocation" value1="${sitePageURL}" />
	</command>

	<command name="viewVirtualHostsURLPG">
		<var name="key_pageName" value="${sitePageName}" />

		<execute action="Home#assertTextEquals" locator-key1="SITE_NAME" value1="${siteName}" />
		<execute action="Home#assertTextEquals" locator-key1="PAGE" value1="${sitePageName}" />
		<execute action="Home#assertTextEquals" locator-key1="BREADCRUMB_1" value1="${siteName}" />
		<execute action="Home#assertTextEquals" locator-key1="BREADCRUMB_2" value1="${sitePageName}" />

		<execute action="Home#assertLocation" value1="${sitePageURL}" />
	</command>
</definition>