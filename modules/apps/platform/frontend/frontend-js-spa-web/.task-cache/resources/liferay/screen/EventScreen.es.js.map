{"version":3,"sources":["/source/EventScreen.es.js"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAQM;;;AACL,WADK,WACL,GAAc;yBADT,aACS;;gDACb,wBADa;;AAGb,SAAK,SAAL,GAAiB,KAAjB,CAHa;AAIb,SAAK,OAAL,GAAe,QAAQ,WAAR,CAAoB,0CAApB,CAJF;;GAAd;;AADK,wBAQL,6BAAU;AACT,yBAAM,OAAN,YADS;;AAGT,WAAQ,IAAR,CACC,eADD,EAEC;AACC,SAAK,QAAQ,GAAR,CAAY,GAAZ;AACL,YAAQ,IAAR;IAJF,EAHS;;;AARL,wBAoBL,+BAAW;AACV,yBAAM,QAAN,YADU;;AAGV,WAAQ,IAAR,CACC,gBADD,EAEC;AACC,SAAK,QAAQ,GAAR,CAAY,GAAZ;AACL,YAAQ,IAAR;IAJF,EAHU;;;AApBN,wBAgCL,mCAAa;AACZ,yBAAM,UAAN,YADY;;AAGZ,WAAQ,IAAR,CACC,kBADD,EAEC;AACC,SAAK,QAAQ,GAAR,CAAY,GAAZ;AACL,YAAQ,IAAR;IAJF,EAHY;;;AAhCR,wBA4CL,qBAAK,UAAU;;;AACd,YAAS,IAAT,CAAc,SAAd,GAA0B,KAAK,eAAL,CAAqB,aAArB,CAAmC,MAAnC,EAA2C,SAA3C,CADZ;;AAGd,iBAAI,UAAJ,CAAe,SAAS,IAAT,EAAe,qBAA9B,EAHc;;AAKd,UAAO,4BAAmB,OAAnB,CAA2B,gBAAM,gBAAN,EAA3B,EACL,IADK,CACA,sBAAM,IAAN,YAAW,QAAX,CADA,EAEL,IAFK,CAEA,YAAM;AACX,YAAQ,IAAR,CACC,YADD,EAEC;AACC,UAAK,QAAQ,GAAR,CAAY,GAAZ;AACL,mBAFD;KAFD,EADW;IAAN,CAFP,CALc;;;AA5CV,wBA8DL,qBAAK,MAAM;;;AACV,UAAO,sBAAM,IAAN,YAAW,IAAX,EACL,IADK,CACA,UAAC,OAAD,EAAa;AAClB,YAAQ,IAAR,CACC,YADD,EAEC;AACC,UAAK,QAAQ,GAAR,CAAY,GAAZ;AACL,cAAS,OAAT;AACA,mBAHD;KAFD,EADkB;;AAUlB,WAAO,OAAP,CAVkB;IAAb,CADP,CADU;;;SA9DN;;;;mBA+ES","sourcesContent":["'use strict';\r\n\r\nimport dom from 'metal-dom/src/dom'\r\nimport HtmlScreen from 'senna/src/screen/HtmlScreen'\r\nimport globalEval from 'metal-dom/src/globalEval';\r\nimport { CancellablePromise } from 'metal-promise/src/promise/Promise';\r\nimport Utils from '../util/Utils.es';\r\n\r\nclass EventScreen extends HtmlScreen {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.cacheable = false;\r\n\t\tthis.timeout = Liferay.PropsValues.JAVASCRIPT_SINGLE_PAGE_APPLICATION_TIMEOUT;\r\n\t}\r\n\r\n\tdispose() {\r\n\t\tsuper.dispose();\r\n\r\n\t\tLiferay.fire(\r\n\t\t\t'screenDispose',\r\n\t\t\t{\r\n\t\t\t\tapp: Liferay.SPA.app,\r\n\t\t\t\tscreen: this\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tactivate() {\r\n\t\tsuper.activate();\r\n\r\n\t\tLiferay.fire(\r\n\t\t\t'screenActivate',\r\n\t\t\t{\r\n\t\t\t\tapp: Liferay.SPA.app,\r\n\t\t\t\tscreen: this\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tdeactivate() {\r\n\t\tsuper.deactivate();\r\n\r\n\t\tLiferay.fire(\r\n\t\t\t'screenDeactivate',\r\n\t\t\t{\r\n\t\t\t\tapp: Liferay.SPA.app,\r\n\t\t\t\tscreen: this\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tflip(surfaces) {\r\n\t\tdocument.body.className = this.virtualDocument.querySelector('body').className;\r\n\r\n\t\tdom.addClasses(document.body, 'lfr-surface-loading');\r\n\r\n\t\treturn CancellablePromise.resolve(Utils.resetAllPortlets())\r\n\t\t\t.then(super.flip(surfaces))\r\n\t\t\t.then(() => {\r\n\t\t\t\tLiferay.fire(\r\n\t\t\t\t\t'screenFlip',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tapp: Liferay.SPA.app,\r\n\t\t\t\t\t\tscreen: this\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t}\r\n\r\n\tload(path) {\r\n\t\treturn super.load(path)\r\n\t\t\t.then((content) => {\r\n\t\t\t\tLiferay.fire(\r\n\t\t\t\t\t'screenLoad',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tapp: Liferay.SPA.app,\r\n\t\t\t\t\t\tcontent: content,\r\n\t\t\t\t\t\tscreen: this\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn content;\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport default EventScreen;"]}