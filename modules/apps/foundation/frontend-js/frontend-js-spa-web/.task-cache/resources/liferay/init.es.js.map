{"version":3,"sources":["/source/init.es.js"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,KAAI,MAAM,mBAAN;;AAEJ,KAAI,SAAJ,CACC,CACC;AACC,oCADD;AAEC,QAAM,cAAS,GAAT,EAAc;AACnB,OAAI,MAAM,kBAAQ,GAAR,CAAN,CADe;;AAGnB,OAAI,WAAW,kBAAQ,IAAI,iBAAJ,CAAsB,UAAtB,CAAR,CAAX,CAHe;;AAKnB,OAAI,WAAW,SAAS,WAAT,MAA0B,OAAO,QAAP,CAAgB,QAAhB,CALtB;;AAOnB,OAAI,CAAC,IAAI,iBAAJ,CAAsB,QAAtB,CAAD,EAAkC;AACrC,WAAO,KAAP,CADqC;IAAtC;;AAIA,UAAO,IAAI,iBAAJ,CAAsB,eAAtB,MAA2C,GAA3C,CAXY;GAAd;EAHR,EAiBC;AACC,oCADD;AAEC,QAAM,cAAS,GAAT,EAAc;AACnB,OAAI,IAAI,OAAJ,CAAY,aAAa,WAAb,EAAZ,MAA4C,CAA5C,EAA+C;AAClD,WAAO,KAAP,CADkD;IAAnD;;AAIA,OAAI,WAAW,QAAQ,GAAR,CAAY,aAAZ,CAA0B,IAA1B,CAA+B,UAAC,YAAD;WAAkB,IAAI,OAAJ,CAAY,YAAZ,MAA8B,CAA9B;IAAlB,CAA1C,CALe;;AAOnB,OAAI,aAAa,SAAb,EAAwB;AAC3B,WAAO,KAAP,CAD2B;IAA5B;;AAIA,OAAI,MAAM,kBAAQ,GAAR,CAAN,CAXe;;AAanB,OAAI,YAAY,IAAI,iBAAJ,CAAsB,eAAtB,CAAZ,CAbe;;AAenB,UAAO,cAAc,GAAd,IAAqB,CAAC,SAAD,CAfT;GAAd;EAnBR,CADD;;AAyCA,SAAQ,IAAR,CAAa,UAAb,GAA0B,UAAS,IAAT,EAAe;AACxC,kBAAM,QAAN,CACC,YAAM;AACL,OAAI,cAAc,KAAK,MAAL,EAAd,CADC;AAEL,OAAI,MAAM,YAAY,MAAZ,CAFL;;AAIL,OAAI,IAAI,WAAJ,CAAgB,GAAhB,KAAwB,YAAY,MAAZ,KAAuB,KAAvB,EAA8B;AACzD,YAAQ,IAAR,CAAa,aAAb,GAA6B,KAA7B,CADyD;;AAGzD,sBAAQ,mBAAR,GAA8B,WAA9B,CAHyD;;AAKzD,QAAI,QAAJ,CAAa,gBAAM,UAAN,CAAiB,GAAjB,CAAb,EALyD;IAA1D,MAOK;AACJ,gBAAY,MAAZ,GADI;IAPL;GAJD,CADD,CADwC;EAAf;;AAoB1B,SAAQ,GAAR,GAAc,QAAQ,GAAR,IAAe,EAAf;;AAEd,SAAQ,GAAR,CAAY,GAAZ,GAAkB,GAAlB;;mBAEe,QAAQ,GAAR","sourcesContent":["'use strict';\n\nimport ActionURLScreen from './screen/ActionURLScreen.es';\nimport App from './app/App.es';\nimport async from 'metal/src/async/async';\nimport globals from 'senna/src/globals/globals';\nimport RenderURLScreen from './screen/RenderURLScreen.es';\nimport Uri from 'metal-uri/src/Uri';\nimport utils from 'senna/src/utils/utils';\n\nlet app = new App();\n\napp.addRoutes(\n\t[\n\t\t{\n\t\t\thandler: ActionURLScreen,\n\t\t\tpath: function(url) {\n\t\t\t\tvar uri = new Uri(url);\n\n\t\t\t\tvar redirect = new Uri(uri.getParameterValue('redirect'));\n\n\t\t\t\tvar hostname = redirect.getHostname() || window.location.hostname;\n\n\t\t\t\tif (!app.isLinkSameOrigin_(hostname)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn uri.getParameterValue('p_p_lifecycle') === '1';\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\thandler: RenderURLScreen,\n\t\t\tpath: function(url) {\n\t\t\t\tif (url.indexOf(themeDisplay.getPathMain()) === 0) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar excluded = Liferay.SPA.excludedPaths.find((excludedPath) => url.indexOf(excludedPath) === 0);\n\n\t\t\t\tif (excluded !== undefined) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar uri = new Uri(url);\n\n\t\t\t\tvar lifecycle = uri.getParameterValue('p_p_lifecycle');\n\n\t\t\t\treturn lifecycle === '0' || !lifecycle;\n\t\t\t}\n\t\t}\n\t]\n);\n\nLiferay.Util.submitForm = function(form) {\n\tasync.nextTick(\n\t\t() => {\n\t\t\tlet formElement = form.getDOM();\n\t\t\tlet url = formElement.action;\n\n\t\t\tif (app.canNavigate(url) && formElement.method !== 'get') {\n\t\t\t\tLiferay.Util._submitLocked = false;\n\n\t\t\t\tglobals.capturedFormElement = formElement;\n\n\t\t\t\tapp.navigate(utils.getUrlPath(url));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tformElement.submit();\n\t\t\t}\n\t\t}\n\t);\n};\n\nLiferay.SPA = Liferay.SPA || {};\n\nLiferay.SPA.app = app;\n\nexport default Liferay.SPA;"]}