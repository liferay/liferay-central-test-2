{"version":3,"sources":["/source/init.es.js"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,KAAI,UAAU,SAAV,OAAU,GAAW;AACxB,MAAI,MAAM,mBAAN,CADoB;;AAGxB,MAAI,SAAJ,CACC,CACC;AACC,qCADD;AAEC,SAAM,cAAS,GAAT,EAAc;AACnB,QAAI,MAAM,kBAAQ,GAAR,CAAN,CADe;;AAGnB,QAAI,gBAAgB,kBAAQ,QAAQ,GAAR,CAAY,aAAZ,CAAxB,CAHe;;AAKnB,QAAI,WAAW,cAAc,WAAd,MAA+B,OAAO,QAAP,CAAgB,QAAhB,CAL3B;;AAOnB,QAAI,CAAC,IAAI,iBAAJ,CAAsB,QAAtB,CAAD,EAAkC;AACrC,YAAO,KAAP,CADqC;KAAtC;;AAIA,WAAO,IAAI,iBAAJ,CAAsB,eAAtB,MAA2C,GAA3C,CAXY;IAAd;GAHR,EAiBC;AACC,qCADD;AAEC,SAAM,cAAS,GAAT,EAAc;AACnB,QAAI,IAAI,OAAJ,CAAY,aAAa,WAAb,EAAZ,MAA4C,CAA5C,EAA+C;AAClD,YAAO,KAAP,CADkD;KAAnD;;AAIA,QAAI,WAAW,QAAQ,GAAR,CAAY,aAAZ,CAA0B,IAA1B,CAA+B,UAAC,YAAD;YAAkB,IAAI,OAAJ,CAAY,YAAZ,MAA8B,CAA9B;KAAlB,CAA1C,CALe;;AAOnB,QAAI,QAAJ,EAAc;AACb,YAAO,KAAP,CADa;KAAd;;AAIA,QAAI,MAAM,kBAAQ,GAAR,CAAN,CAXe;;AAanB,QAAI,YAAY,IAAI,iBAAJ,CAAsB,eAAtB,CAAZ,CAbe;;AAenB,WAAO,cAAc,GAAd,IAAqB,CAAC,SAAD,CAfT;IAAd;GAnBR,CADD,EAHwB;;AA4CxB,UAAQ,IAAR,CAAa,UAAb,GAA0B,UAAS,IAAT,EAAe;AACxC,mBAAM,QAAN,CACC,YAAM;AACL,QAAI,cAAc,KAAK,MAAL,EAAd,CADC;AAEL,QAAI,MAAM,YAAY,MAAZ,CAFL;;AAIL,QAAI,IAAI,WAAJ,CAAgB,GAAhB,KAAwB,YAAY,MAAZ,KAAuB,KAAvB,EAA8B;AACzD,aAAQ,IAAR,CAAa,aAAb,GAA6B,KAA7B,CADyD;;AAGzD,uBAAQ,mBAAR,GAA8B,WAA9B,CAHyD;;AAKzD,SAAI,QAAJ,CAAa,gBAAM,UAAN,CAAiB,GAAjB,CAAb,EALyD;KAA1D,MAOK;AACJ,iBAAY,MAAZ,GADI;KAPL;IAJD,CADD,CADwC;GAAf,CA5CF;;AAgExB,UAAQ,GAAR,CAAY,GAAZ,GAAkB,GAAlB,CAhEwB;;AAkExB,UAAQ,IAAR,CAAa,UAAb,EAlEwB;EAAX;;AAqEd,KAAI,kBAAQ,QAAR,CAAiB,UAAjB,IAA+B,SAA/B,EAA0C;AAC7C,oBAAQ,QAAR,CAAiB,gBAAjB,CAAkC,kBAAlC,EAAsD,OAAtD,EAD6C;EAA9C,MAGK;AACJ,YADI;EAHL;;AAOA,SAAQ,GAAR,GAAc,QAAQ,GAAR,IAAe,EAAf;;mBAEC,QAAQ,GAAR","sourcesContent":["'use strict';\n\nimport ActionURLScreen from './screen/ActionURLScreen.es';\nimport App from './app/App.es';\nimport async from 'metal/src/async/async';\nimport globals from 'senna/src/globals/globals';\nimport RenderURLScreen from './screen/RenderURLScreen.es';\nimport Uri from 'metal-uri/src/Uri';\nimport utils from 'senna/src/utils/utils';\n\nvar initSPA = function() {\n\tlet app = new App();\n\n\tapp.addRoutes(\n\t\t[\n\t\t\t{\n\t\t\t\thandler: ActionURLScreen,\n\t\t\t\tpath: function(url) {\n\t\t\t\t\tvar uri = new Uri(url);\n\n\t\t\t\t\tvar loginRedirect = new Uri(Liferay.SPA.loginRedirect);\n\n\t\t\t\t\tvar hostname = loginRedirect.getHostname() || window.location.hostname;\n\n\t\t\t\t\tif (!app.isLinkSameOrigin_(hostname)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn uri.getParameterValue('p_p_lifecycle') === '1';\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\thandler: RenderURLScreen,\n\t\t\t\tpath: function(url) {\n\t\t\t\t\tif (url.indexOf(themeDisplay.getPathMain()) === 0) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar excluded = Liferay.SPA.excludedPaths.some((excludedPath) => url.indexOf(excludedPath) === 0);\n\n\t\t\t\t\tif (excluded) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar uri = new Uri(url);\n\n\t\t\t\t\tvar lifecycle = uri.getParameterValue('p_p_lifecycle');\n\n\t\t\t\t\treturn lifecycle === '0' || !lifecycle;\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t);\n\n\tLiferay.Util.submitForm = function(form) {\n\t\tasync.nextTick(\n\t\t\t() => {\n\t\t\t\tlet formElement = form.getDOM();\n\t\t\t\tlet url = formElement.action;\n\n\t\t\t\tif (app.canNavigate(url) && formElement.method !== 'get') {\n\t\t\t\t\tLiferay.Util._submitLocked = false;\n\n\t\t\t\t\tglobals.capturedFormElement = formElement;\n\n\t\t\t\t\tapp.navigate(utils.getUrlPath(url));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tformElement.submit();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tLiferay.SPA.app = app;\n\n\tLiferay.fire('SPAReady');\n};\n\nif (globals.document.readyState == 'loading') {\n\tglobals.document.addEventListener('DOMContentLoaded', initSPA);\n}\nelse {\n\tinitSPA();\n}\n\nLiferay.SPA = Liferay.SPA || {};\n\nexport default Liferay.SPA;"]}