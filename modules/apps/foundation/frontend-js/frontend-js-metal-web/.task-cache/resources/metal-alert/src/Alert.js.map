{"version":3,"sources":["/source/Alert.js"],"names":[],"mappings":"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","sourcesContent":["'use strict';\n\nimport { core } from 'metal';\nimport dom from 'metal-dom';\nimport Anim from 'metal-anim';\nimport Component from 'metal-component';\nimport { EventHandler } from 'metal-events';\nimport Soy from 'metal-soy';\n\nimport templates from './Alert.soy';\n\n/**\n * Alert component.\n */\nclass Alert extends Component {\n\tcreated() {\n\t\tthis.eventHandler_ = new EventHandler();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdetached() {\n\t\tsuper.detached();\n\t\tthis.eventHandler_.removeAllListeners();\n\t\tclearTimeout(this.delay_);\n\t}\n\n\t/**\n\t * Closes the alert, disposing it once the animation ends.\n\t */\n\tclose() {\n\t\tdom.once(this.element, 'animationend', this.dispose.bind(this));\n\t\tdom.once(this.element, 'transitionend', this.dispose.bind(this));\n\t\tthis.eventHandler_.removeAllListeners();\n\t\tthis.syncVisible(false);\n\t}\n\n\t/**\n\t * Handles document click in order to close the alert.\n\t * @param {!Event} event\n\t * @protected\n\t */\n\thandleDocClick_(event) {\n\t\tif (!this.element.contains(event.target)) {\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t/**\n\t * Hide the alert.\n\t */\n\thide() {\n\t\tthis.visible = false;\n\t}\n\n\t/**\n\t * Hides the alert completely (with display \"none\"). This is called after the\n\t * hiding animation is done.\n\t * @protected\n\t */\n\thideCompletely_() {\n\t\tif (!this.isDisposed() && !this.visible) {\n\t\t\tsuper.syncVisible(false);\n\t\t}\n \t}\n\n\t/**\n\t * Toggles the visibility of the alert.\n\t */\n\ttoggle() {\n\t\tthis.visible = !this.visible;\n\t}\n\n\t/**\n\t * Show the alert.\n\t */\n\tshow() {\n\t\tthis.visible = true;\n\t}\n\n\t/**\n\t * Synchronization logic for `dismissible` state.\n\t * @param {boolean} dismissible\n\t */\n\tsyncDismissible(dismissible) {\n\t\tif (dismissible) {\n\t\t\tthis.eventHandler_.add(dom.on(document, 'click', this.handleDocClick_.bind(this)));\n\t\t} else {\n\t\t\tthis.eventHandler_.removeAllListeners();\n\t\t}\n\t}\n\n\t/**\n\t * Synchronization logic for `hideDelay` state.\n\t * @param {?number} hideDelay\n\t */\n\tsyncHideDelay(hideDelay) {\n\t\tif (core.isNumber(hideDelay) && this.visible) {\n\t\t\tclearTimeout(this.delay_);\n\t\t\tthis.delay_ = setTimeout(this.hide.bind(this), hideDelay);\n\t\t}\n\t}\n\n\t/**\n\t * Synchronization logic for `visible` state.\n\t * @param {boolean} visible\n\t */\n\tsyncVisible(visible, prevVisible) {\n\t\tvar shouldAsync = false;\n\t\tif (!visible) {\n\t\t\tdom.once(this.element, 'animationend', this.hideCompletely_.bind(this));\n\t\t\tdom.once(this.element, 'transitionend', this.hideCompletely_.bind(this));\n\t\t} else if (core.isDef(prevVisible)) {\n\t\t\tshouldAsync = true;\n\t\t\tsuper.syncVisible(true);\n\t\t}\n\n\t\tvar showOrHide = () => {\n\t\t\tif (this.isDisposed()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdom.removeClasses(this.element, this.animClasses[visible ? 'hide' : 'show']);\n\t\t\tdom.addClasses(this.element, this.animClasses[visible ? 'show' : 'hide']);\n\n\t\t\t// Some browsers do not fire transitionend events when running in background\n\t\t\t// tab, see https://bugzilla.mozilla.org/show_bug.cgi?id=683696.\n\t\t\tAnim.emulateEnd(this.element);\n\n\t\t\tif (visible && core.isNumber(this.hideDelay)) {\n\t\t\t\tthis.syncHideDelay(this.hideDelay);\n\t\t\t}\n\t\t};\n\n\t\tif (shouldAsync) {\n\t\t\t// We need to start the animation asynchronously because of the possible\n\t\t\t// previous call to `super.syncVisible`, which doesn't allow the show\n\t\t\t// animation to work as expected.\n\t\t\tsetTimeout(showOrHide, 0);\n\t\t} else {\n\t\t\tshowOrHide();\n\t\t}\n\t}\n}\nSoy.register(Alert, templates);\n\n/**\n * Alert state definition.\n * @type {!Object}\n * @static\n */\nAlert.STATE = {\n\t/**\n\t * The CSS classes that should be added to the alert when being shown/hidden.\n\t * @type {!Object}\n\t */\n\tanimClasses: {\n\t\tvalidator: core.isObject,\n\t\tvalue: {\n\t\t\tshow: 'fade in',\n\t\t\thide: 'fade'\n\t\t}\n\t},\n\n\t/**\n\t * The body content of the alert.\n\t * @type {string}\n\t */\n\tbody: {\n\t\tisHtml: true\n\t},\n\n\t/**\n\t * Flag indicating if the alert should be dismissable (closeable).\n\t * @type {boolean}\n\t * @default true\n\t */\n\tdismissible: {\n\t\tvalidator: core.isBoolean,\n\t\tvalue: true\n\t},\n\n\t/**\n\t * The CSS classes that should be added to the alert.\n\t * @type {string}\n\t * @default 'alert-success'\n\t */\n\telementClasses: {\n\t\tvalue: 'alert-success'\n\t},\n\n\t/**\n\t * Delay hiding the alert (ms).\n\t * @type {?number}\n\t */\n\thideDelay: {\n\t},\n\n\t/**\n\t * Spinner indicating.\n\t * @type {boolean}\n\t * @default false\n\t */\n\tspinner: {\n\t\tvalue: false\n\t},\n\n\t/**\n\t * The CSS classes that should be added to the spinner.\n\t * @type {string}\n\t */\n\tspinnerClasses: {\n\t},\n\n\t/**\n\t * Spinner is marked as done.\n\t * @type {boolean}\n\t * @default false\n\t */\n\tspinnerDone: {\n\t\tvalue: false\n\t},\n\n\t/**\n\t * Flag indicating if the alert is visible or not.\n\t * @type {boolean}\n\t * @default false\n\t */\n\tvisible: {\n\t\tvalue: false\n\t}\n};\n\nexport default Alert;\nimport JQueryAdapter from 'metal-jquery-adapter/src/JQueryAdapter';JQueryAdapter.register('alert', Alert);"]}