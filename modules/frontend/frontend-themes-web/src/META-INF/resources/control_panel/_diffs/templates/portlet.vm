#set ($portlet_display = $portletDisplay)

#set ($portlet_id = $htmlUtil.escapeAttribute($portlet_display.getId()))
#set ($portlet_title = $htmlUtil.escape($portlet_display.getTitle()))
#set ($portlet_description = $portlet_display.getDescription())
#set ($portlet_back_url = $htmlUtil.escapeHREF($portlet_display.getURLBack()))
#set ($show_portlet_title = $portlet_display.getControlPanelCategory().startsWith("site_administration."))
#set ($valid_portlet_description = $validator.isNotNull($portlet_description) && $portlet_description.indexOf('javax.portlet.description') == -1)

#set ($portlet_topper_css_class = "portlet-topper")

#if (!$show_portlet_title)
	#set ($portlet_topper_css_class = "${portlet_topper_css_class} portlet-topper-titleless")
#end

<section class="portlet" id="portlet_$portlet_id">
	<header class="$portlet_topper_css_class">

		#if ($show_portlet_title)
			<h2 class="portlet-title" id="cpPortletTitle">
				<span class="portlet-title-text">$portlet_title</span>

				#if ($valid_portlet_description)
					$theme.iconHelp($portlet_description)
				#end
			</h2>
		#end

		<menu class="portlet-topper-toolbar" id="portlet-topper-toolbar_$portlet_id" type="portlet-topper-toolbar">
			#if ($portlet_display.isShowBackIcon())
				<a class="portlet-icon-back" href="$portlet_back_url">#language ("return-to-full-page")</a>
			#else
				$theme.portletIconOptions()
			#end
		</menu>
	</header>

	<div class="portlet-content">
		$portlet_display.writeContent($writer)
	</div>
</section>