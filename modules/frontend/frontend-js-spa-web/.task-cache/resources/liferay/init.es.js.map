{"version":3,"sources":["/source/init.es.js"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,KAAI,MAAM,mBAAN;;AAEJ,KAAI,SAAJ,CACC,CACC;AACC,oCADD;AAEC,QAAM,cAAS,GAAT,EAAc;AACnB,OAAI,MAAM,kBAAQ,GAAR,CAAN,CADe;;AAGnB,UAAO,IAAI,iBAAJ,CAAsB,eAAtB,MAA2C,GAA3C,CAHY;GAAd;EAHR,EASC;AACC,oCADD;AAEC,QAAM,cAAS,GAAT,EAAc;AACnB,OAAI,IAAI,OAAJ,CAAY,aAAa,WAAb,EAAZ,MAA4C,CAA5C,EAA+C;AAClD,WAAO,KAAP,CADkD;IAAnD;;AAIA,OAAI,MAAM,kBAAQ,GAAR,CAAN,CALe;;AAOnB,OAAI,YAAY,IAAI,iBAAJ,CAAsB,eAAtB,CAAZ,CAPe;;AASnB,UAAO,cAAc,GAAd,IAAqB,CAAC,SAAD,CATT;GAAd;EAXR,CADD;;AA2BA,SAAQ,IAAR,CAAa,UAAb,GAA0B,UAAS,IAAT,EAAe;AACxC,kBAAM,QAAN,CACC,YAAM;AACL,OAAI,cAAc,KAAK,MAAL,EAAd,CADC;AAEL,OAAI,MAAM,YAAY,MAAZ,CAFL;;AAIL,OAAI,IAAI,WAAJ,CAAgB,GAAhB,KAAwB,YAAY,MAAZ,KAAuB,KAAvB,EAA8B;AACzD,YAAQ,IAAR,CAAa,aAAb,GAA6B,KAA7B,CADyD;;AAGzD,sBAAQ,mBAAR,GAA8B,WAA9B,CAHyD;;AAKzD,QAAI,QAAJ,CAAa,gBAAM,UAAN,CAAiB,GAAjB,CAAb,EALyD;IAA1D,MAOK;AACJ,gBAAY,MAAZ,GADI;IAPL;GAJD,CADD,CADwC;EAAf;;AAoB1B,SAAQ,GAAR,GAAc;AACb,OAAK,GAAL;EADD;;mBAIe,QAAQ,GAAR","sourcesContent":["'use strict';\r\n\r\nimport ActionURLScreen from './screen/ActionURLScreen.es';\r\nimport App from './app/App.es';\r\nimport async from 'metal/src/async/async'\r\nimport globals from 'senna/src/globals/globals'\r\nimport RenderURLScreen from './screen/RenderURLScreen.es';\r\nimport Uri from 'metal-uri/src/Uri'\r\nimport utils from 'senna/src/utils/utils';\r\n\r\nlet app = new App();\r\n\r\napp.addRoutes(\r\n\t[\r\n\t\t{\r\n\t\t\thandler: ActionURLScreen,\r\n\t\t\tpath: function(url) {\r\n\t\t\t\tvar uri = new Uri(url);\r\n\r\n\t\t\t\treturn uri.getParameterValue('p_p_lifecycle') === '1';\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\thandler: RenderURLScreen,\r\n\t\t\tpath: function(url) {\r\n\t\t\t\tif (url.indexOf(themeDisplay.getPathMain()) === 0) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uri = new Uri(url);\r\n\r\n\t\t\t\tvar lifecycle = uri.getParameterValue('p_p_lifecycle');\r\n\r\n\t\t\t\treturn lifecycle === '0' || !lifecycle;\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n);\r\n\r\nLiferay.Util.submitForm = function(form) {\r\n\tasync.nextTick(\r\n\t\t() => {\r\n\t\t\tlet formElement = form.getDOM();\r\n\t\t\tlet url = formElement.action;\r\n\r\n\t\t\tif (app.canNavigate(url) && formElement.method !== 'get') {\r\n\t\t\t\tLiferay.Util._submitLocked = false;\r\n\r\n\t\t\t\tglobals.capturedFormElement = formElement;\r\n\r\n\t\t\t\tapp.navigate(utils.getUrlPath(url));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tformElement.submit();\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n}\r\n\r\nLiferay.SPA = {\r\n\tapp: app\r\n};\r\n\r\nexport default Liferay.SPA;"]}