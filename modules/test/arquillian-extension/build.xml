<?xml version="1.0"?>
<!DOCTYPE project>

<project>
	<import file="../../../tools/sdk/build-common-osgi-plugin.xml" />

	<path id="plugin.classpath">
		<path refid="plugin-lib.classpath" />
		<fileset dir="${liferay.home}/osgi/test/" includes="portal-test*.jar" />
		<fileset dir="${app.server.lib.global.dir}" includes="*.jar" />
		<fileset dir="${app.server.lib.portal.dir}" includes="annotations.jar,commons-logging.jar,log4j.jar,util-bridges.jar,util-java.jar,util-taglib.jar" />
		<fileset dir="${sdk.dir}/dependencies/aQute.bnd/lib" includes="*.jar" />
		<fileset dir="${sdk.dir}/lib" includes="activation.jar,javax.servlet-api.jar,jsp-api.jar,mail.jar" />
	</path>

	<property name="auto.deploy.dir" value="${liferay.home}/osgi/modules" />

	<target name="jar">
		<jar-macro
			module.dir="${basedir}"
		/>

		<antcall target="jar-javadoc" />

		<antcall target="jar-source" />

		<antcall target="build-common-ivy.publish">
			<param name="ivy.publish.resolver" value="local-m2" />
			<param name="plugin.release.qualifier" value="-SNAPSHOT" />
		</antcall>
	</target>
</project>